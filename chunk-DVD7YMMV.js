import{e as vt,f as bt}from"./chunk-YWN4MWLT.js";import{a as Ie,c as oe,d as Mt,e as re,f as ae,i as le}from"./chunk-LJFNMUK3.js";import{A as Dt,B as St,D as kt,E as H,F as E,G as _e,H as ne,I as Oe,a as wt,t as qe,u as We,v as He,w as ve,x as $e,y as Xe}from"./chunk-JHEYQFVQ.js";import{B as xt,D as Tt,N as te,X as be,da as Ot,e as yt,ia as ie,l as Se,p as ke,q as _t,qa as It,s as ht,x as Ct}from"./chunk-NC7CJBZN.js";import{$a as D,$b as j,Ab as y,B as Ue,Bb as at,Cb as lt,G as Je,Gb as O,Hb as st,I as Ze,Ib as C,Jb as s,Kb as dt,Lb as ct,Oa as it,Qb as pt,Ra as l,Rb as ge,Sb as Z,Tb as V,Vb as F,Wb as ut,Xb as B,Yb as w,Zb as S,_ as et,_b as je,ac as q,ba as Ce,bb as nt,bc as W,cc as ye,da as m,db as U,dc as ee,eb as ot,ec as N,f as Ge,fb as rt,fc as Te,ia as _,ic as v,ja as h,jb as J,jc as b,ka as Y,l as ze,ma as tt,oc as x,q as Le,qa as T,qb as R,qc as we,rb as f,sb as g,sc as u,tb as Ve,tc as mt,ua as Q,ub as Be,uc as De,vb as I,vc as ft,wa as xe,wb as M,wc as P,x as Qe,xb as d,yb as c,yc as gt,zb as p}from"./chunk-DX3VH5IT.js";import{a as Ke}from"./chunk-HZ6M6AS2.js";var K=new Ce("LAB_CONTROL"),$=class{constructor(){this.touched=T(!1)}setValue(n){this.markAsTouched(),n!==this.value()&&(this.writeValue(n),this.onFormChange?.(n))}markAsTouched(){this.touched()||(this.touched.set(!0),this.onFormTouched?.())}writeValue(n){this.value.set(n)}registerOnChange(n){this.onFormChange=n}registerOnTouched(n){this.onFormTouched=n}setDisabledState(n){this.disabled.set(n)}};var Vt=["*"],Bt=0,se=class se{constructor(){this.control=ft.required(K);this.uniqueId=(Bt++).toString();this.labelId=`lab-form-field-label-${this.uniqueId}`;this.id=u(`lab-form-field-${this.uniqueId}`);this.label=u.required()}};se.\u0275fac=function(e){return new(e||se)},se.\u0275cmp=D({type:se,selectors:[["lab-form-field"]],contentQueries:function(e,t,i){e&1&&pt(i,t.control,K,5),e&2&&Z()},hostAttrs:[1,"inline-flex","flex-col"],hostVars:1,hostBindings:function(e,t){e&2&&R("id",t.id())},inputs:{id:[1,"id"],label:[1,"label"]},ngContentSelectors:Vt,decls:4,vars:5,consts:[[1,"mx-1","text-sm","text-gray-300",3,"id","for"]],template:function(e,t){e&1&&(dt(),at(0,"label",0),w(1),v(2,"translate"),lt(),ct(3)),e&2&&(st("id",t.labelId)("htmlFor",t.control().id()),l(),S(b(2,3,t.label())))},dependencies:[E],encapsulation:2,changeDetection:0});var Me=se;var jt=0,A=class A extends ${constructor(){super(...arguments);this.uniqueId=(jt++).toString();this.id=u(`lab-input-number-${this.uniqueId}`);this.value=P();this.disabled=P(!1);this.minimum=u(te.zero);this.maximum=u(void 0);this.integer=u(!1);this.rounded=u(!0);this.value$=new Ge;this.emit$=this.value$.pipe(Se(),Je(e=>e.type==="input"?Qe(300):ze({})),Le(e=>e.value),be(),Le(e=>this.integer()?e.round():e));this.text=we({source:this.value,computation:(e,t)=>e==null?"0":t!=null&&te(t.value).eq(e)?t.value:e.toString()})}ngOnInit(){this.emit$.subscribe(e=>{this.setValue(e)})}validate(e){let t=e.value;if(t==null)return null;try{let i=this.minimum(),r=this.maximum();if((i==null||t.gte(i))&&(r==null||t.lte(r)))return null}catch{}return{rational:{valid:!1}}}onChange(e){try{let t=this.text(),i=te(t);this.value$.next({type:e.type,value:i}),i&&e.type==="keydown"&&this.text.set(i.toString())}catch{}}};A.\u0275fac=(()=>{let e;return function(i){return(e||(e=Q(A)))(i||A)}})(),A.\u0275cmp=D({type:A,selectors:[["lab-input-number"]],hostAttrs:[1,"inline-flex","group"],inputs:{id:[1,"id"],value:[1,"value"],disabled:[1,"disabled"],minimum:[1,"minimum"],maximum:[1,"maximum"],integer:[1,"integer"],rounded:[1,"rounded"]},outputs:{value:"valueChange",disabled:"disabledChange"},features:[Te([{provide:Ie,useExisting:A,multi:!0},{provide:Mt,useExisting:A,multi:!0},{provide:K,useExisting:A}]),U],decls:1,vars:4,consts:[["type","text",1,"input","group-[.ng-invalid]:border-red-500","group-[.ng-invalid]:outline-red-500",3,"ngModelChange","input","blur","keydown.enter","ngModel","disabled"]],template:function(t,i){t&1&&(c(0,"input",0),W("ngModelChange",function(a){return q(i.text,a)||(i.text=a),a}),C("input",function(a){return i.onChange(a)})("blur",function(a){return i.onChange(a)})("keydown.enter",function(a){return i.onChange(a)}),p()),t&2&&(F("rounded-none",!i.rounded()),j("ngModel",i.text),d("disabled",i.disabled()))},dependencies:[le,oe,re,ae],encapsulation:2,changeDetection:0});var Et=A;var Ee=new Ce("TOOLTIP_DATA");var Rt=(o,n)=>n.key;function Wt(o,n){if(o&1&&y(0,"lab-icon",2),o&2){let e=n.$implicit;d("value",e.key)("quantity",e.value)}}function Ht(o,n){if(o&1&&y(0,"lab-icon",2),o&2){let e=n.$implicit;d("value",e.key)("quantity",e.value)}}function $t(o,n){if(o&1&&y(0,"lab-icon",7),o&2){let e=s().$implicit;d("value",e)}}function Xt(o,n){if(o&1&&f(0,$t,1,1,"lab-icon",7),o&2){let e=n.$implicit,t=s(2);g(t.data().itemRecord[e].quality==null?0:-1)}}function Yt(o,n){if(o&1&&(c(0,"div")(1,"div",6),w(2),v(3,"translate"),p(),c(4,"div"),I(5,Xt,1,1,null,null,Be),p()()),o&2){s();let e=N(0);l(2),S(b(3,1,"data.producers")),l(3),M(e.producers)}}function Kt(o,n){if(o&1&&y(0,"lab-icon",8),o&2){let e=n.$implicit;d("value",e)}}function Gt(o,n){if(o&1&&(c(0,"div")(1,"div",6),w(2),v(3,"translate"),p(),c(4,"div"),I(5,Kt,1,1,"lab-icon",8,Be),p()()),o&2){s();let e=N(0);F("text-end",!e.flags.has("hideProducer")),l(2),S(b(3,3,"data.locations")),l(3),M(n)}}var ce=class ce{constructor(){this.settingsStore=m(ie);this.value=u.required();this.data=this.settingsStore.dataset;this.recipe=x(()=>this.data().recipeRecord[this.value()]);this.faArrowRightLong=_t}};ce.\u0275fac=function(e){return new(e||ce)},ce.\u0275cmp=D({type:ce,selectors:[["lab-recipe"]],hostAttrs:[1,"inline-flex","flex-col"],inputs:{value:[1,"value"]},decls:13,vars:9,consts:[[1,"flex","flex-wrap","items-center","justify-center"],["value","time","type","system",3,"quantity"],["type","item",3,"value","quantity"],[3,"icon"],[1,"flex","flex-wrap","justify-between","gap-2"],[3,"text-end"],[1,"mt-1","text-sm"],["type","item",3,"value"],["type","location",3,"value"]],template:function(e,t){if(e&1&&(ye(0),c(1,"div",0),y(2,"lab-icon",1),I(3,Wt,1,2,"lab-icon",2,Rt),v(5,"keyvalue"),y(6,"fa-icon",3),I(7,Ht,1,2,"lab-icon",2,Rt),v(9,"keyvalue"),p(),c(10,"div",4),f(11,Yt,7,3,"div"),f(12,Gt,7,5,"div",5),p()),e&2){let i,r=ee(t.recipe());l(2),d("quantity",r.time),l(),M(b(5,5,r.in)),l(3),d("icon",t.faArrowRightLong),l(),M(b(9,7,r.out)),l(4),g(r.flags.has("hideProducer")?-1:11),l(),g((i=r.locations)?12:-1,i)}},dependencies:[H,ne,yt,E],encapsulation:2,changeDetection:0});var Ne=ce;function zt(o,n){if(o&1&&(c(0,"div"),w(1),p(),y(2,"lab-recipe",2)),o&2){let e=n;l(),S(e.name),l(),d("value",e.id)}}function Qt(o,n){if(o&1&&f(0,zt,3,2),o&2){let e,t=s();g((e=t.data().recipeRecord[t.tooltipData.value])?0:-1,e)}}function Ut(o,n){o&1&&y(0,"lab-recipe",2),o&2&&d("value",n)}function Jt(o,n){if(o&1&&(c(0,"div"),w(1),p(),f(2,Ut,1,1,"lab-recipe",2)),o&2){let e,t=s(2);l(),S(n.name),l(),g((e=t.recipeId())?2:-1,e)}}function Zt(o,n){if(o&1&&f(0,Jt,3,2),o&2){let e,t=s();g((e=t.data().itemRecord[t.tooltipData.value])?0:-1,e)}}function ei(o,n){if(o&1&&(y(0,"span",0),v(1,"translate")),o&2){let e=s();d("innerHtml",b(1,1,e.tooltipData.value),it)}}function ti(o,n){if(o&1&&(c(0,"div",1),w(1),v(2,"translate"),p()),o&2){let e=s();l(),S(b(2,1,e.tooltipData.action))}}var Ft={originX:{start:null,center:null,end:null},originY:{top:null,center:null,bottom:null},overlayX:{start:null,center:null,end:null},overlayY:{top:null,center:null,bottom:null}},ii=_e("bg-gray-950 border rounded-xs border-gray-700 py-[5px] px-2 animate-fade-in relative max-w-69",{variants:Ft,compoundVariants:[{originY:"bottom",overlayY:"top",class:"mt-1.5"},{originX:"end",overlayX:"start",class:"ml-1.5"},{originY:"top",overlayY:"bottom",class:"mb-1.5"},{originX:"start",overlayX:"end",class:"mr-1.5"}]}),ni=_e("absolute size-1.75 border-gray-700 bg-gray-950 m-auto border-t border-l",{variants:Ft,compoundVariants:[{originY:"bottom",overlayY:"top",class:"-top-1 rotate-45"},{originX:"end",overlayX:"start",class:"-left-1 rotate-315"},{originY:"top",overlayY:"bottom",class:"-bottom-1 rotate-225"},{originX:"start",overlayX:"end",class:"-right-1 rotate-135"},{originX:"start",originY:["top","bottom"],overlayX:"start",overlayY:["top","bottom"],class:"left-3"},{originX:"end",originY:["top","bottom"],overlayX:"end",overlayY:["top","bottom"],class:"right-3"},{originX:["start","end"],originY:"top",overlayX:["start","end"],overlayY:"top",class:"top-3"},{originX:["start","end"],originY:"bottom",overlayX:["start","end"],overlayY:"bottom",class:"bottom-3"}]}),pe=class pe{constructor(){this.destroyRef=m(tt);this.recipesStore=m(It);this.tooltipData=m(Ee);this.data=this.recipesStore.adjustedDataset;this.position=T(this.tooltipData.defaultPosition);this.hostClass=x(()=>ii(this.position()));this.nubClass=x(()=>ni(this.position()));this.recipeId=x(()=>{let n=this.tooltipData.type;if(n!=="item"&&n!=="technology")return;let e=this.tooltipData.value,t=this.data(),r=t.itemRecipeIds[e].map(a=>t.adjustedRecipe[a]).filter(a=>!a.flags.has("recycling")&&a.quality==null&&a.produces.has(e));if(r.length===1)return r[0].id})}ngOnInit(){this.tooltipData.positionChanges.pipe(Se(this.destroyRef)).subscribe(n=>{this.position.set(n.connectionPair)})}};pe.\u0275fac=function(e){return new(e||pe)},pe.\u0275cmp=D({type:pe,selectors:[["lab-tooltip-overlay"]],hostVars:2,hostBindings:function(e,t){e&2&&B(t.hostClass())},decls:5,vars:4,consts:[[3,"innerHtml"],[1,"text-sm","italic"],[3,"value"]],template:function(e,t){e&1&&(f(0,Qt,1,1)(1,Zt,1,1)(2,ei,2,3,"span",0),f(3,ti,3,3,"div",1),y(4,"span")),e&2&&(g(t.tooltipData.type==="recipe"?0:t.tooltipData.type?1:2),l(3),g(t.tooltipData.action?3:-1),l(),B(t.nubClass()))},dependencies:[Ne,E],encapsulation:2,changeDetection:0});var Re=pe;var ue=class ue{constructor(){this.elementRef=m(xe);this.overlay=m(He);this.injector=m(Y);this.labTooltip=u();this.labTooltipType=u();this.labTooltipPosition=u("below");this.labTooltipAction=u();this.labTooltipAdjustedRecipe=u()}show(){let n=this.labTooltip();if(this.overlayRef||!n)return;let e=this.labTooltipPosition()==="adjacent"?We:qe,t=this.overlay.position().flexibleConnectedTo(this.elementRef).withFlexibleDimensions(!1).withPositions(e),i={value:n,type:this.labTooltipType(),action:this.labTooltipAction(),adjustedRecipe:this.labTooltipAdjustedRecipe(),defaultPosition:e[0],positionChanges:t.positionChanges},r=Y.create({parent:this.injector,providers:[{provide:Ee,useValue:i}]}),a=this.overlay.create({positionStrategy:t});a.outsidePointerEvents().pipe(Ue(k=>k.type==="click"),Ze(1)).subscribe(()=>{this.hide()}),a.attach(new wt(Re,void 0,r)),this.overlayRef=a,J(()=>{a.updatePosition()},{injector:this.injector})}hide(){this.overlayRef&&(this.overlayRef.dispose(),delete this.overlayRef)}ngOnDestroy(){this.hide()}};ue.\u0275fac=function(e){return new(e||ue)},ue.\u0275dir=nt({type:ue,selectors:[["","labTooltip",""]],hostBindings:function(e,t){e&1&&C("mouseover",function(){return t.show()})("touchstart",function(){return t.show()})("mouseout",function(){return t.hide()})},inputs:{labTooltip:[1,"labTooltip"],labTooltipType:[1,"labTooltipType"],labTooltipPosition:[1,"labTooltipPosition"],labTooltipAction:[1,"labTooltipAction"],labTooltipAdjustedRecipe:[1,"labTooltipAdjustedRecipe"]}});var me=ue;var oi=["overlay"],ri=["option"],ai=(o,n)=>n.value;function li(o,n){if(o&1&&y(0,"lab-icon",2),o&2){let e=s(),t=N(0),i=N(1);d("value",e.iconLocator()(i.value))("type",t)}}function si(o,n){if(o&1&&y(0,"fa-icon",5),o&2){let e=s();F("-scale-y-100",e.opened()&&!e.hiding()),d("icon",e.faChevronDown)}}function di(o,n){if(o&1&&(w(0),v(1,"translate")),o&2){s(2);let e=N(1);je(" ",b(1,1,e.label)," ")}}function ci(o,n){if(o&1&&(c(0,"span",7),w(1),v(2,"translate"),p()),o&2){let e=s(2);l(),S(b(2,1,e.placeholder()))}}function pi(o,n){if(o&1&&(c(0,"div",6),f(1,di,2,3)(2,ci,3,3,"span",7),p(),y(3,"fa-icon",8)),o&2){let e=s(),t=N(1);l(),g(t?1:e.placeholder()?2:-1),l(2),F("-scale-y-100",e.opened()&&!e.hiding()),d("icon",e.faChevronDown)}}function ui(o,n){if(o&1){let e=O();c(0,"div",10)(1,"input",13),v(2,"translate"),W("ngModelChange",function(i){_(e);let r=s(2);return q(r.filterText,i)||(r.filterText=i),h(i)}),p(),y(3,"fa-icon",14),p()}if(o&2){let e=s(2);l(),d("placeholder",b(2,3,"filter")),j("ngModel",e.filterText),l(2),d("icon",e.faMagnifyingGlass)}}function mi(o,n){if(o&1&&y(0,"lab-icon",2),o&2){let e=s(2).$implicit,t=s(2),i=N(0);d("value",t.iconLocator()(e.value))("type",i)}}function fi(o,n){if(o&1){let e=O();c(0,"li",16,1),C("click",function(){_(e);let i=s().$implicit,r=s(2);return h(r.select(i.value))})("keydown.enter",function(){_(e);let i=s().$implicit,r=s(2);return h(r.select(i.value))})("keydown.arrowup",function(i){_(e);let r=V(1),a=s(3);return h(a.focusMove(r,-1,i))})("keydown.arrowdown",function(i){_(e);let r=V(1),a=s(3);return h(a.focusMove(r,1,i))})("keydown.home",function(i){_(e);let r=s(3);return h(r.focusFirst(i))})("keydown.end",function(i){_(e);let r=s(3);return h(r.focusLast(i))}),f(2,mi,1,2,"lab-icon",2),c(3,"span",17),w(4),p()()}if(o&2){let e=s().$implicit,t=N(0),i=s(2),r=N(0);B(e.value===i.value()?"text-brand-50 bg-brand-950 hover:bg-brand-800 focus-visible:bg-brand-800":"hover:bg-gray-800 focus-visible:bg-gray-800"),d("labTooltip",e.tooltip),R("tabindex",e.disabled?-1:0)("aria-disabled",e.disabled?"true":"false")("aria-selected",e.value===i.value()),l(2),g(r?2:-1),l(2),S(t)}}function gi(o,n){if(o&1&&(ye(0),v(1,"translate"),f(2,fi,5,8,"li",15)),o&2){let e=n.$implicit,t=s(2),i=ee(b(1,1,e.label));l(2),g(i.toLowerCase().includes(t.filterLower())?2:-1)}}function yi(o,n){o&1&&(c(0,"li",12),w(1),v(2,"translate"),p()),o&2&&(l(),je(" ",b(2,1,"select.noMatches")," "))}function vi(o,n){if(o&1&&(c(0,"div",9,0),f(2,ui,4,5,"div",10),c(3,"ul",11),I(4,gi,3,4,null,null,ai),f(6,yi,3,3,"li",12),p()()),o&2){let e=s();F("opacity-0",e.hiding()),l(2),g(e.filter()?2:-1),l(),d("id",e.id()+"-listbox"),l(),M(e.options()),l(2),g(e.filterText()&&!e.listItems().length?6:-1)}}var bi=0,_i=new Set(["Enter","ArrowDown","ArrowUp","Home","End"]),hi=_e("inline-flex overflow-hidden grow cursor-pointer min-h-9 items-center select-none px-1 hover:border-brand-700 hover:z-2 focus-visible:border-brand-700 focus-visible:outline focus:z-2",{variants:{opened:{true:"border-brand-700 outline z-2",false:"border-gray-700"},rounded:{true:"rounded-xs"},iconOnly:{true:"min-w-9 justify-center hover:bg-gray-800 outline-brand-700",false:"border outline-brand-700"}}}),L=class L extends ${constructor(){super(...arguments);this.elementRef=m(xe);this.overlayOrigin=m(ve);this.formField=m(Me,{optional:!0});this.injector=m(Y);this.overlay=mt.required("overlay");this.listItems=De("option");this.uniqueId=(bi++).toString();this.id=u(`lab-select-${this.uniqueId}`);this.value=P();this.options=u.required();this.disabled=P(!1);this.placeholder=u();this.rounded=u(!0);this.type=u();this.filter=u(!1);this.iconOnly=u(!1);this.iconLocator=u(e=>e);this.hostClass=x(()=>hi({opened:this.opened()&&!this.hiding(),rounded:this.rounded(),iconOnly:this.iconOnly()}));this.opened=T(!1);this.selectedOption=x(()=>this.options()?.find(e=>e.value===this.value()));this.faChevronDown=Tt;this.faMagnifyingGlass=ke;this.hiding=T(!1);this.filterText=T("");this.filterLower=x(()=>this.filterText().toLowerCase())}toggle(e){this.disabled()||e instanceof KeyboardEvent&&!_i.has(e.key)||(this.opened()?(this.hiding.set(!0),this.overlay().nativeElement.addEventListener("transitionend",()=>{this.opened.set(!1),this.hiding.set(!1)})):(this.opened.set(!0),this.filterText.set(""),this.focusAfterOpen(e)),e?.preventDefault())}select(e){this.toggle(),this.setValue(e)}focusFirst(e){let t=this.listItems()[0]?.nativeElement;t!=null&&(t.focus(),e.preventDefault())}focusLast(e){let t=this.listItems(),i=t[t.length-1]?.nativeElement;i!=null&&(i.focus(),e.preventDefault())}focusMove(e,t,i){let r=this.listItems().findIndex(k=>k.nativeElement===e),a=this.listItems()[r+t]?.nativeElement;a!=null&&(a.focus(),i.preventDefault())}focusAfterOpen(e){let t=this.options(),i=t.findIndex(r=>r.value===this.value());if(e instanceof KeyboardEvent)switch(e.key){case"ArrowUp":i>0&&i--;break;case"ArrowDown":i!==-1&&i<t.length-1&&i++;break;case"Home":i=0;break;case"End":i=t.length-1;break}i!==-1&&J(()=>{let r=this.listItems().at(i)?.nativeElement;r!=null&&(r.scrollIntoView(),r.focus())},{injector:this.injector})}};L.\u0275fac=(()=>{let e;return function(i){return(e||(e=Q(L)))(i||L)}})(),L.\u0275cmp=D({type:L,selectors:[["lab-select"]],viewQuery:function(t,i){t&1&&(ge(i.overlay,oi,5),ge(i.listItems,ri,5)),t&2&&Z(2)},hostAttrs:["role","combobox"],hostVars:8,hostBindings:function(t,i){t&1&&C("keydown",function(a){return i.toggle(a)})("click",function(){return i.toggle()}),t&2&&(R("id",i.id())("tabindex",i.disabled()?-1:0)("aria-disabled",i.disabled()?"true":null)("aria-controls",i.opened()?i.id()+"-listbox":null)("aria-expanded",i.opened())("aria-labelledby",(i.formField==null?null:i.formField.labelId)??null),B(i.hostClass()))},inputs:{id:[1,"id"],value:[1,"value"],options:[1,"options"],disabled:[1,"disabled"],placeholder:[1,"placeholder"],rounded:[1,"rounded"],type:[1,"type"],filter:[1,"filter"],iconOnly:[1,"iconOnly"],iconLocator:[1,"iconLocator"]},outputs:{value:"valueChange",disabled:"disabledChange"},features:[Te([{provide:Ie,multi:!0,useExisting:L},{provide:K,useExisting:L}]),ot([ve]),U],decls:6,vars:7,consts:[["overlay",""],["option",""],[3,"value","type"],[1,"absolute","text-gray-500","transition-transform",3,"-scale-y-100","icon"],["cdkConnectedOverlay","",3,"overlayOutsideClick","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayMinWidth"],[1,"absolute","text-gray-500","transition-transform",3,"icon"],[1,"ms-1","me-2","line-clamp-1","grow"],[1,"text-gray-500"],[1,"text-gray-500","transition-transform",3,"icon"],[1,"mt-1","flex","max-h-96","min-w-full","origin-top","flex-col","overflow-hidden","rounded-xs","border","border-gray-700","bg-gray-950","transition-all","starting:scale-y-75","starting:opacity-0"],[1,"relative","m-2","flex"],["role","listbox","tabindex","-1",1,"overflow-y-scroll",3,"id"],[1,"flex","min-h-9","items-center","px-2"],[1,"input",3,"ngModelChange","placeholder","ngModel"],[1,"pointer-events-none","absolute","top-1.5","right-1.5","text-gray-500",3,"icon"],["role","option","labTooltipPosition","adjacent",1,"flex","min-h-9","cursor-pointer","items-center","px-1","outline-none","select-none",3,"class","labTooltip"],["role","option","labTooltipPosition","adjacent",1,"flex","min-h-9","cursor-pointer","items-center","px-1","outline-none","select-none",3,"click","keydown.enter","keydown.arrowup","keydown.arrowdown","keydown.home","keydown.end","labTooltip"],[1,"ms-1"]],template:function(t,i){if(t&1){let r=O();ye(0)(1),f(2,li,1,2,"lab-icon",2)(3,si,1,3,"fa-icon",3),f(4,pi,4,4),rt(5,vi,7,5,"ng-template",4),C("overlayOutsideClick",function(){return _(r),h(i.toggle())})}if(t&2){let r=ee(i.type());l();let a=ee(i.selectedOption());l(),g(r&&a?2:i.iconOnly()?3:-1),l(2),g(i.iconOnly()?-1:4),l(),d("cdkConnectedOverlayOrigin",i.overlayOrigin)("cdkConnectedOverlayOpen",i.opened())("cdkConnectedOverlayMinWidth",i.elementRef.nativeElement.offsetWidth)}},dependencies:[le,oe,re,ae,Xe,$e,H,ne,me,E],encapsulation:2,changeDetection:0});var Fe=L;var Ci=["tab"],xi=(o,n)=>n.value;function Ti(o,n){if(o&1){let e=O();c(0,"button",8),C("click",function(){_(e);let i=s(),r=V(2);return h(i.scrollNext(r,-1))}),p()}if(o&2){let e=s();d("faIcon",e.faAngleLeft)}}function wi(o,n){if(o&1&&y(0,"fa-icon",10),o&2){let e=s().$implicit;d("icon",e.faIcon)}}function Di(o,n){if(o&1&&y(0,"lab-icon",11),o&2){let e=s().$implicit;d("type",n)("value",e.icon??e.value)}}function Si(o,n){if(o&1){let e=O();c(0,"a",9,1),C("isActiveChange",function(i){let r=_(e).$implicit,a=s();return h(i?a.value.set(r.value):null)})("click",function(){let i=_(e).$implicit,r=s();return h(r.value.set(i.value))}),f(2,wi,1,1,"fa-icon",10),f(3,Di,1,2,"lab-icon",11),c(4,"span",12),w(5),v(6,"translate"),p()()}if(o&2){let e,t=n.$implicit,i=s(),r=V(2);B(t.value===i.value()?"text-brand-500 group-focus-visible:outline-brand-500 -outline-offset-1 group-focus-visible:outline":"hover:text-brand-500"),d("routerLink",t.routerLink)("title",r.scrollWidth+" "+r.clientWidth),l(2),g(t.faIcon?2:-1),l(),g((e=i.type())?3:-1,e),l(),F("hidden",!!i.type()),l(),S(b(6,9,t.label))}}function ki(o,n){if(o&1){let e=O();c(0,"button",13),C("click",function(){_(e);let i=s(),r=V(2);return h(i.scrollNext(r,1))}),p()}if(o&2){let e=s();d("faIcon",e.faAngleRight)}}var Oi=0,G=class G extends ${constructor(){super(...arguments);this.ref=m(gt);this.injector=m(Y);this.tabElements=De("tab");this.uniqueId=(Oi++).toString();this.id=u(`lab-tabs-${this.uniqueId}`);this.value=P();this.tabs=u.required();this.disabled=P(!1);this.type=u();this.faAngleLeft=ht;this.faAngleRight=Ct;this.indicatorStyle=x(()=>{let t=this.tabs().findIndex(r=>r.value===this.value()),i=this.tabElements()[t]?.nativeElement;if(i!=null)return()=>({left:`${i.offsetLeft}px`,width:`${i.offsetWidth}px`})})}scrollNext(e,t){e.scrollLeft+=e.offsetWidth*.8*t}onScrollEnd(){J(()=>{this.ref.markForCheck()},{injector:this.injector})}ngAfterViewInit(){this.ref.markForCheck()}onKeydown(e){switch(e.key){case"ArrowLeft":this.focusMove(-1,e);break;case"ArrowRight":this.focusMove(1,e);break;case"Home":this.focusFirst(e);break;case"End":this.focusLast(e);break}}focusFirst(e){let t=this.tabElements()[0]?.nativeElement;t!=null&&(t.click(),t.scrollIntoView({block:"nearest"}),e.preventDefault())}focusLast(e){let t=this.tabElements(),i=t[t.length-1]?.nativeElement;i!=null&&(i.click(),i.scrollIntoView({block:"nearest"}),e.preventDefault())}focusMove(e,t){let i=this.tabs().findIndex(a=>a.value===this.value()),r=this.tabElements()[i+e]?.nativeElement;r!=null&&(r.click(),r.scrollIntoView({block:"nearest"}),t.preventDefault())}};G.\u0275fac=(()=>{let e;return function(i){return(e||(e=Q(G)))(i||G)}})(),G.\u0275cmp=D({type:G,selectors:[["lab-tabs"]],viewQuery:function(t,i){t&1&&ge(i.tabElements,Ci,5),t&2&&Z()},hostAttrs:["role","tablist",1,"flex","items-center","relative","group","overflow-hidden","outline-none","shrink-0"],hostVars:2,hostBindings:function(t,i){t&1&&C("keydown",function(a){return i.onKeydown(a)}),t&2&&R("tabindex",i.disabled()?-1:0)("aria-disabled",!!i.disabled())},inputs:{id:[1,"id"],value:[1,"value"],tabs:[1,"tabs"],disabled:[1,"disabled"],type:[1,"type"]},outputs:{value:"valueChange",disabled:"disabledChange"},features:[U],decls:8,vars:4,consts:[["scroll",""],["tab",""],["type","button","labButton","","tabindex","-1","aria-hidden","true",1,"absolute","left-0","z-1","h-full","rounded-l-none","bg-gray-950","shadow-sm","shadow-gray-700",3,"faIcon"],[1,"relative","inline-flex","grow","overflow-hidden","scroll-smooth",3,"scrollend"],["role","tab","aria-hidden","true","routerLinkActive","","queryParamsHandling","preserve",1,"flex","cursor-pointer","items-center","gap-2","border-b-2","border-gray-700","px-3","py-2",3,"routerLink","title","class"],[1,"grow","border-b-2","border-gray-700"],[1,"bg-brand-500","absolute","bottom-0","h-0.5","transition-all","duration-300"],["type","button","labButton","","tabindex","-1","aria-hidden","true",1,"absolute","right-0","z-1","h-full","rounded-r-none","bg-gray-950","shadow-sm","shadow-gray-700",3,"faIcon"],["type","button","labButton","","tabindex","-1","aria-hidden","true",1,"absolute","left-0","z-1","h-full","rounded-l-none","bg-gray-950","shadow-sm","shadow-gray-700",3,"click","faIcon"],["role","tab","aria-hidden","true","routerLinkActive","","queryParamsHandling","preserve",1,"flex","cursor-pointer","items-center","gap-2","border-b-2","border-gray-700","px-3","py-2",3,"isActiveChange","click","routerLink","title"],[3,"icon"],[3,"type","value"],[1,"font-semibold","lg:line-clamp-1"],["type","button","labButton","","tabindex","-1","aria-hidden","true",1,"absolute","right-0","z-1","h-full","rounded-r-none","bg-gray-950","shadow-sm","shadow-gray-700",3,"click","faIcon"]],template:function(t,i){if(t&1){let r=O();f(0,Ti,1,1,"button",2),c(1,"div",3,0),C("scrollend",function(){return _(r),h(i.onScrollEnd())}),I(3,Si,7,11,"a",4,xi),y(5,"span",5)(6,"div",6),p(),f(7,ki,1,1,"button",7)}if(t&2){let r,a=V(2);g(a.scrollWidth>a.clientWidth+4&&a.scrollLeft!==0?0:-1),l(3),M(i.tabs()),l(3),ut((r=i.indicatorStyle())==null?null:r()),l(),g(a.scrollWidth>a.clientWidth+4&&a.scrollLeft<=a.scrollWidth-a.clientWidth-2?7:-1)}},dependencies:[vt,bt,H,Oe,ne,E],encapsulation:2,changeDetection:0});var Ae=G;function Ii(o,n){if(o&1){let e=O();c(0,"button",9),C("click",function(){_(e);let i=s();return h(i.filter.set(""))}),p()}if(o&2){let e=s();d("faIcon",e.faXmark)}}function Mi(o,n){if(o&1&&y(0,"fa-icon",4),o&2){let e=s();d("icon",e.faMagnifyingGlass)}}function Ei(o,n){if(o&1){let e=O();c(0,"lab-select",10),v(1,"translate"),W("ngModelChange",function(i){_(e);let r=s();return q(r.quality,i)||(r.quality=i),h(i)}),p()}if(o&2){let e=s();d("options",e.qualityOptions),j("ngModel",e.quality),d("iconLocator",e.qualityIconLocator),R("aria-label",b(1,4,"picker.qualityFilter"))}}function Ni(o,n){if(o&1){let e=O();c(0,"button",12),C("click",function(){let i=_(e).$implicit,r=s(2);return h(r.selectId(i))}),p()}if(o&2){let e=n.$implicit,t=s(2);d("iconType",t.dialogData.type)("icon",e)("border",e===t.selection)("color",e===t.selection?"brand":"gray")("labTooltip",e)("labTooltipType",t.dialogData.type),R("aria-label",t.data()[t.recordKey][e].name)}}function Ri(o,n){if(o&1&&(c(0,"div",8),I(1,Ni,1,7,"button",11,Ve),p()),o&2){let e=n.$implicit;l(),M(e)}}var fe=class fe{constructor(){this.settingsStore=m(ie);this.dialogData=m(St);this.dialogRef=m(Dt);this.data=this.settingsStore.dataset;this.defaults=this.settingsStore.defaults;this.faMagnifyingGlass=ke;this.faXmark=xt;this.qualityOptions=Ot;this.qualityIconLocator=n=>`q${n}`;this.isMultiselect=!1;this.filter=T("");this.quality=T(0);this.allSelected=T(!1);this.rowsKey=`${this.dialogData.type}CategoryRows`;this.recordKey=`${this.dialogData.type}Record`;this.allSelectItems=[];this.allCategoryRows={};this.categoryRows=x(()=>{let n=this.filter(),e=this.quality();if(!n&&e===-1)return this.allCategoryRows;let t=Array.from(this.dialogData.allIds);if(e!==-1){let a=e===0?void 0:e;t=t.filter(k=>this.data()[this.recordKey][k].quality===a)}if(n){let a=n.toLocaleLowerCase();t=t.filter(k=>this.data()[this.recordKey][k].name.toLocaleLowerCase().includes(a))}let i={},r=Object.keys(this.allCategoryRows);for(let a of r){let k=[];for(let Pt of this.allCategoryRows[a]){let Ye=Pt.filter(Lt=>t.includes(Lt));Ye.length&&k.push(Ye)}k.length&&(i[a]=k)}return i});this.categoryTabs=x(()=>Object.keys(this.categoryRows()).map(n=>({label:this.data().categoryRecord[n].name,value:n})));this.selectedCategory=we({source:this.categoryRows,computation:(n,e)=>{let t=Object.keys(n);return e&&t.includes(e.value)?e.value:t[0]}});let{selection:n,allIds:e}=Ke({},this.dialogData);e=Array.from(e),n instanceof Set&&(n=Array.from(n)),Array.isArray(n)?(this.isMultiselect=!0,this.selection=[...n]):(this.isMultiselect=!1,this.selection=n);let t=this.data();t.categoryIds.forEach(i=>{t[this.rowsKey][i]&&(this.allCategoryRows[i]=[],t[this.rowsKey][i].forEach(r=>{let a=r.filter(k=>e.includes(k));a.length&&this.allCategoryRows[i].push(a)}))}),this.allSelectItems=Array.from(e).map(i=>({label:t[this.recordKey][i].name,value:i})),Array.isArray(n)?this.allSelected.set(n.length===0):n!=null&&this.selectedCategory.set(t[this.recordKey][n].category)}selectId(n){Array.isArray(this.selection)||this.dialogRef.close(n)}};fe.\u0275fac=function(e){return new(e||fe)},fe.\u0275cmp=D({type:fe,selectors:[["lab-picker-dialog"]],hostAttrs:[1,"flex","flex-col","gap-2","lg:w-3xl","p-2","pt-0","max-h-[50rem]","h-[90dvh]","sm:h-[80dvh]"],decls:11,vars:8,consts:[[1,"flex","gap-2"],[1,"relative","flex","grow","basis-2/3"],[1,"input","pe-9",3,"ngModelChange","placeholder","ngModel"],["type","button","aria-hidden","true","labButton","",1,"absolute","right-0",3,"faIcon"],[1,"pointer-events-none","absolute","top-2.5","right-2","text-gray-500",3,"icon"],["type","system",1,"basis-1/3",3,"options","ngModel","iconLocator"],["type","category",3,"valueChange","value","tabs"],[1,"flex","flex-col","overflow-y-auto"],[1,"flex","flex-wrap"],["type","button","aria-hidden","true","labButton","",1,"absolute","right-0",3,"click","faIcon"],["type","system",1,"basis-1/3",3,"ngModelChange","options","ngModel","iconLocator"],["type","button","labButton","",3,"iconType","icon","border","color","labTooltip","labTooltipType"],["type","button","labButton","",3,"click","iconType","icon","border","color","labTooltip","labTooltipType"]],template:function(e,t){e&1&&(c(0,"div",0)(1,"div",1)(2,"input",2),v(3,"translate"),W("ngModelChange",function(r){return q(t.filter,r)||(t.filter=r),r}),p(),f(4,Ii,1,1,"button",3)(5,Mi,1,1,"fa-icon",4),p(),f(6,Ei,2,6,"lab-select",5),p(),c(7,"lab-tabs",6),W("valueChange",function(r){return q(t.selectedCategory,r)||(t.selectedCategory=r),r}),p(),c(8,"div",7),I(9,Ri,3,0,"div",8,Ve),p()),e&2&&(l(2),d("placeholder",b(3,6,"filter")),j("ngModel",t.filter),l(2),g(t.filter()?4:5),l(2),g(t.data().flags.has("quality")?6:-1),l(),j("value",t.selectedCategory),d("tabs",t.categoryTabs()),l(2),M(t.categoryRows()[t.selectedCategory()]))},dependencies:[le,oe,re,ae,H,Oe,Fe,Ae,me,E],encapsulation:2,changeDetection:0});var he=fe;var z=class z{constructor(){this.dialog=m(kt);this.settingsStore=m(ie)}pickItem(n,e){return e??=this.settingsStore.settings().availableItemIds,this.dialog.open(he,{data:{header:"picker.selectItem",type:"item",allIds:e,selection:n}}).closed.pipe(be())}pickRecipe(n,e){return e??=this.settingsStore.settings().availableRecipeIds,this.dialog.open(he,{data:{header:"picker.selectRecipe",type:"recipe",allIds:e,selection:n}}).closed.pipe(be())}};z.\u0275fac=function(e){return new(e||z)},z.\u0275prov=et({token:z,factory:z.\u0275fac,providedIn:"root"});var Pe=z;var At=class{constructor(){this.picker=m(Pe);this.value=T(te(1));this.unit=T(0);this.type=T(0);this.isRecipe=x(()=>this.unit()===3)}openPicker(){(this.isRecipe()?this.picker.pickRecipe():this.picker.pickItem()).subscribe(e=>{this.addObjective({targetId:e,value:this.value(),unit:this.unit(),type:this.type()})})}};var vr=[{value:"captain-of-industry",label:"options.game.captainOfIndustry"},{value:"dyson-sphere-program",label:"options.game.dysonSphereProgram"},{value:"factor-y",label:"options.game.factorY"},{value:"factorio",label:"options.game.factorio"},{value:"final-factory",label:"options.game.finalFactory"},{value:"foundry",label:"options.game.foundry"},{value:"mindustry",label:"options.game.mindustry"},{value:"outworld-station",label:"options.game.outworldStation"},{value:"satisfactory",label:"options.game.satisfactory"},{value:"techtonica",label:"options.game.techtonica"}];export{Me as a,Et as b,me as c,Fe as d,Ae as e,Pe as f,At as g,vr as h};
