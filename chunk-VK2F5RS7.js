import{B as li,e as Zt,f as Jt,i as ri,r as mt,s as gt,t as _t,u as Ie,v as yt,w as vt,y as ai,z as si}from"./chunk-IEMB37JG.js";import{A as oi,U as J,V as pe,a as ht,aa as Te,e as Qt,ea as k,fa as Oe,j as qe,ka as di,n as $e,o as ei,pa as fe,q as ti,qa as he,ra as ze,v as ii,y as ni,za as ci}from"./chunk-YTYYFNSG.js";import{$ as st,$a as A,$b as K,Ab as g,B as Ot,Bb as Gt,Bc as Kt,Cb as Ht,G as Nt,Gb as I,Hb as Ut,I as kt,Ib as _,Jb as l,Kb as Wt,Lb as qt,Oa as Pt,Qb as $t,Ra as s,Rb as Se,Sb as ce,Tb as X,Va as dt,Vb as N,Wa as S,Wb as zt,Xb as Y,Yb as w,Z as Ee,Zb as E,_ as at,_b as ft,ab as ct,ac as Q,ba as L,bb as G,bc as Z,cc as Fe,da as f,db as F,dc as ue,eb as jt,ec as P,f as Be,fb as Lt,fc as U,hb as Ge,hc as y,ia as D,ic as v,ja as V,jb as oe,k as St,ka as z,l as Ft,lb as Bt,ma as lt,mc as re,nc as b,pc as He,q as Ae,qa as C,qb as R,rb as h,rc as p,sb as m,sc as Xt,ta as Rt,tb as ut,tc as Ue,ua as B,ub as pt,uc as Yt,vb as T,vc as W,w as It,wa as ne,wb as O,x as Tt,xb as d,xc as We,yb as c,zb as u}from"./chunk-OPOL2C2X.js";import{a as x,b as j}from"./chunk-HZ6M6AS2.js";var yi=(()=>{class i{_renderer;_elementRef;onChange=e=>{};onTouched=()=>{};constructor(e,n){this._renderer=e,this._elementRef=n}setProperty(e,n){this._renderer.setProperty(this._elementRef.nativeElement,e,n)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static \u0275fac=function(n){return new(n||i)(S(dt),S(ne))};static \u0275dir=G({type:i})}return i})(),wt=(()=>{class i extends yi{static \u0275fac=(()=>{let e;return function(o){return(e||(e=B(i)))(o||i)}})();static \u0275dir=G({type:i,features:[F]})}return i})(),ee=new L(""),Ni={provide:ee,useExisting:Ee(()=>ki),multi:!0},ki=(()=>{class i extends wt{writeValue(e){this.setProperty("checked",e)}static \u0275fac=(()=>{let e;return function(o){return(e||(e=B(i)))(o||i)}})();static \u0275dir=G({type:i,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(n,o){n&1&&_("change",function(a){return o.onChange(a.target.checked)})("blur",function(){return o.onTouched()})},standalone:!1,features:[U([Ni]),F]})}return i})(),Ri={provide:ee,useExisting:Ee(()=>te),multi:!0};function Pi(){let i=ht()?ht().getUserAgent():"";return/android (\d+)/.test(i.toLowerCase())}var ji=new L(""),te=(()=>{class i extends yi{_compositionMode;_composing=!1;constructor(e,n,o){super(e,n),this._compositionMode=o,this._compositionMode==null&&(this._compositionMode=!Pi())}writeValue(e){let n=e??"";this.setProperty("value",n)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static \u0275fac=function(n){return new(n||i)(S(dt),S(ne),S(ji,8))};static \u0275dir=G({type:i,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(n,o){n&1&&_("input",function(a){return o._handleInput(a.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(a){return o._compositionEnd(a.target.value)})},standalone:!1,features:[U([Ri]),F]})}return i})();var Mt=new L(""),Li=new L("");function vi(i){return i!=null}function bi(i){return Bt(i)?St(i):i}function Ci(i){let t={};return i.forEach(e=>{t=e!=null?x(x({},t),e):t}),Object.keys(t).length===0?null:t}function Di(i,t){return t.map(e=>e(i))}function Bi(i){return!i.validate}function Vi(i){return i.map(t=>Bi(t)?t:e=>t.validate(e))}function Gi(i){if(!i)return null;let t=i.filter(vi);return t.length==0?null:function(e){return Ci(Di(e,t))}}function wi(i){return i!=null?Gi(Vi(i)):null}function Hi(i){if(!i)return null;let t=i.filter(vi);return t.length==0?null:function(e){let n=Di(e,t).map(bi);return It(n).pipe(Ae(Ci))}}function Mi(i){return i!=null?Hi(Vi(i)):null}function ui(i,t){return i===null?[t]:Array.isArray(i)?[...i,t]:[i,t]}function Ui(i){return i._rawValidators}function Wi(i){return i._rawAsyncValidators}function bt(i){return i?Array.isArray(i)?i:[i]:[]}function Ye(i,t){return Array.isArray(i)?i.includes(t):i===t}function pi(i,t){let e=bt(t);return bt(i).forEach(o=>{Ye(e,o)||e.push(o)}),e}function fi(i,t){return bt(t).filter(e=>!Ye(i,e))}var Ke=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=wi(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=Mi(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,e){return this.control?this.control.hasError(t,e):!1}getError(t,e){return this.control?this.control.getError(t,e):null}},Ct=class extends Ke{name;get formDirective(){return null}get path(){return null}},je=class extends Ke{_parent=null;name=null;valueAccessor=null},Dt=class{_cd;constructor(t){this._cd=t}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},qi={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Ao=j(x({},qi),{"[class.ng-submitted]":"isSubmitted"}),ye=(()=>{class i extends Dt{constructor(e){super(e)}static \u0275fac=function(n){return new(n||i)(S(je,2))};static \u0275dir=G({type:i,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(n,o){n&2&&N("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},standalone:!1,features:[F]})}return i})();var Ne="VALID",Xe="INVALID",me="PENDING",ke="DISABLED",_e=class{},Qe=class extends _e{value;source;constructor(t,e){super(),this.value=t,this.source=e}},Re=class extends _e{pristine;source;constructor(t,e){super(),this.pristine=t,this.source=e}},Pe=class extends _e{touched;source;constructor(t,e){super(),this.touched=t,this.source=e}},ge=class extends _e{status;source;constructor(t,e){super(),this.status=t,this.source=e}};function $i(i){return(Ze(i)?i.validators:i)||null}function zi(i){return Array.isArray(i)?wi(i):i||null}function Xi(i,t){return(Ze(t)?t.asyncValidators:i)||null}function Yi(i){return Array.isArray(i)?Mi(i):i||null}function Ze(i){return i!=null&&!Array.isArray(i)&&typeof i=="object"}var Vt=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(t,e){this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get status(){return re(this.statusReactive)}set status(t){re(()=>this.statusReactive.set(t))}_status=b(()=>this.statusReactive());statusReactive=C(void 0);get valid(){return this.status===Ne}get invalid(){return this.status===Xe}get pending(){return this.status==me}get disabled(){return this.status===ke}get enabled(){return this.status!==ke}errors;get pristine(){return re(this.pristineReactive)}set pristine(t){re(()=>this.pristineReactive.set(t))}_pristine=b(()=>this.pristineReactive());pristineReactive=C(!0);get dirty(){return!this.pristine}get touched(){return re(this.touchedReactive)}set touched(t){re(()=>this.touchedReactive.set(t))}_touched=b(()=>this.touchedReactive());touchedReactive=C(!1);get untouched(){return!this.touched}_events=new Be;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(pi(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(pi(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(fi(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(fi(t,this._rawAsyncValidators))}hasValidator(t){return Ye(this._rawValidators,t)}hasAsyncValidator(t){return Ye(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){let e=this.touched===!1;this.touched=!0;let n=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsTouched(j(x({},t),{sourceControl:n})),e&&t.emitEvent!==!1&&this._events.next(new Pe(!0,n))}markAllAsDirty(t={}){this.markAsDirty({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsDirty(t))}markAllAsTouched(t={}){this.markAsTouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsTouched(t))}markAsUntouched(t={}){let e=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let n=t.sourceControl??this;this._forEachChild(o=>{o.markAsUntouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:n})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,n),e&&t.emitEvent!==!1&&this._events.next(new Pe(!1,n))}markAsDirty(t={}){let e=this.pristine===!0;this.pristine=!1;let n=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsDirty(j(x({},t),{sourceControl:n})),e&&t.emitEvent!==!1&&this._events.next(new Re(!1,n))}markAsPristine(t={}){let e=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let n=t.sourceControl??this;this._forEachChild(o=>{o.markAsPristine({onlySelf:!0,emitEvent:t.emitEvent})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t,n),e&&t.emitEvent!==!1&&this._events.next(new Re(!0,n))}markAsPending(t={}){this.status=me;let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new ge(this.status,e)),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.markAsPending(j(x({},t),{sourceControl:e}))}disable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=ke,this.errors=null,this._forEachChild(o=>{o.disable(j(x({},t),{onlySelf:!0}))}),this._updateValue();let n=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Qe(this.value,n)),this._events.next(new ge(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(j(x({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(o=>o(!0))}enable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=Ne,this._forEachChild(n=>{n.enable(j(x({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(j(x({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(n=>n(!1))}_updateAncestors(t,e){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine({},e),this._parent._updateTouched({},e))}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let n=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ne||this.status===me)&&this._runAsyncValidator(n,t.emitEvent)}let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Qe(this.value,e)),this._events.next(new ge(this.status,e)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(j(x({},t),{sourceControl:e}))}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ke:Ne}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t,e){if(this.asyncValidator){this.status=me,this._hasOwnPendingAsyncValidator={emitEvent:e!==!1,shouldHaveEmitted:t!==!1};let n=bi(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(o=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(o,{emitEvent:e,shouldHaveEmitted:t})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let t=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,t}return!1}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(e.emitEvent!==!1,this,e.shouldHaveEmitted)}get(t){let e=t;return e==null||(Array.isArray(e)||(e=e.split(".")),e.length===0)?null:e.reduce((n,o)=>n&&n._find(o),this)}getError(t,e){let n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t,e,n){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),(t||n)&&this._events.next(new ge(this.status,e)),this._parent&&this._parent._updateControlsErrors(t,e,n)}_initObservables(){this.valueChanges=new Ge,this.statusChanges=new Ge}_calculateStatus(){return this._allControlsDisabled()?ke:this.errors?Xe:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(me)?me:this._anyControlsHaveStatus(Xe)?Xe:Ne}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t,e){let n=!this._anyControlsDirty(),o=this.pristine!==n;this.pristine=n,this._parent&&!t.onlySelf&&this._parent._updatePristine(t,e),o&&this._events.next(new Re(this.pristine,e))}_updateTouched(t={},e){this.touched=this._anyControlsTouched(),this._events.next(new Pe(this.touched,e)),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,e)}_onDisabledChange=[];_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Ze(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let e=this._parent&&this._parent.dirty;return!t&&!!e&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=zi(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=Yi(this._rawAsyncValidators)}};var xi=new L("",{providedIn:"root",factory:()=>xt}),xt="always";function Ki(i,t){return[...t.path,i]}function Qi(i,t,e=xt){Ji(i,t),t.valueAccessor.writeValue(i.value),(i.disabled||e==="always")&&t.valueAccessor.setDisabledState?.(i.disabled),en(i,t),nn(i,t),tn(i,t),Zi(i,t)}function hi(i,t){i.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function Zi(i,t){if(t.valueAccessor.setDisabledState){let e=n=>{t.valueAccessor.setDisabledState(n)};i.registerOnDisabledChange(e),t._registerOnDestroy(()=>{i._unregisterOnDisabledChange(e)})}}function Ji(i,t){let e=Ui(i);t.validator!==null?i.setValidators(ui(e,t.validator)):typeof e=="function"&&i.setValidators([e]);let n=Wi(i);t.asyncValidator!==null?i.setAsyncValidators(ui(n,t.asyncValidator)):typeof n=="function"&&i.setAsyncValidators([n]);let o=()=>i.updateValueAndValidity();hi(t._rawValidators,o),hi(t._rawAsyncValidators,o)}function en(i,t){t.valueAccessor.registerOnChange(e=>{i._pendingValue=e,i._pendingChange=!0,i._pendingDirty=!0,i.updateOn==="change"&&Ai(i,t)})}function tn(i,t){t.valueAccessor.registerOnTouched(()=>{i._pendingTouched=!0,i.updateOn==="blur"&&i._pendingChange&&Ai(i,t),i.updateOn!=="submit"&&i.markAsTouched()})}function Ai(i,t){i._pendingDirty&&i.markAsDirty(),i.setValue(i._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1}function nn(i,t){let e=(n,o)=>{t.valueAccessor.writeValue(n),o&&t.viewToModelUpdate(n)};i.registerOnChange(e),t._registerOnDestroy(()=>{i._unregisterOnChange(e)})}function on(i,t){if(!i.hasOwnProperty("model"))return!1;let e=i.model;return e.isFirstChange()?!0:!Object.is(t,e.currentValue)}function rn(i){return Object.getPrototypeOf(i.constructor)===wt}function an(i,t){if(!t)return null;Array.isArray(t);let e,n,o;return t.forEach(r=>{r.constructor===te?e=r:rn(r)?n=r:o=r}),o||n||e||null}function mi(i,t){let e=i.indexOf(t);e>-1&&i.splice(e,1)}function gi(i){return typeof i=="object"&&i!==null&&Object.keys(i).length===2&&"value"in i&&"disabled"in i}var sn=class extends Vt{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(t=null,e,n){super($i(e),Xi(n,e)),this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Ze(e)&&(e.nonNullable||e.initialValueIsDefault)&&(gi(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&e.emitModelToViewChange!==!1&&this._onChange.forEach(n=>n(this.value,e.emitViewToModelChange!==!1)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){mi(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){mi(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){gi(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var ln={provide:je,useExisting:Ee(()=>ae)},_i=Promise.resolve(),ae=(()=>{class i extends je{_changeDetectorRef;callSetDisabledState;control=new sn;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Ge;constructor(e,n,o,r,a,M){super(),this._changeDetectorRef=a,this.callSetDisabledState=M,this._parent=e,this._setValidators(n),this._setAsyncValidators(o),this.valueAccessor=an(this,r)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){let n=e.name.previousValue;this.formDirective.removeControl({name:n,path:this._getPath(n)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),on(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Qi(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(e){_i.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){let n=e.isDisabled.currentValue,o=n!==0&&Kt(n);_i.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?Ki(e,this._parent):[e]}static \u0275fac=function(n){return new(n||i)(S(Ct,9),S(Mt,10),S(Li,10),S(ee,10),S(We,8),S(xi,8))};static \u0275dir=G({type:i,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[U([ln]),F,Rt]})}return i})();var dn={provide:ee,useExisting:Ee(()=>cn),multi:!0},cn=(()=>{class i extends wt{writeValue(e){this.setProperty("value",parseFloat(e))}registerOnChange(e){this.onChange=n=>{e(n==""?null:parseFloat(n))}}static \u0275fac=(()=>{let e;return function(o){return(e||(e=B(i)))(o||i)}})();static \u0275dir=G({type:i,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(n,o){n&1&&_("change",function(a){return o.onChange(a.target.value)})("input",function(a){return o.onChange(a.target.value)})("blur",function(){return o.onTouched()})},standalone:!1,features:[U([dn]),F]})}return i})();var un=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275mod=ct({type:i});static \u0275inj=st({})}return i})();var ve=(()=>{class i{static withConfig(e){return{ngModule:i,providers:[{provide:xi,useValue:e.callSetDisabledState??xt}]}}static \u0275fac=function(n){return new(n||i)};static \u0275mod=ct({type:i});static \u0275inj=st({imports:[un]})}return i})();var se=new L("LAB_CONTROL"),ie=class{constructor(){this.touched=C(!1)}setValue(t){this.markAsTouched(),t!==this.value()&&(this.writeValue(t),this.onFormChange?.(t))}markAsTouched(){this.touched()||(this.touched.set(!0),this.onFormTouched?.())}writeValue(t){this.value.set(t)}registerOnChange(t){this.onFormChange=t}registerOnTouched(t){this.onFormTouched=t}setDisabledState(t){this.disabled.set(t)}};var pn=["*"],fn=0,be=class be{constructor(){this.control=Yt.required(se);this.uniqueId=(fn++).toString();this.labelId=`lab-form-field-label-${this.uniqueId}`;this.id=p(`lab-form-field-${this.uniqueId}`);this.label=p.required()}};be.\u0275fac=function(e){return new(e||be)},be.\u0275cmp=A({type:be,selectors:[["lab-form-field"]],contentQueries:function(e,n,o){e&1&&$t(o,n.control,se,5),e&2&&ce()},hostAttrs:[1,"inline-flex","flex-col"],hostVars:1,hostBindings:function(e,n){e&2&&R("id",n.id())},inputs:{id:[1,"id"],label:[1,"label"]},ngContentSelectors:pn,decls:4,vars:5,consts:[[1,"mx-1","text-sm","text-gray-300",3,"id","for"]],template:function(e,n){e&1&&(Wt(),Gt(0,"label",0),w(1),y(2,"translate"),Ht(),qt(3)),e&2&&(Ut("id",n.labelId)("htmlFor",n.control().id()),s(),E(v(2,3,n.label())))},dependencies:[k],encapsulation:2,changeDetection:0});var Je=be;var hn=0,H=class H extends ie{constructor(){super(...arguments);this.uniqueId=(hn++).toString();this.id=p(`lab-input-number-${this.uniqueId}`);this.value=W();this.disabled=W(!1);this.minimum=p(pe.zero);this.maximum=p(void 0);this.integer=p(!1);this.rounded=p(!0);this.value$=new Be;this.emit$=this.value$.pipe(qe(),Nt(e=>e.type==="input"?Tt(300):Ft({})),Ae(e=>e.value),Te(),Ae(e=>this.integer()?e.round():e));this.text=He({source:this.value,computation:(e,n)=>e==null?"0":n!=null&&pe(n.value).eq(e)?n.value:e.toString()})}ngOnInit(){this.emit$.subscribe(e=>{this.setValue(e)})}validate(e){let n=e.value;if(n==null)return null;try{let o=this.minimum(),r=this.maximum();if((o==null||n.gte(o))&&(r==null||n.lte(r)))return null}catch{}return{rational:{valid:!1}}}onChange(e){try{let n=this.text(),o=pe(n);this.value$.next({type:e.type,value:o}),o&&e.type==="keydown"&&this.text.set(o.toString())}catch{}}};H.\u0275fac=(()=>{let e;return function(o){return(e||(e=B(H)))(o||H)}})(),H.\u0275cmp=A({type:H,selectors:[["lab-input-number"]],hostAttrs:[1,"inline-flex","group"],inputs:{id:[1,"id"],value:[1,"value"],disabled:[1,"disabled"],minimum:[1,"minimum"],maximum:[1,"maximum"],integer:[1,"integer"],rounded:[1,"rounded"]},outputs:{value:"valueChange",disabled:"disabledChange"},features:[U([{provide:ee,useExisting:H,multi:!0},{provide:Mt,useExisting:H,multi:!0},{provide:se,useExisting:H}]),F],decls:1,vars:4,consts:[["type","text",1,"input","text-right","group-[.ng-invalid]:border-red-500","group-[.ng-invalid]:outline-red-500","focus:z-2",3,"ngModelChange","input","blur","keydown.enter","ngModel","disabled"]],template:function(n,o){n&1&&(c(0,"input",0),Z("ngModelChange",function(a){return Q(o.text,a)||(o.text=a),a}),_("input",function(a){return o.onChange(a)})("blur",function(a){return o.onChange(a)})("keydown.enter",function(a){return o.onChange(a)}),u()),n&2&&(N("rounded-none",!o.rounded()),K("ngModel",o.text),d("disabled",o.disabled()))},dependencies:[ve,te,ye,ae],encapsulation:2,changeDetection:0});var Ei=H;var et=new L("TOOLTIP_DATA");var Si=(i,t)=>t.key;function gn(i,t){if(i&1&&g(0,"lab-icon",2),i&2){let e=t.$implicit;d("value",e.key)("quantity",e.value)}}function _n(i,t){if(i&1&&g(0,"lab-icon",2),i&2){let e=t.$implicit;d("value",e.key)("quantity",e.value)}}function yn(i,t){if(i&1&&g(0,"lab-icon",7),i&2){let e=l().$implicit;d("value",e)}}function vn(i,t){if(i&1&&h(0,yn,1,1,"lab-icon",7),i&2){let e=t.$implicit,n=l(2);m(n.data().itemRecord[e].quality==null?0:-1)}}function bn(i,t){if(i&1&&(c(0,"div")(1,"div",6),w(2),y(3,"translate"),u(),c(4,"div"),T(5,vn,1,1,null,null,pt),u()()),i&2){l();let e=P(0);s(2),E(v(3,1,"data.producers")),s(3),O(e.producers)}}function Cn(i,t){if(i&1&&g(0,"lab-icon",8),i&2){let e=t.$implicit;d("value",e)}}function Dn(i,t){if(i&1&&(c(0,"div")(1,"div",6),w(2),y(3,"translate"),u(),c(4,"div"),T(5,Cn,1,1,"lab-icon",8,pt),u()()),i&2){l();let e=P(0);N("text-end",!e.flags.has("hideProducer")),s(2),E(v(3,3,"data.locations")),s(3),O(t)}}var De=class De{constructor(){this.settingsStore=f(fe);this.value=p.required();this.data=this.settingsStore.dataset;this.recipe=b(()=>this.data().recipeRecord[this.value()]);this.faArrowRightLong=ei}};De.\u0275fac=function(e){return new(e||De)},De.\u0275cmp=A({type:De,selectors:[["lab-recipe"]],hostAttrs:[1,"inline-flex","flex-col"],inputs:{value:[1,"value"]},decls:13,vars:9,consts:[[1,"flex","flex-wrap","items-center","justify-center"],["value","time","type","system",3,"quantity"],["type","item",3,"value","quantity"],[3,"icon"],[1,"flex","flex-wrap","justify-between","gap-2"],[3,"text-end"],[1,"mt-1","text-sm"],["type","item",3,"value"],["type","location",3,"value"]],template:function(e,n){if(e&1&&(Fe(0),c(1,"div",0),g(2,"lab-icon",1),T(3,gn,1,2,"lab-icon",2,Si),y(5,"keyvalue"),g(6,"fa-icon",3),T(7,_n,1,2,"lab-icon",2,Si),y(9,"keyvalue"),u(),c(10,"div",4),h(11,bn,7,3,"div"),h(12,Dn,7,5,"div",5),u()),e&2){let o,r=ue(n.recipe());s(2),d("quantity",r.time),s(),O(v(5,5,r.in)),s(3),d("icon",n.faArrowRightLong),s(),O(v(9,7,r.out)),s(4),m(r.flags.has("hideProducer")?-1:11),s(),m((o=r.locations)?12:-1,o)}},dependencies:[J,he,Qt,k],encapsulation:2,changeDetection:0});var tt=De;function Vn(i,t){if(i&1&&(c(0,"div"),w(1),u(),g(2,"lab-recipe",2)),i&2){let e=t;s(),E(e.name),s(),d("value",e.id)}}function wn(i,t){if(i&1&&h(0,Vn,3,2),i&2){let e,n=l();m((e=n.data().recipeRecord[n.tooltipData.value])?0:-1,e)}}function Mn(i,t){i&1&&g(0,"lab-recipe",2),i&2&&d("value",t)}function xn(i,t){if(i&1&&(c(0,"div"),w(1),u(),h(2,Mn,1,1,"lab-recipe",2)),i&2){let e,n=l(2);s(),E(t.name),s(),m((e=n.recipeId())?2:-1,e)}}function An(i,t){if(i&1&&h(0,xn,3,2),i&2){let e,n=l();m((e=n.data().itemRecord[n.tooltipData.value])?0:-1,e)}}function En(i,t){if(i&1&&(g(0,"span",0),y(1,"translate")),i&2){let e=l();d("innerHtml",v(1,1,e.tooltipData.value),Pt)}}function Sn(i,t){if(i&1&&(c(0,"div",1),w(1),y(2,"translate"),u()),i&2){let e=l();s(),E(v(2,1,e.tooltipData.action))}}var Fi={originX:{start:null,center:null,end:null},originY:{top:null,center:null,bottom:null},overlayX:{start:null,center:null,end:null},overlayY:{top:null,center:null,bottom:null}},Fn=Oe("bg-gray-950 border rounded-xs border-gray-700 py-[5px] px-2 animate-fade-in relative max-w-69",{variants:Fi,compoundVariants:[{originY:"bottom",overlayY:"top",class:"mt-1.5"},{originX:"end",overlayX:"start",class:"ml-1.5"},{originY:"top",overlayY:"bottom",class:"mb-1.5"},{originX:"start",overlayX:"end",class:"mr-1.5"}]}),In=Oe("absolute size-1.75 border-gray-700 bg-gray-950 m-auto border-t border-l",{variants:Fi,compoundVariants:[{originY:"bottom",overlayY:"top",class:"-top-1 rotate-45"},{originX:"end",overlayX:"start",class:"-left-1 rotate-315"},{originY:"top",overlayY:"bottom",class:"-bottom-1 rotate-225"},{originX:"start",overlayX:"end",class:"-right-1 rotate-135"},{originX:"start",originY:["top","bottom"],overlayX:"start",overlayY:["top","bottom"],class:"left-3"},{originX:"end",originY:["top","bottom"],overlayX:"end",overlayY:["top","bottom"],class:"right-3"},{originX:["start","end"],originY:"top",overlayX:["start","end"],overlayY:"top",class:"top-3"},{originX:["start","end"],originY:"bottom",overlayX:["start","end"],overlayY:"bottom",class:"bottom-3"}]}),Ve=class Ve{constructor(){this.destroyRef=f(lt);this.recipesStore=f(ci);this.tooltipData=f(et);this.data=this.recipesStore.adjustedDataset;this.position=C(this.tooltipData.defaultPosition);this.hostClass=b(()=>Fn(this.position()));this.nubClass=b(()=>In(this.position()));this.recipeId=b(()=>{let t=this.tooltipData.type;if(t!=="item"&&t!=="technology")return;let e=this.tooltipData.value,n=this.data(),r=n.itemRecipeIds[e].map(a=>n.adjustedRecipe[a]).filter(a=>!a.flags.has("recycling")&&a.quality==null&&a.produces.has(e));if(r.length===1)return r[0].id})}ngOnInit(){this.tooltipData.positionChanges.pipe(qe(this.destroyRef)).subscribe(t=>{this.position.set(t.connectionPair)})}};Ve.\u0275fac=function(e){return new(e||Ve)},Ve.\u0275cmp=A({type:Ve,selectors:[["lab-tooltip-overlay"]],hostVars:2,hostBindings:function(e,n){e&2&&Y(n.hostClass())},decls:5,vars:4,consts:[[3,"innerHtml"],[1,"text-sm","italic"],[3,"value"]],template:function(e,n){e&1&&(h(0,wn,1,1)(1,An,1,1)(2,En,2,3,"span",0),h(3,Sn,3,3,"div",1),g(4,"span")),e&2&&(m(n.tooltipData.type==="recipe"?0:n.tooltipData.type?1:2),s(3),m(n.tooltipData.action?3:-1),s(),Y(n.nubClass()))},dependencies:[tt,k],encapsulation:2,changeDetection:0});var it=Ve;var we=class we{constructor(){this.elementRef=f(ne);this.overlay=f(_t);this.injector=f(z);this.labTooltip=p();this.labTooltipType=p();this.labTooltipPosition=p("below");this.labTooltipAction=p();this.labTooltipAdjustedRecipe=p()}show(){let t=this.labTooltip();if(this.overlayRef||!t)return;let e=this.labTooltipPosition()==="adjacent"?gt:mt,n=this.overlay.position().flexibleConnectedTo(this.elementRef).withFlexibleDimensions(!1).withPositions(e),o={value:t,type:this.labTooltipType(),action:this.labTooltipAction(),adjustedRecipe:this.labTooltipAdjustedRecipe(),defaultPosition:e[0],positionChanges:n.positionChanges},r=z.create({parent:this.injector,providers:[{provide:et,useValue:o}]}),a=this.overlay.create({positionStrategy:n});a.outsidePointerEvents().pipe(Ot(M=>M.type==="click"),kt(1)).subscribe(()=>{this.hide()}),a.attach(new ri(it,void 0,r)),this.overlayRef=a,oe(()=>{a.updatePosition()},{injector:this.injector})}hide(){this.overlayRef&&(this.overlayRef.dispose(),delete this.overlayRef)}ngOnDestroy(){this.hide()}};we.\u0275fac=function(e){return new(e||we)},we.\u0275dir=G({type:we,selectors:[["","labTooltip",""]],hostBindings:function(e,n){e&1&&_("mouseover",function(){return n.show()})("touchstart",function(){return n.show()})("mouseout",function(){return n.hide()})},inputs:{labTooltip:[1,"labTooltip"],labTooltipType:[1,"labTooltipType"],labTooltipPosition:[1,"labTooltipPosition"],labTooltipAction:[1,"labTooltipAction"],labTooltipAdjustedRecipe:[1,"labTooltipAdjustedRecipe"]}});var Me=we;var Tn=["overlay"],On=["option"],Nn=(i,t)=>t.value;function kn(i,t){if(i&1&&g(0,"lab-icon",2),i&2){let e=l(),n=P(0),o=P(1);d("value",e.iconLocator()(o.value))("type",n)}}function Rn(i,t){if(i&1&&g(0,"fa-icon",5),i&2){let e=l();N("-scale-y-100",e.opened()&&!e.hiding()),d("icon",e.faChevronDown)}}function Pn(i,t){if(i&1&&(w(0),y(1,"translate")),i&2){l(2);let e=P(1);ft(" ",v(1,1,e.label)," ")}}function jn(i,t){if(i&1&&(c(0,"span",7),w(1),y(2,"translate"),u()),i&2){let e=l(2);s(),E(v(2,1,e.placeholder()))}}function Ln(i,t){if(i&1&&(c(0,"div",6),h(1,Pn,2,3)(2,jn,3,3,"span",7),u(),g(3,"fa-icon",8)),i&2){let e=l(),n=P(1);s(),m(n?1:e.placeholder()?2:-1),s(2),N("-scale-y-100",e.opened()&&!e.hiding()),d("icon",e.faChevronDown)}}function Bn(i,t){if(i&1){let e=I();c(0,"div",10)(1,"input",13),y(2,"translate"),Z("ngModelChange",function(o){D(e);let r=l(2);return Q(r.filterText,o)||(r.filterText=o),V(o)}),u(),g(3,"fa-icon",14),u()}if(i&2){let e=l(2);s(),d("placeholder",v(2,3,"filter")),K("ngModel",e.filterText),s(2),d("icon",e.faMagnifyingGlass)}}function Gn(i,t){if(i&1&&g(0,"lab-icon",2),i&2){let e=l(2).$implicit,n=l(2),o=P(0);d("value",n.iconLocator()(e.value))("type",o)}}function Hn(i,t){if(i&1){let e=I();c(0,"li",16,1),_("click",function(){D(e);let o=l().$implicit,r=l(2);return V(r.select(o.value))})("keydown.enter",function(){D(e);let o=l().$implicit,r=l(2);return V(r.select(o.value))})("keydown.arrowup",function(o){D(e);let r=X(1),a=l(3);return V(a.focusMove(r,-1,o))})("keydown.arrowdown",function(o){D(e);let r=X(1),a=l(3);return V(a.focusMove(r,1,o))})("keydown.home",function(o){D(e);let r=l(3);return V(r.focusFirst(o))})("keydown.end",function(o){D(e);let r=l(3);return V(r.focusLast(o))}),h(2,Gn,1,2,"lab-icon",2),c(3,"span",17),w(4),u()()}if(i&2){let e=l().$implicit,n=P(0),o=l(2),r=P(0);Y(e.value===o.value()?"text-brand-50 bg-brand-950 hover:bg-brand-800 focus-visible:bg-brand-800":"hover:bg-gray-800 focus-visible:bg-gray-800"),d("labTooltip",e.tooltip),R("tabindex",e.disabled?-1:0)("aria-disabled",e.disabled?"true":"false")("aria-selected",e.value===o.value()),s(2),m(r?2:-1),s(2),E(n)}}function Un(i,t){if(i&1&&(Fe(0),y(1,"translate"),h(2,Hn,5,8,"li",15)),i&2){let e=t.$implicit,n=l(2),o=ue(v(1,1,e.label));s(2),m(o.toLowerCase().includes(n.filterLower())?2:-1)}}function Wn(i,t){i&1&&(c(0,"li",12),w(1),y(2,"translate"),u()),i&2&&(s(),ft(" ",v(2,1,"select.noMatches")," "))}function qn(i,t){if(i&1&&(c(0,"div",9,0),h(2,Bn,4,5,"div",10),c(3,"ul",11),T(4,Un,3,4,null,null,Nn),h(6,Wn,3,3,"li",12),u()()),i&2){let e=l();N("opacity-0",e.hiding()),s(2),m(e.filter()?2:-1),s(),d("id",e.id()+"-listbox"),s(),O(e.options()),s(2),m(e.filterText()&&!e.listItems().length?6:-1)}}var $n=0,zn=new Set(["Enter","ArrowDown","ArrowUp","Home","End"]),Xn=Oe("inline-flex overflow-hidden grow cursor-pointer min-h-9 items-center select-none px-1 focus-visible:border-brand-700 focus-visible:outline focus:z-2",{variants:{opened:{true:"border-brand-700 outline z-2",false:"border-gray-700"},rounded:{true:"rounded-xs"},iconOnly:{true:"min-w-9 justify-center hover:bg-gray-800 outline-brand-700",false:"border outline-brand-700"}}}),$=class $ extends ie{constructor(){super(...arguments);this.elementRef=f(ne);this.overlayOrigin=f(Ie);this.formField=f(Je,{optional:!0});this.injector=f(z);this.overlay=Xt.required("overlay");this.listItems=Ue("option");this.uniqueId=($n++).toString();this.id=p(`lab-select-${this.uniqueId}`);this.value=W();this.options=p.required();this.disabled=W(!1);this.placeholder=p();this.rounded=p(!0);this.type=p();this.filter=p(!1);this.iconOnly=p(!1);this.iconLocator=p(e=>e);this.hostClass=b(()=>Xn({opened:this.opened()&&!this.hiding(),rounded:this.rounded(),iconOnly:this.iconOnly()}));this.opened=C(!1);this.selectedOption=b(()=>this.options()?.find(e=>e.value===this.value()));this.faChevronDown=oi;this.faMagnifyingGlass=$e;this.hiding=C(!1);this.filterText=C("");this.filterLower=b(()=>this.filterText().toLowerCase())}toggle(e){this.disabled()||e instanceof KeyboardEvent&&!zn.has(e.key)||(this.opened()?(this.hiding.set(!0),this.overlay().nativeElement.addEventListener("transitionend",()=>{this.opened.set(!1),this.hiding.set(!1)})):(this.opened.set(!0),this.filterText.set(""),this.focusAfterOpen(e)),e?.preventDefault())}select(e){this.toggle(),this.setValue(e)}focusFirst(e){let n=this.listItems()[0]?.nativeElement;n!=null&&(n.focus(),e.preventDefault())}focusLast(e){let n=this.listItems(),o=n[n.length-1]?.nativeElement;o!=null&&(o.focus(),e.preventDefault())}focusMove(e,n,o){let r=this.listItems().findIndex(M=>M.nativeElement===e),a=this.listItems()[r+n]?.nativeElement;a!=null&&(a.focus(),o.preventDefault())}focusAfterOpen(e){let n=this.options(),o=n.findIndex(r=>r.value===this.value());if(e instanceof KeyboardEvent)switch(e.key){case"ArrowUp":o>0&&o--;break;case"ArrowDown":o!==-1&&o<n.length-1&&o++;break;case"Home":o=0;break;case"End":o=n.length-1;break}o!==-1&&oe(()=>{let r=this.listItems().at(o)?.nativeElement;r!=null&&(r.scrollIntoView(),r.focus())},{injector:this.injector})}};$.\u0275fac=(()=>{let e;return function(o){return(e||(e=B($)))(o||$)}})(),$.\u0275cmp=A({type:$,selectors:[["lab-select"]],viewQuery:function(n,o){n&1&&(Se(o.overlay,Tn,5),Se(o.listItems,On,5)),n&2&&ce(2)},hostAttrs:["role","combobox"],hostVars:8,hostBindings:function(n,o){n&1&&_("keydown",function(a){return o.toggle(a)})("click",function(){return o.toggle()}),n&2&&(R("id",o.id())("tabindex",o.disabled()?-1:0)("aria-disabled",o.disabled()?"true":null)("aria-controls",o.opened()?o.id()+"-listbox":null)("aria-expanded",o.opened())("aria-labelledby",(o.formField==null?null:o.formField.labelId)??null),Y(o.hostClass()))},inputs:{id:[1,"id"],value:[1,"value"],options:[1,"options"],disabled:[1,"disabled"],placeholder:[1,"placeholder"],rounded:[1,"rounded"],type:[1,"type"],filter:[1,"filter"],iconOnly:[1,"iconOnly"],iconLocator:[1,"iconLocator"]},outputs:{value:"valueChange",disabled:"disabledChange"},features:[U([{provide:ee,multi:!0,useExisting:$},{provide:se,useExisting:$}]),jt([Ie]),F],decls:6,vars:7,consts:[["overlay",""],["option",""],[3,"value","type"],[1,"absolute","text-gray-500","transition-transform",3,"-scale-y-100","icon"],["cdkConnectedOverlay","",3,"overlayOutsideClick","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayMinWidth"],[1,"absolute","text-gray-500","transition-transform",3,"icon"],[1,"ms-1","me-2","line-clamp-1","grow"],[1,"text-gray-500"],[1,"text-gray-500","transition-transform",3,"icon"],[1,"mt-1","flex","max-h-96","min-w-full","origin-top","flex-col","overflow-hidden","rounded-xs","border","border-gray-700","bg-gray-950","transition-all","starting:scale-y-75","starting:opacity-0"],[1,"relative","m-2","flex"],["role","listbox","tabindex","-1",1,"overflow-y-scroll",3,"id"],[1,"flex","min-h-9","items-center","px-2"],[1,"input",3,"ngModelChange","placeholder","ngModel"],[1,"pointer-events-none","absolute","top-1.5","right-1.5","text-gray-500",3,"icon"],["role","option","labTooltipPosition","adjacent",1,"flex","min-h-9","cursor-pointer","items-center","px-1","outline-none","select-none",3,"class","labTooltip"],["role","option","labTooltipPosition","adjacent",1,"flex","min-h-9","cursor-pointer","items-center","px-1","outline-none","select-none",3,"click","keydown.enter","keydown.arrowup","keydown.arrowdown","keydown.home","keydown.end","labTooltip"],[1,"ms-1"]],template:function(n,o){if(n&1){let r=I();Fe(0)(1),h(2,kn,1,2,"lab-icon",2)(3,Rn,1,3,"fa-icon",3),h(4,Ln,4,4),Lt(5,qn,7,5,"ng-template",4),_("overlayOutsideClick",function(){return D(r),V(o.toggle())})}if(n&2){let r=ue(o.type());s();let a=ue(o.selectedOption());s(),m(r&&a?2:o.iconOnly()?3:-1),s(2),m(o.iconOnly()?-1:4),s(),d("cdkConnectedOverlayOrigin",o.overlayOrigin)("cdkConnectedOverlayOpen",o.opened())("cdkConnectedOverlayMinWidth",o.elementRef.nativeElement.offsetWidth)}},dependencies:[ve,te,ye,ae,vt,yt,J,he,Me,k],encapsulation:2,changeDetection:0});var nt=$;var Yn=["tab"],Kn=(i,t)=>t.value;function Qn(i,t){if(i&1){let e=I();c(0,"button",8),_("click",function(){D(e);let o=l(),r=X(2);return V(o.scrollNext(r,-1))}),u()}if(i&2){let e=l();d("faIcon",e.faAngleLeft)}}function Zn(i,t){if(i&1&&g(0,"fa-icon",10),i&2){let e=l().$implicit;d("icon",e.faIcon)}}function Jn(i,t){if(i&1&&g(0,"lab-icon",11),i&2){let e=l().$implicit;d("type",t)("value",e.icon??e.value)}}function eo(i,t){if(i&1){let e=I();c(0,"a",9,1),_("isActiveChange",function(o){let r=D(e).$implicit,a=l();return V(o?a.value.set(r.value):null)})("click",function(){let o=D(e).$implicit,r=l();return V(r.value.set(o.value))}),h(2,Zn,1,1,"fa-icon",10),h(3,Jn,1,2,"lab-icon",11),c(4,"span",12),w(5),y(6,"translate"),u()()}if(i&2){let e,n=t.$implicit,o=l(),r=X(2);Y(n.value===o.value()?"text-brand-500 group-focus-visible:outline-brand-500 -outline-offset-1 group-focus-visible:outline":"hover:text-brand-500"),d("routerLink",n.routerLink)("title",r.scrollWidth+" "+r.clientWidth),s(2),m(n.faIcon?2:-1),s(),m((e=o.type())?3:-1,e),s(),N("hidden",!!o.type()),s(),E(v(6,9,n.label))}}function to(i,t){if(i&1){let e=I();c(0,"button",13),_("click",function(){D(e);let o=l(),r=X(2);return V(o.scrollNext(r,1))}),u()}if(i&2){let e=l();d("faIcon",e.faAngleRight)}}var io=0,le=class le extends ie{constructor(){super(...arguments);this.ref=f(We);this.injector=f(z);this.tabElements=Ue("tab");this.uniqueId=(io++).toString();this.id=p(`lab-tabs-${this.uniqueId}`);this.value=W();this.tabs=p.required();this.disabled=W(!1);this.type=p();this.faAngleLeft=ti;this.faAngleRight=ii;this.indicatorStyle=b(()=>{let n=this.tabs().findIndex(r=>r.value===this.value()),o=this.tabElements()[n]?.nativeElement;if(o!=null)return()=>({left:`${o.offsetLeft}px`,width:`${o.offsetWidth}px`})})}scrollNext(e,n){e.scrollLeft+=e.offsetWidth*.8*n}onScrollEnd(){oe(()=>{this.ref.markForCheck()},{injector:this.injector})}ngAfterViewInit(){this.ref.markForCheck()}onKeydown(e){switch(e.key){case"ArrowLeft":this.focusMove(-1,e);break;case"ArrowRight":this.focusMove(1,e);break;case"Home":this.focusFirst(e);break;case"End":this.focusLast(e);break}}focusFirst(e){let n=this.tabElements()[0]?.nativeElement;n!=null&&(n.click(),n.scrollIntoView({block:"nearest"}),e.preventDefault())}focusLast(e){let n=this.tabElements(),o=n[n.length-1]?.nativeElement;o!=null&&(o.click(),o.scrollIntoView({block:"nearest"}),e.preventDefault())}focusMove(e,n){let o=this.tabs().findIndex(a=>a.value===this.value()),r=this.tabElements()[o+e]?.nativeElement;r!=null&&(r.click(),r.scrollIntoView({block:"nearest"}),n.preventDefault())}};le.\u0275fac=(()=>{let e;return function(o){return(e||(e=B(le)))(o||le)}})(),le.\u0275cmp=A({type:le,selectors:[["lab-tabs"]],viewQuery:function(n,o){n&1&&Se(o.tabElements,Yn,5),n&2&&ce()},hostAttrs:["role","tablist",1,"flex","items-center","relative","group","overflow-hidden","outline-none","shrink-0"],hostVars:2,hostBindings:function(n,o){n&1&&_("keydown",function(a){return o.onKeydown(a)}),n&2&&R("tabindex",o.disabled()?-1:0)("aria-disabled",!!o.disabled())},inputs:{id:[1,"id"],value:[1,"value"],tabs:[1,"tabs"],disabled:[1,"disabled"],type:[1,"type"]},outputs:{value:"valueChange",disabled:"disabledChange"},features:[F],decls:8,vars:4,consts:[["scroll",""],["tab",""],["type","button","labButton","","tabindex","-1","aria-hidden","true",1,"absolute","left-0","z-1","h-full","rounded-l-none","bg-gray-950","shadow-sm","shadow-gray-700",3,"faIcon"],[1,"relative","inline-flex","grow","overflow-hidden","scroll-smooth",3,"scrollend"],["role","tab","aria-hidden","true","routerLinkActive","","queryParamsHandling","preserve",1,"flex","cursor-pointer","items-center","gap-2","border-b-2","border-gray-700","px-3","py-2",3,"routerLink","title","class"],[1,"grow","border-b-2","border-gray-700"],[1,"bg-brand-500","absolute","bottom-0","h-0.5","transition-all","duration-300"],["type","button","labButton","","tabindex","-1","aria-hidden","true",1,"absolute","right-0","z-1","h-full","rounded-r-none","bg-gray-950","shadow-sm","shadow-gray-700",3,"faIcon"],["type","button","labButton","","tabindex","-1","aria-hidden","true",1,"absolute","left-0","z-1","h-full","rounded-l-none","bg-gray-950","shadow-sm","shadow-gray-700",3,"click","faIcon"],["role","tab","aria-hidden","true","routerLinkActive","","queryParamsHandling","preserve",1,"flex","cursor-pointer","items-center","gap-2","border-b-2","border-gray-700","px-3","py-2",3,"isActiveChange","click","routerLink","title"],[3,"icon"],[3,"type","value"],[1,"font-semibold","lg:line-clamp-1"],["type","button","labButton","","tabindex","-1","aria-hidden","true",1,"absolute","right-0","z-1","h-full","rounded-r-none","bg-gray-950","shadow-sm","shadow-gray-700",3,"click","faIcon"]],template:function(n,o){if(n&1){let r=I();h(0,Qn,1,1,"button",2),c(1,"div",3,0),_("scrollend",function(){return D(r),V(o.onScrollEnd())}),T(3,eo,7,11,"a",4,Kn),g(5,"span",5)(6,"div",6),u(),h(7,to,1,1,"button",7)}if(n&2){let r,a=X(2);m(a.scrollWidth>a.clientWidth+4&&a.scrollLeft!==0?0:-1),s(3),O(o.tabs()),s(3),zt((r=o.indicatorStyle())==null?null:r()),s(),m(a.scrollWidth>a.clientWidth+4&&a.scrollLeft<=a.scrollWidth-a.clientWidth-2?7:-1)}},dependencies:[Zt,Jt,J,ze,he,k],encapsulation:2,changeDetection:0});var ot=le;function no(i,t){if(i&1){let e=I();c(0,"button",9),_("click",function(){D(e);let o=l();return V(o.filter.set(""))}),u()}if(i&2){let e=l();d("faIcon",e.faXmark)}}function oo(i,t){if(i&1&&g(0,"fa-icon",4),i&2){let e=l();d("icon",e.faMagnifyingGlass)}}function ro(i,t){if(i&1){let e=I();c(0,"lab-select",10),y(1,"translate"),Z("ngModelChange",function(o){D(e);let r=l();return Q(r.quality,o)||(r.quality=o),V(o)}),u()}if(i&2){let e=l();d("options",e.qualityOptions),K("ngModel",e.quality),d("iconLocator",e.qualityIconLocator),R("aria-label",v(1,4,"picker.qualityFilter"))}}function ao(i,t){if(i&1){let e=I();c(0,"button",12),_("click",function(){let o=D(e).$implicit,r=l(2);return V(r.selectId(o))}),u()}if(i&2){let e=t.$implicit,n=l(2);d("iconType",n.dialogData.type)("icon",e)("border",e===n.selection)("color",e===n.selection?"brand":"gray")("labTooltip",e)("labTooltipType",n.dialogData.type),R("aria-label",n.data()[n.recordKey][e].name)}}function so(i,t){if(i&1&&(c(0,"div",8),T(1,ao,1,7,"button",11,ut),u()),i&2){let e=t.$implicit;s(),O(e)}}var xe=class xe{constructor(){this.settingsStore=f(fe);this.dialogData=f(si);this.dialogRef=f(ai);this.data=this.settingsStore.dataset;this.defaults=this.settingsStore.defaults;this.faMagnifyingGlass=$e;this.faXmark=ni;this.qualityOptions=di;this.qualityIconLocator=t=>`q${t}`;this.isMultiselect=!1;this.filter=C("");this.quality=C(0);this.allSelected=C(!1);this.rowsKey=`${this.dialogData.type}CategoryRows`;this.recordKey=`${this.dialogData.type}Record`;this.allSelectItems=[];this.allCategoryRows={};this.categoryRows=b(()=>{let t=this.filter(),e=this.quality();if(!t&&e===-1)return this.allCategoryRows;let n=Array.from(this.dialogData.allIds);if(e!==-1){let a=e===0?void 0:e;n=n.filter(M=>this.data()[this.recordKey][M].quality===a)}if(t){let a=t.toLocaleLowerCase();n=n.filter(M=>this.data()[this.recordKey][M].name.toLocaleLowerCase().includes(a))}let o={},r=Object.keys(this.allCategoryRows);for(let a of r){let M=[];for(let Ti of this.allCategoryRows[a]){let Et=Ti.filter(Oi=>n.includes(Oi));Et.length&&M.push(Et)}M.length&&(o[a]=M)}return o});this.categoryTabs=b(()=>Object.keys(this.categoryRows()).map(t=>({label:this.data().categoryRecord[t].name,value:t})));this.selectedCategory=He({source:this.categoryRows,computation:(t,e)=>{let n=Object.keys(t);return e&&n.includes(e.value)?e.value:n[0]}});let{selection:t,allIds:e}=x({},this.dialogData);e=Array.from(e),t instanceof Set&&(t=Array.from(t)),Array.isArray(t)?(this.isMultiselect=!0,this.selection=[...t]):(this.isMultiselect=!1,this.selection=t);let n=this.data();n.categoryIds.forEach(o=>{n[this.rowsKey][o]&&(this.allCategoryRows[o]=[],n[this.rowsKey][o].forEach(r=>{let a=r.filter(M=>e.includes(M));a.length&&this.allCategoryRows[o].push(a)}))}),this.allSelectItems=Array.from(e).map(o=>({label:n[this.recordKey][o].name,value:o})),Array.isArray(t)?this.allSelected.set(t.length===0):t!=null&&this.selectedCategory.set(n[this.recordKey][t].category)}selectId(t){Array.isArray(this.selection)||this.dialogRef.close(t)}};xe.\u0275fac=function(e){return new(e||xe)},xe.\u0275cmp=A({type:xe,selectors:[["lab-picker-dialog"]],hostAttrs:[1,"flex","flex-col","gap-2","tab-2","lg:w-3xl","p-2","pt-0","min-h-[30rem]","max-h-[50rem]","h-[80dvh]"],decls:11,vars:8,consts:[[1,"flex","gap-2"],[1,"relative","flex","grow","basis-2/3"],[1,"input",3,"ngModelChange","placeholder","ngModel"],["type","button","aria-hidden","true","labButton","",1,"absolute","right-0",3,"faIcon"],[1,"pointer-events-none","absolute","top-1.5","right-1.5","text-gray-500",3,"icon"],["type","system",1,"basis-1/3",3,"options","ngModel","iconLocator"],["type","category",3,"valueChange","value","tabs"],[1,"flex","flex-col","overflow-y-auto"],[1,"flex","flex-wrap"],["type","button","aria-hidden","true","labButton","",1,"absolute","right-0",3,"click","faIcon"],["type","system",1,"basis-1/3",3,"ngModelChange","options","ngModel","iconLocator"],["type","button","labButton","",3,"iconType","icon","border","color","labTooltip","labTooltipType"],["type","button","labButton","",3,"click","iconType","icon","border","color","labTooltip","labTooltipType"]],template:function(e,n){e&1&&(c(0,"div",0)(1,"div",1)(2,"input",2),y(3,"translate"),Z("ngModelChange",function(r){return Q(n.filter,r)||(n.filter=r),r}),u(),h(4,no,1,1,"button",3)(5,oo,1,1,"fa-icon",4),u(),h(6,ro,2,6,"lab-select",5),u(),c(7,"lab-tabs",6),Z("valueChange",function(r){return Q(n.selectedCategory,r)||(n.selectedCategory=r),r}),u(),c(8,"div",7),T(9,so,3,0,"div",8,ut),u()),e&2&&(s(2),d("placeholder",v(3,6,"filter")),K("ngModel",n.filter),s(2),m(n.filter()?4:5),s(2),m(n.data().flags.has("quality")?6:-1),s(),K("value",n.selectedCategory),d("tabs",n.categoryTabs()),s(2),O(n.categoryRows()[n.selectedCategory()]))},dependencies:[ve,te,ye,ae,J,ze,nt,ot,Me,k],encapsulation:2,changeDetection:0});var Le=xe;var de=class de{constructor(){this.dialog=f(li);this.settingsStore=f(fe)}pickItem(t,e){return e??=this.settingsStore.settings().availableItemIds,this.dialog.open(Le,{data:{header:"picker.selectItem",type:"item",allIds:e,selection:t}}).closed.pipe(Te())}pickRecipe(t,e){return e??=this.settingsStore.settings().availableRecipeIds,this.dialog.open(Le,{data:{header:"picker.selectRecipe",type:"recipe",allIds:e,selection:t}}).closed.pipe(Te())}};de.\u0275fac=function(e){return new(e||de)},de.\u0275prov=at({token:de,factory:de.\u0275fac,providedIn:"root"});var rt=de;var Ii=class{constructor(){this.picker=f(rt);this.value=C(pe(1));this.unit=C(0);this.type=C(0);this.isRecipe=b(()=>this.unit()===3)}openPicker(){(this.isRecipe()?this.picker.pickRecipe():this.picker.pickItem()).subscribe(e=>{this.addObjective({targetId:e,value:this.value(),unit:this.unit(),type:this.type()})})}};var us=[{value:"captain-of-industry",label:"options.game.captainOfIndustry"},{value:"dyson-sphere-program",label:"options.game.dysonSphereProgram"},{value:"factor-y",label:"options.game.factorY"},{value:"factorio",label:"options.game.factorio"},{value:"final-factory",label:"options.game.finalFactory"},{value:"foundry",label:"options.game.foundry"},{value:"mindustry",label:"options.game.mindustry"},{value:"outworld-station",label:"options.game.outworldStation"},{value:"satisfactory",label:"options.game.satisfactory"},{value:"techtonica",label:"options.game.techtonica"}];export{ki as a,te as b,ye as c,ae as d,cn as e,ve as f,Je as g,Ei as h,Me as i,nt as j,ot as k,rt as l,Ii as m,us as n};
