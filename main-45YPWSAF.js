import{a as Ge,b as $}from"./chunk-4T6P7HDD.js";import{b as xe,p as Ue,q as G,r as Fe,s as Ne,t as je}from"./chunk-4KIH77MQ.js";import{c as Pe,d as V,g as Re,h as _e}from"./chunk-Y5N5VK5X.js";import{m as Le,n as q,q as z}from"./chunk-7IWRXNGT.js";import{A as Ae,P as Be,R as We,V as Ve,W as P,ea as Je,g as Oe,i as Me,l as ke,m as ee}from"./chunk-SCJWCTBV.js";import{$a as E,A as d,Ab as N,B as C,Gb as Ce,I as T,Ib as j,Jb as Te,Ra as v,T as u,X as g,Y as ae,Yb as L,Zb as B,_ as h,ba as se,c as x,ca as Q,da as i,db as me,ea as ce,f as U,fb as ge,hc as k,ia as pe,ib as he,ic as W,ja as le,jc as Ee,ka as de,lc as Ie,nb as F,pa as ue,pb as J,q as m,qb as ve,r as ie,rb as be,sb as we,ua as fe,vb as ye,wb as De,wc as Se,xb as M,yb as f,zb as b}from"./chunk-OPOL2C2X.js";import{a as oe,f as Qe}from"./chunk-HZ6M6AS2.js";var te="Service workers are disabled or not supported by this browser",I=class{serviceWorker;worker;registration;events;constructor(r,e){if(this.serviceWorker=r,!r)this.worker=this.events=this.registration=new x(n=>n.error(new g(5601,!1)));else{let n=null,t=new U;this.worker=new x(c=>(n!==null&&c.next(n),t.subscribe(A=>c.next(A))));let a=()=>{let{controller:c}=r;c!==null&&(n=c,t.next(n))};r.addEventListener("controllerchange",a),a(),this.registration=this.worker.pipe(u(()=>r.getRegistration().then(c=>{if(!c)throw new g(5601,!1);return c})));let s=new U;this.events=s.asObservable();let p=c=>{let{data:A}=c;A?.type&&s.next(A)};r.addEventListener("message",p),e?.get(J,null,{optional:!0})?.onDestroy(()=>{r.removeEventListener("controllerchange",a),r.removeEventListener("message",p)})}}postMessage(r,e){return new Promise(n=>{this.worker.pipe(T(1)).subscribe(t=>{t.postMessage(oe({action:r},e)),n()})})}postMessageWithOperation(r,e,n){let t=this.waitForOperationCompleted(n),a=this.postMessage(r,e);return Promise.all([a,t]).then(([,s])=>s)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(r){let e;return typeof r=="string"?e=n=>n.type===r:e=n=>r.includes(n.type),this.events.pipe(C(e))}nextEventOfType(r){return this.eventsOfType(r).pipe(T(1))}waitForOperationCompleted(r){return new Promise((e,n)=>{this.eventsOfType("OPERATION_COMPLETED").pipe(C(t=>t.nonce===r),T(1),m(t=>{if(t.result!==void 0)return t.result;throw new Error(t.error)})).subscribe({next:e,error:n})})}get isEnabled(){return!!this.serviceWorker}},et=(()=>{class o{sw;messages;notificationClicks;notificationCloses;pushSubscriptionChanges;subscription;get isEnabled(){return this.sw.isEnabled}pushManager=null;subscriptionChanges=new U;constructor(e){if(this.sw=e,!e.isEnabled){this.messages=d,this.notificationClicks=d,this.notificationCloses=d,this.pushSubscriptionChanges=d,this.subscription=d;return}this.messages=this.sw.eventsOfType("PUSH").pipe(m(t=>t.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(m(t=>t.data)),this.notificationCloses=this.sw.eventsOfType("NOTIFICATION_CLOSE").pipe(m(t=>t.data)),this.pushSubscriptionChanges=this.sw.eventsOfType("PUSH_SUBSCRIPTION_CHANGE").pipe(m(t=>t.data)),this.pushManager=this.sw.registration.pipe(m(t=>t.pushManager));let n=this.pushManager.pipe(u(t=>t.getSubscription()));this.subscription=new x(t=>{let a=n.subscribe(t),s=this.subscriptionChanges.subscribe(t);return()=>{a.unsubscribe(),s.unsubscribe()}})}requestSubscription(e){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(te));let n={userVisibleOnly:!0},t=this.decodeBase64(e.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),a=new Uint8Array(new ArrayBuffer(t.length));for(let s=0;s<t.length;s++)a[s]=t.charCodeAt(s);return n.applicationServerKey=a,new Promise((s,p)=>{this.pushManager.pipe(u(l=>l.subscribe(n)),T(1)).subscribe({next:l=>{this.subscriptionChanges.next(l),s(l)},error:p})})}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(te));let e=n=>{if(n===null)throw new g(5602,!1);return n.unsubscribe().then(t=>{if(!t)throw new g(5603,!1);this.subscriptionChanges.next(null)})};return new Promise((n,t)=>{this.subscription.pipe(T(1),u(e)).subscribe({next:n,error:t})})}decodeBase64(e){return atob(e)}static \u0275fac=function(n){return new(n||o)(Q(I))};static \u0275prov=h({token:o,factory:o.\u0275fac})}return o})(),re=(()=>{class o{sw;versionUpdates;unrecoverable;get isEnabled(){return this.sw.isEnabled}ongoingCheckForUpdate=null;constructor(e){if(this.sw=e,!e.isEnabled){this.versionUpdates=d,this.unrecoverable=d;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(te));if(this.ongoingCheckForUpdate)return this.ongoingCheckForUpdate;let e=this.sw.generateNonce();return this.ongoingCheckForUpdate=this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:e},e).finally(()=>{this.ongoingCheckForUpdate=null}),this.ongoingCheckForUpdate}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new g(5601,!1));let e=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:e},e)}static \u0275fac=function(n){return new(n||o)(Q(I))};static \u0275prov=h({token:o,factory:o.\u0275fac})}return o})();var ze=new se("");function tt(){let o=i(R);if(!("serviceWorker"in navigator&&o.enabled!==!1))return;let r=i(ze),e=i(he),n=i(J);e.runOutsideAngular(()=>{let t=navigator.serviceWorker,a=()=>t.controller?.postMessage({action:"INITIALIZE"});t.addEventListener("controllerchange",a),n.onDestroy(()=>{t.removeEventListener("controllerchange",a)})}),e.runOutsideAngular(()=>{let t,{registrationStrategy:a}=o;if(typeof a=="function")t=new Promise(s=>a().subscribe(()=>s()));else{let[s,...p]=(a||"registerWhenStable:30000").split(":");switch(s){case"registerImmediately":t=Promise.resolve();break;case"registerWithDelay":t=qe(+p[0]||0);break;case"registerWhenStable":t=Promise.race([n.whenStable(),qe(+p[0])]);break;default:throw new g(5600,!1)}}t.then(()=>{n.destroyed||navigator.serviceWorker.register(r,{scope:o.scope}).catch(s=>console.error(ae(5604,!1)))})})}function qe(o){return new Promise(r=>setTimeout(r,o))}function rt(o,r){return new I(o.enabled!==!1?navigator.serviceWorker:void 0,r)}var R=class{enabled;scope;registrationStrategy};function $e(o,r={}){return ce([et,re,{provide:ze,useValue:o},{provide:R,useValue:r},{provide:I,useFactory:rt,deps:[R,de]},F(tt)])}var nt=(o,r)=>r.value;function ot(o,r){o&1&&N(0,"fa-icon",1),o&2&&M("icon",r)}function it(o,r){if(o&1){let e=Ce();f(0,"button",4),j("click",function(){let t=pe(e).$implicit,a=Te();return le(a.dialogRef.close(t.value))}),b()}if(o&2){let e=r.$implicit,n=r.$index,t=r.$count;M("color",e.color??(n===t-1?"brand":"gray"))("faIcon",e.icon)("text",e.text)}}var S=class S{constructor(){this.dialogData=i(Fe);this.dialogRef=i(G)}};S.\u0275fac=function(e){return new(e||S)},S.\u0275cmp=E({type:S,selectors:[["lab-confirm-dialog"]],hostAttrs:[1,"flex","flex-col","gap-3","p-3","pt-0","lg:max-w-3xl"],decls:8,vars:4,consts:[[1,"flex","gap-1","sm:gap-2"],["size","xl",3,"icon"],[1,"flex","justify-end","gap-1","sm:gap-2"],["type","button","labButton","",3,"color","faIcon","text"],["type","button","labButton","",3,"click","color","faIcon","text"]],template:function(e,n){if(e&1&&(f(0,"div",0),be(1,ot,1,1,"fa-icon",1),f(2,"p"),L(3),k(4,"translate"),b()(),f(5,"div",2),ye(6,it,1,3,"button",3,nt),b()),e&2){let t;v(),we((t=n.dialogData.icon)?1:-1,t),v(2),B(W(4,2,n.dialogData.message)),v(3),De(n.dialogData.actions)}},dependencies:[Le,z,q],encapsulation:2,changeDetection:0});var H=S;var w=class w{constructor(){this.dialog=i(je)}show(r){return this.dialog.open(H,{data:r}).closed}};w.\u0275fac=function(e){return new(e||w)},w.\u0275prov=h({token:w,factory:w.\u0275fac,providedIn:"root"});var K=w;var y=class y{reload(){window.location.reload()}};y.\u0275fac=function(e){return new(e||y)},y.\u0275prov=h({token:y,factory:y.\u0275fac,providedIn:"root"});var Z=y;var O=class O{constructor(){this.swUpdate=i(re);this.confirm=i(K);this.windowClient=i(Z);ie([this.swUpdate.unrecoverable.pipe(u(()=>this.confirm.show({header:"app.updateRequired",message:"app.updateRequiredMessage",icon:ee,actions:[{text:"ok"}]}))),this.swUpdate.versionUpdates.pipe(C(r=>r.type==="VERSION_READY"),u(()=>this.confirm.show({header:"app.updateAvailable",message:"app.updateAvailableMessage",icon:ee,actions:[{text:"cancel",value:!1},{text:"ok",value:!0}]})),C(r=>!!r))]).pipe(ke()).subscribe(()=>{this.windowClient.reload()})}};O.\u0275fac=function(e){return new(e||O)},O.\u0275cmp=E({type:O,selectors:[["lab-root"]],hostAttrs:[1,"block","h-full"],decls:1,vars:0,template:function(e,n){e&1&&N(0,"router-outlet")},dependencies:[Pe],encapsulation:2});var X=O;var Xe=Qe(Je(),1);function at(o,r){}var D=class D extends Ue{constructor(){super(...arguments);this.dialogRef=i(G);this.faXmark=Ae}ngOnInit(){this.parseData()}parseData(){let e=this.dialogRef.config.data;if(e==null||typeof e!="object")return;let n=e.header;typeof n=="string"?this.header=n:typeof n=="object"&&([this.header,this.headerParams]=[...n])}};D.\u0275fac=(()=>{let e;return function(t){return(e||(e=fe(D)))(t||D)}})(),D.\u0275cmp=E({type:D,selectors:[["lab-dialog"]],hostAttrs:[1,"flex","flex-col","bg-gray-950","border","border-gray-700","w-dvw-1","sm:w-dvw-3","lg:w-auto"],features:[me],decls:7,vars:9,consts:[[1,"flex","items-center","justify-between","p-3"],[1,"text-lg","font-semibold"],["type","button","labButton","",3,"click","faIcon","border"],["cdkPortalOutlet",""]],template:function(n,t){n&1&&(f(0,"div",0)(1,"h2",1),L(2),k(3,"translate"),b(),f(4,"button",2),k(5,"translate"),j("click",function(){return t.dialogRef.close()}),b()(),ge(6,at,0,0,"ng-template",3)),n&2&&(v(2),B(Ee(3,4,t.header,t.headerParams)),v(2),M("faIcon",t.faXmark)("border",!1),ve("aria-label",W(5,7,"close")))},dependencies:[xe,z,q],encapsulation:2,changeDetection:0});var Y=D;var Ke=o=>{let r=i(V),e=i(Ge),n=i($),t=o.params.id;switch(t){case"list":case"wizard":case"flow":case"data":return(async()=>{let s=await n.unzipQueryParams(o.queryParams),{modId:p,params:l}=e.migrate(void 0,s),c=l.z?await n.getHashParams(l):l;return r.createUrlTree([We(p,"1.1"),t],{queryParams:c})})();case"factorio":return r.createUrlTree([P]);case"final-factory":return r.createUrlTree(["ffy"]);case"foundry":return r.createUrlTree(["fdy"]);case"outworld-station":return r.createUrlTree(["ows"]);case"satisfactory":return r.createUrlTree(["sfy"]);case"techtonica":return r.createUrlTree(["tta"])}return!0};var ne=o=>{let r=i(V);if(i(Be).bypassLanding()){let n=i($).stored();if(n&&Object.keys(o.params).length===0&&Object.keys(o.queryParams).length===0)return r.parseUrl(n);let t=o.paramMap.get("id")??P;return r.createUrlTree([t,"list"],{queryParams:o.queryParams})}return o.params.id==null?r.createUrlTree([P]):!0};var Ze=[{path:":id",canActivate:[Ke],loadComponent:()=>import("./chunk-XNAKJQU4.js").then(o=>o.Id),children:[{path:"",pathMatch:"full",canActivate:[ne],loadComponent:()=>import("./chunk-LBOR3664.js").then(o=>o.Landing)},{path:"",loadComponent:()=>import("./chunk-DC56ZOSK.js").then(o=>o.Main),loadChildren:()=>import("./chunk-YR3OX5NG.js").then(o=>o.routes)}]},{path:"**",canActivate:[ne],children:[]}];var st={container:Y,hasBackdrop:!0};async function ct(){return i(Ve).load(),(0,Xe.loadModule)("glpk.all.wasm")}var Ye={providers:[{provide:Ne,useValue:st},F(()=>ct()),ue(),Ie(),Re(Ze,_e()),Me(),$e("ngsw-worker.js",{enabled:!Se(),registrationStrategy:"registerWhenStable:30000"})]};Oe(X,Ye).catch(o=>{console.error(o)});
