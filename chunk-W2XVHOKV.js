import{Aa as ne,Ac as g4,B as s4,Ba as U4,Bc as Me,Cc as Le,Da as F0,Dc as _e,Ea as P0,F as $6,Fa as u4,Ga as d4,Ha as ie,Ia as le,J as E0,Ja as oe,K as X6,Ka as se,L as K6,La as fe,Ma as ue,Na as de,O as J6,Oa as G1,Q as Y6,T as w1,Ta as p4,U as Z6,Va as pe,X as E2,Xa as B0,_ as a2,ba as G2,c as C3,ca as p2,da as Q,db as O0,ea as R0,f as S3,fa as Q6,g as D0,ga as ee,h as W6,ha as te,hb as me,jb as m4,ka as ae,l as B4,la as f4,ma as R2,mb as he,na as w3,nb as ge,oa as A0,pa as re,q as S1,qc as h4,r as k0,ra as O4,rc as r2,sb as ve,sc as J2,ta as T0,tb as ze,va as x1,ya as ce,za as I0}from"./chunk-VPP3P5XC.js";import{a as U2,b as g1,c as ai,e as P4,f as G6}from"./chunk-HZ6M6AS2.js";var a8=P4(J4=>{"use strict";var M2={operators:["!","^","*","/","%","+","-","<","<=",">",">=","==","!=","&&","||","??"],operatorCharacters:["!","^","*","/","%","+","-","<","=",">","&","|","?"],operatorsOrder:[["^"],["*","/","%"],["+","-"],["<","<=",">",">="],["==","!="],["&&"],["||","??"]],operatorsPrefix:["!","n"],literals:{'"':'"',"`":"`","'":"'","[":"]"},numberRx:/^(?:[0-9]*(\.[0-9]*)?){1}$/,tokenRx:/^[\w\$\#\.\@\:\{\}]+$/,symbol:Symbol("formula"),settings:Symbol("settings")};J4.Parser=class{constructor(a,t={}){if(!t[M2.settings]&&t.constants)for(let e in t.constants){let r=t.constants[e];if(r!==null&&!["boolean","number","string"].includes(typeof r))throw new Error(`Formula constant ${e} contains invalid ${typeof r} value type`)}this.settings=t[M2.settings]?t:Object.assign({[M2.settings]:!0,constants:{},functions:{}},t),this.single=null,this._parts=null,this._parse(a)}_parse(a){let t=[],e="",r=0,c=!1,i=l=>{if(r)throw new Error("Formula missing closing parenthesis");let d=t.length?t[t.length-1]:null;if(!(!c&&!e&&!l)){if(d&&d.type==="reference"&&l===")"){d.type="function",d.value=this._subFormula(e,d.value),e="";return}if(l===")"){let m=new J4.Parser(e,this.settings);t.push({type:"segment",value:m})}else if(c){if(c==="]"){t.push({type:"reference",value:e}),e="";return}t.push({type:"literal",value:e})}else if(M2.operatorCharacters.includes(e))d&&d.type==="operator"&&M2.operators.includes(d.value+e)?d.value+=e:t.push({type:"operator",value:e});else if(e.match(M2.numberRx))t.push({type:"constant",value:parseFloat(e)});else if(this.settings.constants[e]!==void 0)t.push({type:"constant",value:this.settings.constants[e]});else{if(!e.match(M2.tokenRx))throw new Error(`Formula contains invalid token: ${e}`);t.push({type:"reference",value:e})}e=""}};for(let l of a)c?l===c?(i(),c=!1):e+=l:r?l==="("?(e+=l,++r):l===")"?(--r,r?e+=l:i(l)):e+=l:l in M2.literals?c=M2.literals[l]:l==="("?(i(),++r):M2.operatorCharacters.includes(l)?(i(),e=l,i()):l!==" "?e+=l:i();i(),t=t.map((l,d)=>l.type!=="operator"||l.value!=="-"||d&&t[d-1].type!=="operator"?l:{type:"operator",value:"n"});let o=!1;for(let l of t){if(l.type==="operator"){if(M2.operatorsPrefix.includes(l.value))continue;if(!o)throw new Error("Formula contains an operator in invalid position");if(!M2.operators.includes(l.value))throw new Error(`Formula contains an unknown operator ${l.value}`)}else if(o)throw new Error("Formula missing expected operator");o=!o}if(!o)throw new Error("Formula contains invalid trailing operator");t.length===1&&["reference","literal","constant"].includes(t[0].type)&&(this.single={type:t[0].type==="reference"?"reference":"value",value:t[0].value}),this._parts=t.map(l=>{if(l.type==="operator")return M2.operatorsPrefix.includes(l.value)?l:l.value;if(l.type!=="reference")return l.value;if(this.settings.tokenRx&&!this.settings.tokenRx.test(l.value))throw new Error(`Formula contains invalid reference ${l.value}`);return this.settings.reference?this.settings.reference(l.value):M2.reference(l.value)})}_subFormula(a,t){let e=this.settings.functions[t];if(typeof e!="function")throw new Error(`Formula contains unknown function ${t}`);let r=[];if(a){let c="",i=0,o=!1,l=()=>{if(!c)throw new Error(`Formula contains function ${t} with invalid arguments ${a}`);r.push(c),c=""};for(let d=0;d<a.length;++d){let m=a[d];o?(c+=m,m===o&&(o=!1)):m in M2.literals&&!i?(c+=m,o=M2.literals[m]):m===","&&!i?l():(c+=m,m==="("?++i:m===")"&&--i)}l()}return r=r.map(c=>new J4.Parser(c,this.settings)),function(c){let i=[];for(let o of r)i.push(o.evaluate(c));return e.call(c,...i)}}evaluate(a){let t=this._parts.slice();for(let e=t.length-2;e>=0;--e){let r=t[e];if(r&&r.type==="operator"){let c=t[e+1];t.splice(e+1,1);let i=M2.evaluate(c,a);t[e]=M2.single(r.value,i)}}return M2.operatorsOrder.forEach(e=>{for(let r=1;r<t.length-1;)if(e.includes(t[r])){let c=t[r],i=M2.evaluate(t[r-1],a),o=M2.evaluate(t[r+1],a);t.splice(r,2);let l=M2.calculate(c,i,o);t[r-1]=l===0?0:l}else r+=2}),M2.evaluate(t[0],a)}};J4.Parser.prototype[M2.symbol]=!0;M2.reference=function(a){return function(t){return t&&t[a]!==void 0?t[a]:null}};M2.evaluate=function(a,t){return a===null?null:typeof a=="function"?a(t):a[M2.symbol]?a.evaluate(t):a};M2.single=function(a,t){if(a==="!")return!t;let e=-t;return e===0?0:e};M2.calculate=function(a,t,e){if(a==="??")return M2.exists(t)?t:e;if(typeof t=="string"||typeof e=="string"){if(a==="+")return t=M2.exists(t)?t:"",e=M2.exists(e)?e:"",t+e}else switch(a){case"^":return Math.pow(t,e);case"*":return t*e;case"/":return t/e;case"%":return t%e;case"+":return t+e;case"-":return t-e}switch(a){case"<":return t<e;case"<=":return t<=e;case">":return t>e;case">=":return t>=e;case"==":return t===e;case"!=":return t!==e;case"&&":return t&&e;case"||":return t||e}return null};M2.exists=function(a){return a!=null}});var G8=P4(()=>{"use strict"});var W8=P4(()=>{"use strict"});var $8=P4((G3,p6)=>{"use strict";var d6=(()=>{var a=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(a=a||__filename),function(e){e=e||{};var e=typeof e<"u"?e:{},r,c;e.ready=new Promise(function(n,s){r=n,c=s});var i=Object.assign({},e),o=[],l="./this.program",d=(n,s)=>{throw s},m=typeof window=="object",v=typeof importScripts=="function",_=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",y="";function N(n){return e.locateFile?e.locateFile(n,y):y+n}var S,V,W,B;function k(n){if(n instanceof F6)return;Y("exiting due to exception: "+n)}if(_){var F=G8(),P=W8();v?y=P.dirname(y)+"/":y=__dirname+"/",S=(n,s)=>(n=L3(n)?new URL(n):P.normalize(n),F.readFileSync(n,s?void 0:"utf8")),W=n=>{var s=S(n,!0);return s.buffer||(s=new Uint8Array(s)),s},V=(n,s,u)=>{n=L3(n)?new URL(n):P.normalize(n),F.readFile(n,function(h,g){h?u(h):s(g.buffer)})},process.argv.length>1&&(l=process.argv[1].replace(/\\/g,"/")),o=process.argv.slice(2),process.on("uncaughtException",function(n){if(!(n instanceof F6))throw n}),process.on("unhandledRejection",function(n){throw n}),d=(n,s)=>{if(p1())throw process.exitCode=n,s;k(s),process.exit(n)},e.inspect=function(){return"[Emscripten Module object]"}}else(m||v)&&(v?y=self.location.href:typeof document<"u"&&document.currentScript&&(y=document.currentScript.src),a&&(y=a),y.indexOf("blob:")!==0?y=y.substr(0,y.replace(/[?#].*/,"").lastIndexOf("/")+1):y="",S=n=>{var s=new XMLHttpRequest;return s.open("GET",n,!1),s.send(null),s.responseText},v&&(W=n=>{var s=new XMLHttpRequest;return s.open("GET",n,!1),s.responseType="arraybuffer",s.send(null),new Uint8Array(s.response)}),V=(n,s,u)=>{var h=new XMLHttpRequest;h.open("GET",n,!0),h.responseType="arraybuffer",h.onload=()=>{if(h.status==200||h.status==0&&h.response){s(h.response);return}u()},h.onerror=u,h.send(null)},B=n=>document.title=n);var J=e.print||console.log.bind(console),Y=e.printErr||console.warn.bind(console);Object.assign(e,i),i=null,e.arguments&&(o=e.arguments),e.thisProgram&&(l=e.thisProgram),e.quit&&(d=e.quit);var s2;e.wasmBinary&&(s2=e.wasmBinary);var g2=e.noExitRuntime||!0;typeof WebAssembly!="object"&&f1("no native wasm support detected");var y2,A2=!1,D2;function V2(n,s){n||f1(s)}var E=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function e2(n,s,u){for(var h=s+u,g=s;n[g]&&!(g>=h);)++g;if(g-s>16&&n.buffer&&E)return E.decode(n.subarray(s,g));for(var M="";s<g;){var b=n[s++];if(!(b&128)){M+=String.fromCharCode(b);continue}var w=n[s++]&63;if((b&224)==192){M+=String.fromCharCode((b&31)<<6|w);continue}var G=n[s++]&63;if((b&240)==224?b=(b&15)<<12|w<<6|G:b=(b&7)<<18|w<<12|G<<6|n[s++]&63,b<65536)M+=String.fromCharCode(b);else{var c2=b-65536;M+=String.fromCharCode(55296|c2>>10,56320|c2&1023)}}return M}function o2(n,s){return n?e2(C,n,s):""}function d2(n,s,u,h){if(!(h>0))return 0;for(var g=u,M=u+h-1,b=0;b<n.length;++b){var w=n.charCodeAt(b);if(w>=55296&&w<=57343){var G=n.charCodeAt(++b);w=65536+((w&1023)<<10)|G&1023}if(w<=127){if(u>=M)break;s[u++]=w}else if(w<=2047){if(u+1>=M)break;s[u++]=192|w>>6,s[u++]=128|w&63}else if(w<=65535){if(u+2>=M)break;s[u++]=224|w>>12,s[u++]=128|w>>6&63,s[u++]=128|w&63}else{if(u+3>=M)break;s[u++]=240|w>>18,s[u++]=128|w>>12&63,s[u++]=128|w>>6&63,s[u++]=128|w&63}}return s[u]=0,u-g}function b2(n,s,u){return d2(n,C,s,u)}function D(n){for(var s=0,u=0;u<n.length;++u){var h=n.charCodeAt(u);h<=127?s++:h<=2047?s+=2:h>=55296&&h<=57343?(s+=4,++u):s+=3}return s}var f,z,C,j,Z,H,A,T,x;function U(n){f=n,e.HEAP8=z=new Int8Array(n),e.HEAP16=j=new Int16Array(n),e.HEAP32=H=new Int32Array(n),e.HEAPU8=C=new Uint8Array(n),e.HEAPU16=Z=new Uint16Array(n),e.HEAPU32=A=new Uint32Array(n),e.HEAPF32=T=new Float32Array(n),e.HEAPF64=x=new Float64Array(n)}var X=e.INITIAL_MEMORY||16777216,K,q=[],n2=[],x2=[],w2=!1;function p1(){return g2}function I(){if(e.preRun)for(typeof e.preRun=="function"&&(e.preRun=[e.preRun]);e.preRun.length;)i2(e.preRun.shift());w0(q)}function O(){w2=!0,!e.noFSInit&&!p.init.initialized&&p.init(),p.ignorePermissions=!1,b1.init(),w0(n2)}function C2(){if(e.postRun)for(typeof e.postRun=="function"&&(e.postRun=[e.postRun]);e.postRun.length;)S2(e.postRun.shift());w0(x2)}function i2(n){q.unshift(n)}function m2(n){n2.unshift(n)}function S2(n){x2.unshift(n)}var P2=0,z2=null,W2=null;function e1(n){return n}function q1(n){P2++,e.monitorRunDependencies&&e.monitorRunDependencies(P2)}function M3(n){if(P2--,e.monitorRunDependencies&&e.monitorRunDependencies(P2),P2==0&&(z2!==null&&(clearInterval(z2),z2=null),W2)){var s=W2;W2=null,s()}}function f1(n){e.onAbort&&e.onAbort(n),n="Aborted("+n+")",Y(n),A2=!0,D2=1,n+=". Build with -sASSERTIONS for more info.";var s=new WebAssembly.RuntimeError(n);throw c(s),s}var $t="data:application/octet-stream;base64,";function T6(n){return n.startsWith($t)}function L3(n){return n.startsWith("file://")}var Z2;Z2="glpk.all.wasm",T6(Z2)||(Z2=N(Z2));function I6(n){try{if(n==Z2&&s2)return new Uint8Array(s2);if(W)return W(n);throw"both async and sync fetching of the wasm failed"}catch(s){f1(s)}}function Xt(){if(!s2&&(m||v)){if(typeof fetch=="function"&&!L3(Z2))return fetch(Z2,{credentials:"same-origin"}).then(function(n){if(!n.ok)throw"failed to load wasm binary file at '"+Z2+"'";return n.arrayBuffer()}).catch(function(){return I6(Z2)});if(V)return new Promise(function(n,s){V(Z2,function(u){n(new Uint8Array(u))},s)})}return Promise.resolve().then(function(){return I6(Z2)})}function Kt(){var n={a:Da};function s(b,w){var G=b.exports;e.asm=G,y2=e.asm.D,U(y2.buffer),K=e.asm.N,m2(e.asm.E),M3("wasm-instantiate")}q1("wasm-instantiate");function u(b){s(b.instance)}function h(b){return Xt().then(function(w){return WebAssembly.instantiate(w,n)}).then(function(w){return w}).then(b,function(w){Y("failed to asynchronously prepare wasm: "+w),f1(w)})}function g(){return!s2&&typeof WebAssembly.instantiateStreaming=="function"&&!T6(Z2)&&!L3(Z2)&&!_&&typeof fetch=="function"?fetch(Z2,{credentials:"same-origin"}).then(function(b){var w=WebAssembly.instantiateStreaming(b,n);return w.then(u,function(G){return Y("wasm streaming compile failed: "+G),Y("falling back to ArrayBuffer instantiation"),h(u)})}):h(u)}if(e.instantiateWasm)try{var M=e.instantiateWasm(n,s);return M}catch(b){Y("Module.instantiateWasm callback failed with error: "+b),c(b)}return g().catch(c),{}}var f2,N2;function F6(n){this.name="ExitStatus",this.message="Program terminated with exit("+n+")",this.status=n}function w0(n){for(;n.length>0;)n.shift()(e)}function Jt(n,s="i8"){switch(s.endsWith("*")&&(s="*"),s){case"i1":return z[n>>0];case"i8":return z[n>>0];case"i16":return j[n>>1];case"i32":return H[n>>2];case"i64":return H[n>>2];case"float":return T[n>>2];case"double":return x[n>>3];case"*":return A[n>>2];default:f1("invalid type for getValue: "+s)}return null}function Yt(n,s,u="i8"){switch(u.endsWith("*")&&(u="*"),u){case"i1":z[n>>0]=s;break;case"i8":z[n>>0]=s;break;case"i16":j[n>>1]=s;break;case"i32":H[n>>2]=s;break;case"i64":N2=[s>>>0,(f2=s,+Math.abs(f2)>=1?f2>0?(Math.min(+Math.floor(f2/4294967296),4294967295)|0)>>>0:~~+Math.ceil((f2-+(~~f2>>>0))/4294967296)>>>0:0)],H[n>>2]=N2[0],H[n+4>>2]=N2[1];break;case"float":T[n>>2]=s;break;case"double":x[n>>3]=s;break;case"*":A[n>>2]=s;break;default:f1("invalid type for setValue: "+u)}}function Zt(n,s,u,h){f1("Assertion failed: "+o2(n)+", at: "+[s?o2(s):"unknown filename",u,h?o2(h):"unknown function"])}function Qt(n){return H[V6()>>2]=n,n}var _2={isAbs:n=>n.charAt(0)==="/",splitPath:n=>{var s=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return s.exec(n).slice(1)},normalizeArray:(n,s)=>{for(var u=0,h=n.length-1;h>=0;h--){var g=n[h];g==="."?n.splice(h,1):g===".."?(n.splice(h,1),u++):u&&(n.splice(h,1),u--)}if(s)for(;u;u--)n.unshift("..");return n},normalize:n=>{var s=_2.isAbs(n),u=n.substr(-1)==="/";return n=_2.normalizeArray(n.split("/").filter(h=>!!h),!s).join("/"),!n&&!s&&(n="."),n&&u&&(n+="/"),(s?"/":"")+n},dirname:n=>{var s=_2.splitPath(n),u=s[0],h=s[1];return!u&&!h?".":(h&&(h=h.substr(0,h.length-1)),u+h)},basename:n=>{if(n==="/")return"/";n=_2.normalize(n),n=n.replace(/\/$/,"");var s=n.lastIndexOf("/");return s===-1?n:n.substr(s+1)},join:function(){var n=Array.prototype.slice.call(arguments);return _2.normalize(n.join("/"))},join2:(n,s)=>_2.normalize(n+"/"+s)};function ea(){if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function"){var n=new Uint8Array(1);return()=>(crypto.getRandomValues(n),n[0])}else if(_)try{var s=ai("crypto");return()=>s.randomBytes(1)[0]}catch{}return()=>f1("randomDevice")}var m1={resolve:function(){for(var n="",s=!1,u=arguments.length-1;u>=-1&&!s;u--){var h=u>=0?arguments[u]:p.cwd();if(typeof h!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!h)return"";n=h+"/"+n,s=_2.isAbs(h)}return n=_2.normalizeArray(n.split("/").filter(g=>!!g),!s).join("/"),(s?"/":"")+n||"."},relative:(n,s)=>{n=m1.resolve(n).substr(1),s=m1.resolve(s).substr(1);function u(c2){for(var h2=0;h2<c2.length&&c2[h2]==="";h2++);for(var L2=c2.length-1;L2>=0&&c2[L2]==="";L2--);return h2>L2?[]:c2.slice(h2,L2-h2+1)}for(var h=u(n.split("/")),g=u(s.split("/")),M=Math.min(h.length,g.length),b=M,w=0;w<M;w++)if(h[w]!==g[w]){b=w;break}for(var G=[],w=b;w<h.length;w++)G.push("..");return G=G.concat(g.slice(b)),G.join("/")}};function x0(n,s,u){var h=u>0?u:D(n)+1,g=new Array(h),M=d2(n,g,0,g.length);return s&&(g.length=M),g}var b1={ttys:[],init:function(){},shutdown:function(){},register:function(n,s){b1.ttys[n]={input:[],output:[],ops:s},p.registerDevice(n,b1.stream_ops)},stream_ops:{open:function(n){var s=b1.ttys[n.node.rdev];if(!s)throw new p.ErrnoError(43);n.tty=s,n.seekable=!1},close:function(n){n.tty.ops.fsync(n.tty)},fsync:function(n){n.tty.ops.fsync(n.tty)},read:function(n,s,u,h,g){if(!n.tty||!n.tty.ops.get_char)throw new p.ErrnoError(60);for(var M=0,b=0;b<h;b++){var w;try{w=n.tty.ops.get_char(n.tty)}catch{throw new p.ErrnoError(29)}if(w===void 0&&M===0)throw new p.ErrnoError(6);if(w==null)break;M++,s[u+b]=w}return M&&(n.node.timestamp=Date.now()),M},write:function(n,s,u,h,g){if(!n.tty||!n.tty.ops.put_char)throw new p.ErrnoError(60);try{for(var M=0;M<h;M++)n.tty.ops.put_char(n.tty,s[u+M])}catch{throw new p.ErrnoError(29)}return h&&(n.node.timestamp=Date.now()),M}},default_tty_ops:{get_char:function(n){if(!n.input.length){var s=null;if(_){var u=256,h=Buffer.alloc(u),g=0;try{g=F.readSync(process.stdin.fd,h,0,u,-1)}catch(M){if(M.toString().includes("EOF"))g=0;else throw M}g>0?s=h.slice(0,g).toString("utf-8"):s=null}else typeof window<"u"&&typeof window.prompt=="function"?(s=window.prompt("Input: "),s!==null&&(s+=`
`)):typeof readline=="function"&&(s=readline(),s!==null&&(s+=`
`));if(!s)return null;n.input=x0(s,!0)}return n.input.shift()},put_char:function(n,s){s===null||s===10?(J(e2(n.output,0)),n.output=[]):s!=0&&n.output.push(s)},fsync:function(n){n.output&&n.output.length>0&&(J(e2(n.output,0)),n.output=[])}},default_tty1_ops:{put_char:function(n,s){s===null||s===10?(Y(e2(n.output,0)),n.output=[]):s!=0&&n.output.push(s)},fsync:function(n){n.output&&n.output.length>0&&(Y(e2(n.output,0)),n.output=[])}}};function P6(n){f1()}var u2={ops_table:null,mount:function(n){return u2.createNode(null,"/",16895,0)},createNode:function(n,s,u,h){if(p.isBlkdev(u)||p.isFIFO(u))throw new p.ErrnoError(63);u2.ops_table||(u2.ops_table={dir:{node:{getattr:u2.node_ops.getattr,setattr:u2.node_ops.setattr,lookup:u2.node_ops.lookup,mknod:u2.node_ops.mknod,rename:u2.node_ops.rename,unlink:u2.node_ops.unlink,rmdir:u2.node_ops.rmdir,readdir:u2.node_ops.readdir,symlink:u2.node_ops.symlink},stream:{llseek:u2.stream_ops.llseek}},file:{node:{getattr:u2.node_ops.getattr,setattr:u2.node_ops.setattr},stream:{llseek:u2.stream_ops.llseek,read:u2.stream_ops.read,write:u2.stream_ops.write,allocate:u2.stream_ops.allocate,mmap:u2.stream_ops.mmap,msync:u2.stream_ops.msync}},link:{node:{getattr:u2.node_ops.getattr,setattr:u2.node_ops.setattr,readlink:u2.node_ops.readlink},stream:{}},chrdev:{node:{getattr:u2.node_ops.getattr,setattr:u2.node_ops.setattr},stream:p.chrdev_stream_ops}});var g=p.createNode(n,s,u,h);return p.isDir(g.mode)?(g.node_ops=u2.ops_table.dir.node,g.stream_ops=u2.ops_table.dir.stream,g.contents={}):p.isFile(g.mode)?(g.node_ops=u2.ops_table.file.node,g.stream_ops=u2.ops_table.file.stream,g.usedBytes=0,g.contents=null):p.isLink(g.mode)?(g.node_ops=u2.ops_table.link.node,g.stream_ops=u2.ops_table.link.stream):p.isChrdev(g.mode)&&(g.node_ops=u2.ops_table.chrdev.node,g.stream_ops=u2.ops_table.chrdev.stream),g.timestamp=Date.now(),n&&(n.contents[s]=g,n.timestamp=g.timestamp),g},getFileDataAsTypedArray:function(n){return n.contents?n.contents.subarray?n.contents.subarray(0,n.usedBytes):new Uint8Array(n.contents):new Uint8Array(0)},expandFileStorage:function(n,s){var u=n.contents?n.contents.length:0;if(!(u>=s)){var h=1024*1024;s=Math.max(s,u*(u<h?2:1.125)>>>0),u!=0&&(s=Math.max(s,256));var g=n.contents;n.contents=new Uint8Array(s),n.usedBytes>0&&n.contents.set(g.subarray(0,n.usedBytes),0)}},resizeFileStorage:function(n,s){if(n.usedBytes!=s)if(s==0)n.contents=null,n.usedBytes=0;else{var u=n.contents;n.contents=new Uint8Array(s),u&&n.contents.set(u.subarray(0,Math.min(s,n.usedBytes))),n.usedBytes=s}},node_ops:{getattr:function(n){var s={};return s.dev=p.isChrdev(n.mode)?n.id:1,s.ino=n.id,s.mode=n.mode,s.nlink=1,s.uid=0,s.gid=0,s.rdev=n.rdev,p.isDir(n.mode)?s.size=4096:p.isFile(n.mode)?s.size=n.usedBytes:p.isLink(n.mode)?s.size=n.link.length:s.size=0,s.atime=new Date(n.timestamp),s.mtime=new Date(n.timestamp),s.ctime=new Date(n.timestamp),s.blksize=4096,s.blocks=Math.ceil(s.size/s.blksize),s},setattr:function(n,s){s.mode!==void 0&&(n.mode=s.mode),s.timestamp!==void 0&&(n.timestamp=s.timestamp),s.size!==void 0&&u2.resizeFileStorage(n,s.size)},lookup:function(n,s){throw p.genericErrors[44]},mknod:function(n,s,u,h){return u2.createNode(n,s,u,h)},rename:function(n,s,u){if(p.isDir(n.mode)){var h;try{h=p.lookupNode(s,u)}catch{}if(h)for(var g in h.contents)throw new p.ErrnoError(55)}delete n.parent.contents[n.name],n.parent.timestamp=Date.now(),n.name=u,s.contents[u]=n,s.timestamp=n.parent.timestamp,n.parent=s},unlink:function(n,s){delete n.contents[s],n.timestamp=Date.now()},rmdir:function(n,s){var u=p.lookupNode(n,s);for(var h in u.contents)throw new p.ErrnoError(55);delete n.contents[s],n.timestamp=Date.now()},readdir:function(n){var s=[".",".."];for(var u in n.contents)n.contents.hasOwnProperty(u)&&s.push(u);return s},symlink:function(n,s,u){var h=u2.createNode(n,s,41471,0);return h.link=u,h},readlink:function(n){if(!p.isLink(n.mode))throw new p.ErrnoError(28);return n.link}},stream_ops:{read:function(n,s,u,h,g){var M=n.node.contents;if(g>=n.node.usedBytes)return 0;var b=Math.min(n.node.usedBytes-g,h);if(b>8&&M.subarray)s.set(M.subarray(g,g+b),u);else for(var w=0;w<b;w++)s[u+w]=M[g+w];return b},write:function(n,s,u,h,g,M){if(s.buffer===z.buffer&&(M=!1),!h)return 0;var b=n.node;if(b.timestamp=Date.now(),s.subarray&&(!b.contents||b.contents.subarray)){if(M)return b.contents=s.subarray(u,u+h),b.usedBytes=h,h;if(b.usedBytes===0&&g===0)return b.contents=s.slice(u,u+h),b.usedBytes=h,h;if(g+h<=b.usedBytes)return b.contents.set(s.subarray(u,u+h),g),h}if(u2.expandFileStorage(b,g+h),b.contents.subarray&&s.subarray)b.contents.set(s.subarray(u,u+h),g);else for(var w=0;w<h;w++)b.contents[g+w]=s[u+w];return b.usedBytes=Math.max(b.usedBytes,g+h),h},llseek:function(n,s,u){var h=s;if(u===1?h+=n.position:u===2&&p.isFile(n.node.mode)&&(h+=n.node.usedBytes),h<0)throw new p.ErrnoError(28);return h},allocate:function(n,s,u){u2.expandFileStorage(n.node,s+u),n.node.usedBytes=Math.max(n.node.usedBytes,s+u)},mmap:function(n,s,u,h,g){if(!p.isFile(n.node.mode))throw new p.ErrnoError(43);var M,b,w=n.node.contents;if(!(g&2)&&w.buffer===f)b=!1,M=w.byteOffset;else{if((u>0||u+s<w.length)&&(w.subarray?w=w.subarray(u,u+s):w=Array.prototype.slice.call(w,u,u+s)),b=!0,M=P6(s),!M)throw new p.ErrnoError(48);z.set(w,M)}return{ptr:M,allocated:b}},msync:function(n,s,u,h,g){return u2.stream_ops.write(n,s,0,h,u,!1),0}}};function ta(n,s,u,h){var g=h?"":"al "+n;V(n,M=>{V2(M,'Loading data file "'+n+'" failed (no arrayBuffer).'),s(new Uint8Array(M)),g&&M3(g)},M=>{if(u)u();else throw'Loading data file "'+n+'" failed.'}),g&&q1(g)}var p={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,lookupPath:(n,s={})=>{if(n=m1.resolve(n),!n)return{path:"",node:null};var u={follow_mount:!0,recurse_count:0};if(s=Object.assign(u,s),s.recurse_count>8)throw new p.ErrnoError(32);for(var h=n.split("/").filter(L2=>!!L2),g=p.root,M="/",b=0;b<h.length;b++){var w=b===h.length-1;if(w&&s.parent)break;if(g=p.lookupNode(g,h[b]),M=_2.join2(M,h[b]),p.isMountpoint(g)&&(!w||w&&s.follow_mount)&&(g=g.mounted.root),!w||s.follow)for(var G=0;p.isLink(g.mode);){var c2=p.readlink(M);M=m1.resolve(_2.dirname(M),c2);var h2=p.lookupPath(M,{recurse_count:s.recurse_count+1});if(g=h2.node,G++>40)throw new p.ErrnoError(32)}}return{path:M,node:g}},getPath:n=>{for(var s;;){if(p.isRoot(n)){var u=n.mount.mountpoint;return s?u[u.length-1]!=="/"?u+"/"+s:u+s:u}s=s?n.name+"/"+s:n.name,n=n.parent}},hashName:(n,s)=>{for(var u=0,h=0;h<s.length;h++)u=(u<<5)-u+s.charCodeAt(h)|0;return(n+u>>>0)%p.nameTable.length},hashAddNode:n=>{var s=p.hashName(n.parent.id,n.name);n.name_next=p.nameTable[s],p.nameTable[s]=n},hashRemoveNode:n=>{var s=p.hashName(n.parent.id,n.name);if(p.nameTable[s]===n)p.nameTable[s]=n.name_next;else for(var u=p.nameTable[s];u;){if(u.name_next===n){u.name_next=n.name_next;break}u=u.name_next}},lookupNode:(n,s)=>{var u=p.mayLookup(n);if(u)throw new p.ErrnoError(u,n);for(var h=p.hashName(n.id,s),g=p.nameTable[h];g;g=g.name_next){var M=g.name;if(g.parent.id===n.id&&M===s)return g}return p.lookup(n,s)},createNode:(n,s,u,h)=>{var g=new p.FSNode(n,s,u,h);return p.hashAddNode(g),g},destroyNode:n=>{p.hashRemoveNode(n)},isRoot:n=>n===n.parent,isMountpoint:n=>!!n.mounted,isFile:n=>(n&61440)===32768,isDir:n=>(n&61440)===16384,isLink:n=>(n&61440)===40960,isChrdev:n=>(n&61440)===8192,isBlkdev:n=>(n&61440)===24576,isFIFO:n=>(n&61440)===4096,isSocket:n=>(n&49152)===49152,flagModes:{r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},modeStringToFlags:n=>{var s=p.flagModes[n];if(typeof s>"u")throw new Error("Unknown file open mode: "+n);return s},flagsToPermissionString:n=>{var s=["r","w","rw"][n&3];return n&512&&(s+="w"),s},nodePermissions:(n,s)=>p.ignorePermissions?0:s.includes("r")&&!(n.mode&292)||s.includes("w")&&!(n.mode&146)||s.includes("x")&&!(n.mode&73)?2:0,mayLookup:n=>{var s=p.nodePermissions(n,"x");return s||(n.node_ops.lookup?0:2)},mayCreate:(n,s)=>{try{var u=p.lookupNode(n,s);return 20}catch{}return p.nodePermissions(n,"wx")},mayDelete:(n,s,u)=>{var h;try{h=p.lookupNode(n,s)}catch(M){return M.errno}var g=p.nodePermissions(n,"wx");if(g)return g;if(u){if(!p.isDir(h.mode))return 54;if(p.isRoot(h)||p.getPath(h)===p.cwd())return 10}else if(p.isDir(h.mode))return 31;return 0},mayOpen:(n,s)=>n?p.isLink(n.mode)?32:p.isDir(n.mode)&&(p.flagsToPermissionString(s)!=="r"||s&512)?31:p.nodePermissions(n,p.flagsToPermissionString(s)):44,MAX_OPEN_FDS:4096,nextfd:(n=0,s=p.MAX_OPEN_FDS)=>{for(var u=n;u<=s;u++)if(!p.streams[u])return u;throw new p.ErrnoError(33)},getStream:n=>p.streams[n],createStream:(n,s,u)=>{p.FSStream||(p.FSStream=function(){this.shared={}},p.FSStream.prototype={},Object.defineProperties(p.FSStream.prototype,{object:{get:function(){return this.node},set:function(g){this.node=g}},isRead:{get:function(){return(this.flags&2097155)!==1}},isWrite:{get:function(){return(this.flags&2097155)!==0}},isAppend:{get:function(){return this.flags&1024}},flags:{get:function(){return this.shared.flags},set:function(g){this.shared.flags=g}},position:{get:function(){return this.shared.position},set:function(g){this.shared.position=g}}})),n=Object.assign(new p.FSStream,n);var h=p.nextfd(s,u);return n.fd=h,p.streams[h]=n,n},closeStream:n=>{p.streams[n]=null},chrdev_stream_ops:{open:n=>{var s=p.getDevice(n.node.rdev);n.stream_ops=s.stream_ops,n.stream_ops.open&&n.stream_ops.open(n)},llseek:()=>{throw new p.ErrnoError(70)}},major:n=>n>>8,minor:n=>n&255,makedev:(n,s)=>n<<8|s,registerDevice:(n,s)=>{p.devices[n]={stream_ops:s}},getDevice:n=>p.devices[n],getMounts:n=>{for(var s=[],u=[n];u.length;){var h=u.pop();s.push(h),u.push.apply(u,h.mounts)}return s},syncfs:(n,s)=>{typeof n=="function"&&(s=n,n=!1),p.syncFSRequests++,p.syncFSRequests>1&&Y("warning: "+p.syncFSRequests+" FS.syncfs operations in flight at once, probably just doing extra work");var u=p.getMounts(p.root.mount),h=0;function g(b){return p.syncFSRequests--,s(b)}function M(b){if(b)return M.errored?void 0:(M.errored=!0,g(b));++h>=u.length&&g(null)}u.forEach(b=>{if(!b.type.syncfs)return M(null);b.type.syncfs(b,n,M)})},mount:(n,s,u)=>{var h=u==="/",g=!u,M;if(h&&p.root)throw new p.ErrnoError(10);if(!h&&!g){var b=p.lookupPath(u,{follow_mount:!1});if(u=b.path,M=b.node,p.isMountpoint(M))throw new p.ErrnoError(10);if(!p.isDir(M.mode))throw new p.ErrnoError(54)}var w={type:n,opts:s,mountpoint:u,mounts:[]},G=n.mount(w);return G.mount=w,w.root=G,h?p.root=G:M&&(M.mounted=w,M.mount&&M.mount.mounts.push(w)),G},unmount:n=>{var s=p.lookupPath(n,{follow_mount:!1});if(!p.isMountpoint(s.node))throw new p.ErrnoError(28);var u=s.node,h=u.mounted,g=p.getMounts(h);Object.keys(p.nameTable).forEach(b=>{for(var w=p.nameTable[b];w;){var G=w.name_next;g.includes(w.mount)&&p.destroyNode(w),w=G}}),u.mounted=null;var M=u.mount.mounts.indexOf(h);u.mount.mounts.splice(M,1)},lookup:(n,s)=>n.node_ops.lookup(n,s),mknod:(n,s,u)=>{var h=p.lookupPath(n,{parent:!0}),g=h.node,M=_2.basename(n);if(!M||M==="."||M==="..")throw new p.ErrnoError(28);var b=p.mayCreate(g,M);if(b)throw new p.ErrnoError(b);if(!g.node_ops.mknod)throw new p.ErrnoError(63);return g.node_ops.mknod(g,M,s,u)},create:(n,s)=>(s=s!==void 0?s:438,s&=4095,s|=32768,p.mknod(n,s,0)),mkdir:(n,s)=>(s=s!==void 0?s:511,s&=1023,s|=16384,p.mknod(n,s,0)),mkdirTree:(n,s)=>{for(var u=n.split("/"),h="",g=0;g<u.length;++g)if(u[g]){h+="/"+u[g];try{p.mkdir(h,s)}catch(M){if(M.errno!=20)throw M}}},mkdev:(n,s,u)=>(typeof u>"u"&&(u=s,s=438),s|=8192,p.mknod(n,s,u)),symlink:(n,s)=>{if(!m1.resolve(n))throw new p.ErrnoError(44);var u=p.lookupPath(s,{parent:!0}),h=u.node;if(!h)throw new p.ErrnoError(44);var g=_2.basename(s),M=p.mayCreate(h,g);if(M)throw new p.ErrnoError(M);if(!h.node_ops.symlink)throw new p.ErrnoError(63);return h.node_ops.symlink(h,g,n)},rename:(n,s)=>{var u=_2.dirname(n),h=_2.dirname(s),g=_2.basename(n),M=_2.basename(s),b,w,G;if(b=p.lookupPath(n,{parent:!0}),w=b.node,b=p.lookupPath(s,{parent:!0}),G=b.node,!w||!G)throw new p.ErrnoError(44);if(w.mount!==G.mount)throw new p.ErrnoError(75);var c2=p.lookupNode(w,g),h2=m1.relative(n,h);if(h2.charAt(0)!==".")throw new p.ErrnoError(28);if(h2=m1.relative(s,u),h2.charAt(0)!==".")throw new p.ErrnoError(55);var L2;try{L2=p.lookupNode(G,M)}catch{}if(c2!==L2){var l2=p.isDir(c2.mode),t2=p.mayDelete(w,g,l2);if(t2)throw new p.ErrnoError(t2);if(t2=L2?p.mayDelete(G,M,l2):p.mayCreate(G,M),t2)throw new p.ErrnoError(t2);if(!w.node_ops.rename)throw new p.ErrnoError(63);if(p.isMountpoint(c2)||L2&&p.isMountpoint(L2))throw new p.ErrnoError(10);if(G!==w&&(t2=p.nodePermissions(w,"w"),t2))throw new p.ErrnoError(t2);p.hashRemoveNode(c2);try{w.node_ops.rename(c2,G,M)}catch(v2){throw v2}finally{p.hashAddNode(c2)}}},rmdir:n=>{var s=p.lookupPath(n,{parent:!0}),u=s.node,h=_2.basename(n),g=p.lookupNode(u,h),M=p.mayDelete(u,h,!0);if(M)throw new p.ErrnoError(M);if(!u.node_ops.rmdir)throw new p.ErrnoError(63);if(p.isMountpoint(g))throw new p.ErrnoError(10);u.node_ops.rmdir(u,h),p.destroyNode(g)},readdir:n=>{var s=p.lookupPath(n,{follow:!0}),u=s.node;if(!u.node_ops.readdir)throw new p.ErrnoError(54);return u.node_ops.readdir(u)},unlink:n=>{var s=p.lookupPath(n,{parent:!0}),u=s.node;if(!u)throw new p.ErrnoError(44);var h=_2.basename(n),g=p.lookupNode(u,h),M=p.mayDelete(u,h,!1);if(M)throw new p.ErrnoError(M);if(!u.node_ops.unlink)throw new p.ErrnoError(63);if(p.isMountpoint(g))throw new p.ErrnoError(10);u.node_ops.unlink(u,h),p.destroyNode(g)},readlink:n=>{var s=p.lookupPath(n),u=s.node;if(!u)throw new p.ErrnoError(44);if(!u.node_ops.readlink)throw new p.ErrnoError(28);return m1.resolve(p.getPath(u.parent),u.node_ops.readlink(u))},stat:(n,s)=>{var u=p.lookupPath(n,{follow:!s}),h=u.node;if(!h)throw new p.ErrnoError(44);if(!h.node_ops.getattr)throw new p.ErrnoError(63);return h.node_ops.getattr(h)},lstat:n=>p.stat(n,!0),chmod:(n,s,u)=>{var h;if(typeof n=="string"){var g=p.lookupPath(n,{follow:!u});h=g.node}else h=n;if(!h.node_ops.setattr)throw new p.ErrnoError(63);h.node_ops.setattr(h,{mode:s&4095|h.mode&-4096,timestamp:Date.now()})},lchmod:(n,s)=>{p.chmod(n,s,!0)},fchmod:(n,s)=>{var u=p.getStream(n);if(!u)throw new p.ErrnoError(8);p.chmod(u.node,s)},chown:(n,s,u,h)=>{var g;if(typeof n=="string"){var M=p.lookupPath(n,{follow:!h});g=M.node}else g=n;if(!g.node_ops.setattr)throw new p.ErrnoError(63);g.node_ops.setattr(g,{timestamp:Date.now()})},lchown:(n,s,u)=>{p.chown(n,s,u,!0)},fchown:(n,s,u)=>{var h=p.getStream(n);if(!h)throw new p.ErrnoError(8);p.chown(h.node,s,u)},truncate:(n,s)=>{if(s<0)throw new p.ErrnoError(28);var u;if(typeof n=="string"){var h=p.lookupPath(n,{follow:!0});u=h.node}else u=n;if(!u.node_ops.setattr)throw new p.ErrnoError(63);if(p.isDir(u.mode))throw new p.ErrnoError(31);if(!p.isFile(u.mode))throw new p.ErrnoError(28);var g=p.nodePermissions(u,"w");if(g)throw new p.ErrnoError(g);u.node_ops.setattr(u,{size:s,timestamp:Date.now()})},ftruncate:(n,s)=>{var u=p.getStream(n);if(!u)throw new p.ErrnoError(8);if((u.flags&2097155)===0)throw new p.ErrnoError(28);p.truncate(u.node,s)},utime:(n,s,u)=>{var h=p.lookupPath(n,{follow:!0}),g=h.node;g.node_ops.setattr(g,{timestamp:Math.max(s,u)})},open:(n,s,u)=>{if(n==="")throw new p.ErrnoError(44);s=typeof s=="string"?p.modeStringToFlags(s):s,u=typeof u>"u"?438:u,s&64?u=u&4095|32768:u=0;var h;if(typeof n=="object")h=n;else{n=_2.normalize(n);try{var g=p.lookupPath(n,{follow:!(s&131072)});h=g.node}catch{}}var M=!1;if(s&64)if(h){if(s&128)throw new p.ErrnoError(20)}else h=p.mknod(n,u,0),M=!0;if(!h)throw new p.ErrnoError(44);if(p.isChrdev(h.mode)&&(s&=-513),s&65536&&!p.isDir(h.mode))throw new p.ErrnoError(54);if(!M){var b=p.mayOpen(h,s);if(b)throw new p.ErrnoError(b)}s&512&&!M&&p.truncate(h,0),s&=-131713;var w=p.createStream({node:h,path:p.getPath(h),flags:s,seekable:!0,position:0,stream_ops:h.stream_ops,ungotten:[],error:!1});return w.stream_ops.open&&w.stream_ops.open(w),e.logReadFiles&&!(s&1)&&(p.readFiles||(p.readFiles={}),n in p.readFiles||(p.readFiles[n]=1)),w},close:n=>{if(p.isClosed(n))throw new p.ErrnoError(8);n.getdents&&(n.getdents=null);try{n.stream_ops.close&&n.stream_ops.close(n)}catch(s){throw s}finally{p.closeStream(n.fd)}n.fd=null},isClosed:n=>n.fd===null,llseek:(n,s,u)=>{if(p.isClosed(n))throw new p.ErrnoError(8);if(!n.seekable||!n.stream_ops.llseek)throw new p.ErrnoError(70);if(u!=0&&u!=1&&u!=2)throw new p.ErrnoError(28);return n.position=n.stream_ops.llseek(n,s,u),n.ungotten=[],n.position},read:(n,s,u,h,g)=>{if(h<0||g<0)throw new p.ErrnoError(28);if(p.isClosed(n))throw new p.ErrnoError(8);if((n.flags&2097155)===1)throw new p.ErrnoError(8);if(p.isDir(n.node.mode))throw new p.ErrnoError(31);if(!n.stream_ops.read)throw new p.ErrnoError(28);var M=typeof g<"u";if(!M)g=n.position;else if(!n.seekable)throw new p.ErrnoError(70);var b=n.stream_ops.read(n,s,u,h,g);return M||(n.position+=b),b},write:(n,s,u,h,g,M)=>{if(h<0||g<0)throw new p.ErrnoError(28);if(p.isClosed(n))throw new p.ErrnoError(8);if((n.flags&2097155)===0)throw new p.ErrnoError(8);if(p.isDir(n.node.mode))throw new p.ErrnoError(31);if(!n.stream_ops.write)throw new p.ErrnoError(28);n.seekable&&n.flags&1024&&p.llseek(n,0,2);var b=typeof g<"u";if(!b)g=n.position;else if(!n.seekable)throw new p.ErrnoError(70);var w=n.stream_ops.write(n,s,u,h,g,M);return b||(n.position+=w),w},allocate:(n,s,u)=>{if(p.isClosed(n))throw new p.ErrnoError(8);if(s<0||u<=0)throw new p.ErrnoError(28);if((n.flags&2097155)===0)throw new p.ErrnoError(8);if(!p.isFile(n.node.mode)&&!p.isDir(n.node.mode))throw new p.ErrnoError(43);if(!n.stream_ops.allocate)throw new p.ErrnoError(138);n.stream_ops.allocate(n,s,u)},mmap:(n,s,u,h,g)=>{if((h&2)!==0&&(g&2)===0&&(n.flags&2097155)!==2)throw new p.ErrnoError(2);if((n.flags&2097155)===1)throw new p.ErrnoError(2);if(!n.stream_ops.mmap)throw new p.ErrnoError(43);return n.stream_ops.mmap(n,s,u,h,g)},msync:(n,s,u,h,g)=>n.stream_ops.msync?n.stream_ops.msync(n,s,u,h,g):0,munmap:n=>0,ioctl:(n,s,u)=>{if(!n.stream_ops.ioctl)throw new p.ErrnoError(59);return n.stream_ops.ioctl(n,s,u)},readFile:(n,s={})=>{if(s.flags=s.flags||0,s.encoding=s.encoding||"binary",s.encoding!=="utf8"&&s.encoding!=="binary")throw new Error('Invalid encoding type "'+s.encoding+'"');var u,h=p.open(n,s.flags),g=p.stat(n),M=g.size,b=new Uint8Array(M);return p.read(h,b,0,M,0),s.encoding==="utf8"?u=e2(b,0):s.encoding==="binary"&&(u=b),p.close(h),u},writeFile:(n,s,u={})=>{u.flags=u.flags||577;var h=p.open(n,u.flags,u.mode);if(typeof s=="string"){var g=new Uint8Array(D(s)+1),M=d2(s,g,0,g.length);p.write(h,g,0,M,void 0,u.canOwn)}else if(ArrayBuffer.isView(s))p.write(h,s,0,s.byteLength,void 0,u.canOwn);else throw new Error("Unsupported data type");p.close(h)},cwd:()=>p.currentPath,chdir:n=>{var s=p.lookupPath(n,{follow:!0});if(s.node===null)throw new p.ErrnoError(44);if(!p.isDir(s.node.mode))throw new p.ErrnoError(54);var u=p.nodePermissions(s.node,"x");if(u)throw new p.ErrnoError(u);p.currentPath=s.path},createDefaultDirectories:()=>{p.mkdir("/tmp"),p.mkdir("/home"),p.mkdir("/home/web_user")},createDefaultDevices:()=>{p.mkdir("/dev"),p.registerDevice(p.makedev(1,3),{read:()=>0,write:(s,u,h,g,M)=>g}),p.mkdev("/dev/null",p.makedev(1,3)),b1.register(p.makedev(5,0),b1.default_tty_ops),b1.register(p.makedev(6,0),b1.default_tty1_ops),p.mkdev("/dev/tty",p.makedev(5,0)),p.mkdev("/dev/tty1",p.makedev(6,0));var n=ea();p.createDevice("/dev","random",n),p.createDevice("/dev","urandom",n),p.mkdir("/dev/shm"),p.mkdir("/dev/shm/tmp")},createSpecialDirectories:()=>{p.mkdir("/proc");var n=p.mkdir("/proc/self");p.mkdir("/proc/self/fd"),p.mount({mount:()=>{var s=p.createNode(n,"fd",16895,73);return s.node_ops={lookup:(u,h)=>{var g=+h,M=p.getStream(g);if(!M)throw new p.ErrnoError(8);var b={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:()=>M.path}};return b.parent=b,b}},s}},{},"/proc/self/fd")},createStandardStreams:()=>{e.stdin?p.createDevice("/dev","stdin",e.stdin):p.symlink("/dev/tty","/dev/stdin"),e.stdout?p.createDevice("/dev","stdout",null,e.stdout):p.symlink("/dev/tty","/dev/stdout"),e.stderr?p.createDevice("/dev","stderr",null,e.stderr):p.symlink("/dev/tty1","/dev/stderr");var n=p.open("/dev/stdin",0),s=p.open("/dev/stdout",1),u=p.open("/dev/stderr",1)},ensureErrnoError:()=>{p.ErrnoError||(p.ErrnoError=function(s,u){this.node=u,this.setErrno=function(h){this.errno=h},this.setErrno(s),this.message="FS error"},p.ErrnoError.prototype=new Error,p.ErrnoError.prototype.constructor=p.ErrnoError,[44].forEach(n=>{p.genericErrors[n]=new p.ErrnoError(n),p.genericErrors[n].stack="<generic error, no stack>"}))},staticInit:()=>{p.ensureErrnoError(),p.nameTable=new Array(4096),p.mount(u2,{},"/"),p.createDefaultDirectories(),p.createDefaultDevices(),p.createSpecialDirectories(),p.filesystems={MEMFS:u2}},init:(n,s,u)=>{p.init.initialized=!0,p.ensureErrnoError(),e.stdin=n||e.stdin,e.stdout=s||e.stdout,e.stderr=u||e.stderr,p.createStandardStreams()},quit:()=>{p.init.initialized=!1;for(var n=0;n<p.streams.length;n++){var s=p.streams[n];s&&p.close(s)}},getMode:(n,s)=>{var u=0;return n&&(u|=365),s&&(u|=146),u},findObject:(n,s)=>{var u=p.analyzePath(n,s);return u.exists?u.object:null},analyzePath:(n,s)=>{try{var u=p.lookupPath(n,{follow:!s});n=u.path}catch{}var h={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var u=p.lookupPath(n,{parent:!0});h.parentExists=!0,h.parentPath=u.path,h.parentObject=u.node,h.name=_2.basename(n),u=p.lookupPath(n,{follow:!s}),h.exists=!0,h.path=u.path,h.object=u.node,h.name=u.node.name,h.isRoot=u.path==="/"}catch(g){h.error=g.errno}return h},createPath:(n,s,u,h)=>{n=typeof n=="string"?n:p.getPath(n);for(var g=s.split("/").reverse();g.length;){var M=g.pop();if(M){var b=_2.join2(n,M);try{p.mkdir(b)}catch{}n=b}}return b},createFile:(n,s,u,h,g)=>{var M=_2.join2(typeof n=="string"?n:p.getPath(n),s),b=p.getMode(h,g);return p.create(M,b)},createDataFile:(n,s,u,h,g,M)=>{var b=s;n&&(n=typeof n=="string"?n:p.getPath(n),b=s?_2.join2(n,s):n);var w=p.getMode(h,g),G=p.create(b,w);if(u){if(typeof u=="string"){for(var c2=new Array(u.length),h2=0,L2=u.length;h2<L2;++h2)c2[h2]=u.charCodeAt(h2);u=c2}p.chmod(G,w|146);var l2=p.open(G,577);p.write(l2,u,0,u.length,0,M),p.close(l2),p.chmod(G,w)}return G},createDevice:(n,s,u,h)=>{var g=_2.join2(typeof n=="string"?n:p.getPath(n),s),M=p.getMode(!!u,!!h);p.createDevice.major||(p.createDevice.major=64);var b=p.makedev(p.createDevice.major++,0);return p.registerDevice(b,{open:w=>{w.seekable=!1},close:w=>{h&&h.buffer&&h.buffer.length&&h(10)},read:(w,G,c2,h2,L2)=>{for(var l2=0,t2=0;t2<h2;t2++){var v2;try{v2=u()}catch{throw new p.ErrnoError(29)}if(v2===void 0&&l2===0)throw new p.ErrnoError(6);if(v2==null)break;l2++,G[c2+t2]=v2}return l2&&(w.node.timestamp=Date.now()),l2},write:(w,G,c2,h2,L2)=>{for(var l2=0;l2<h2;l2++)try{h(G[c2+l2])}catch{throw new p.ErrnoError(29)}return h2&&(w.node.timestamp=Date.now()),l2}}),p.mkdev(g,M,b)},forceLoadFile:n=>{if(n.isDevice||n.isFolder||n.link||n.contents)return!0;if(typeof XMLHttpRequest<"u")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(S)try{n.contents=x0(S(n.url),!0),n.usedBytes=n.contents.length}catch{throw new p.ErrnoError(29)}else throw new Error("Cannot load without read() or XMLHttpRequest.")},createLazyFile:(n,s,u,h,g)=>{function M(){this.lengthKnown=!1,this.chunks=[]}if(M.prototype.get=function(t2){if(!(t2>this.length-1||t2<0)){var v2=t2%this.chunkSize,B2=t2/this.chunkSize|0;return this.getter(B2)[v2]}},M.prototype.setDataGetter=function(t2){this.getter=t2},M.prototype.cacheLength=function(){var t2=new XMLHttpRequest;if(t2.open("HEAD",u,!1),t2.send(null),!(t2.status>=200&&t2.status<300||t2.status===304))throw new Error("Couldn't load "+u+". Status: "+t2.status);var v2=Number(t2.getResponseHeader("Content-length")),B2,h1=(B2=t2.getResponseHeader("Accept-Ranges"))&&B2==="bytes",i1=(B2=t2.getResponseHeader("Content-Encoding"))&&B2==="gzip",l1=1024*1024;h1||(l1=v2);var o1=(u1,o4)=>{if(u1>o4)throw new Error("invalid range ("+u1+", "+o4+") or no bytes requested!");if(o4>v2-1)throw new Error("only "+v2+" bytes available! programmer error!");var O2=new XMLHttpRequest;if(O2.open("GET",u,!1),v2!==l1&&O2.setRequestHeader("Range","bytes="+u1+"-"+o4),O2.responseType="arraybuffer",O2.overrideMimeType&&O2.overrideMimeType("text/plain; charset=x-user-defined"),O2.send(null),!(O2.status>=200&&O2.status<300||O2.status===304))throw new Error("Couldn't load "+u+". Status: "+O2.status);return O2.response!==void 0?new Uint8Array(O2.response||[]):x0(O2.responseText||"",!0)},F4=this;F4.setDataGetter(u1=>{var o4=u1*l1,O2=(u1+1)*l1-1;if(O2=Math.min(O2,v2-1),typeof F4.chunks[u1]>"u"&&(F4.chunks[u1]=o1(o4,O2)),typeof F4.chunks[u1]>"u")throw new Error("doXHR failed!");return F4.chunks[u1]}),(i1||!v2)&&(l1=v2=1,v2=this.getter(0).length,l1=v2,J("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=v2,this._chunkSize=l1,this.lengthKnown=!0},typeof XMLHttpRequest<"u"){if(!v)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var b=new M;Object.defineProperties(b,{length:{get:function(){return this.lengthKnown||this.cacheLength(),this._length}},chunkSize:{get:function(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}});var w={isDevice:!1,contents:b}}else var w={isDevice:!1,url:u};var G=p.createFile(n,s,w,h,g);w.contents?G.contents=w.contents:w.url&&(G.contents=null,G.url=w.url),Object.defineProperties(G,{usedBytes:{get:function(){return this.contents.length}}});var c2={},h2=Object.keys(G.stream_ops);h2.forEach(l2=>{var t2=G.stream_ops[l2];c2[l2]=function(){return p.forceLoadFile(G),t2.apply(null,arguments)}});function L2(l2,t2,v2,B2,h1){var i1=l2.node.contents;if(h1>=i1.length)return 0;var l1=Math.min(i1.length-h1,B2);if(i1.slice)for(var o1=0;o1<l1;o1++)t2[v2+o1]=i1[h1+o1];else for(var o1=0;o1<l1;o1++)t2[v2+o1]=i1.get(h1+o1);return l1}return c2.read=(l2,t2,v2,B2,h1)=>(p.forceLoadFile(G),L2(l2,t2,v2,B2,h1)),c2.mmap=(l2,t2,v2,B2,h1)=>{p.forceLoadFile(G);var i1=P6(t2);if(!i1)throw new p.ErrnoError(48);return L2(l2,z,i1,t2,v2),{ptr:i1,allocated:!0}},G.stream_ops=c2,G},createPreloadedFile:(n,s,u,h,g,M,b,w,G,c2)=>{var h2=s?m1.resolve(_2.join2(n,s)):n,L2="cp "+h2;function l2(t2){function v2(B2){c2&&c2(),w||p.createDataFile(n,s,B2,h,g,G),M&&M(),M3(L2)}Browser.handledByPreloadPlugin(t2,h2,v2,()=>{b&&b(),M3(L2)})||v2(t2)}q1(L2),typeof u=="string"?ta(u,t2=>l2(t2),b):l2(u)},indexedDB:()=>window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB,DB_NAME:()=>"EM_FS_"+window.location.pathname,DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:(n,s,u)=>{s=s||(()=>{}),u=u||(()=>{});var h=p.indexedDB();try{var g=h.open(p.DB_NAME(),p.DB_VERSION)}catch(M){return u(M)}g.onupgradeneeded=()=>{J("creating db");var M=g.result;M.createObjectStore(p.DB_STORE_NAME)},g.onsuccess=()=>{var M=g.result,b=M.transaction([p.DB_STORE_NAME],"readwrite"),w=b.objectStore(p.DB_STORE_NAME),G=0,c2=0,h2=n.length;function L2(){c2==0?s():u()}n.forEach(l2=>{var t2=w.put(p.analyzePath(l2).object.contents,l2);t2.onsuccess=()=>{G++,G+c2==h2&&L2()},t2.onerror=()=>{c2++,G+c2==h2&&L2()}}),b.onerror=u},g.onerror=u},loadFilesFromDB:(n,s,u)=>{s=s||(()=>{}),u=u||(()=>{});var h=p.indexedDB();try{var g=h.open(p.DB_NAME(),p.DB_VERSION)}catch(M){return u(M)}g.onupgradeneeded=u,g.onsuccess=()=>{var M=g.result;try{var b=M.transaction([p.DB_STORE_NAME],"readonly")}catch(l2){u(l2);return}var w=b.objectStore(p.DB_STORE_NAME),G=0,c2=0,h2=n.length;function L2(){c2==0?s():u()}n.forEach(l2=>{var t2=w.get(l2);t2.onsuccess=()=>{p.analyzePath(l2).exists&&p.unlink(l2),p.createDataFile(_2.dirname(l2),_2.basename(l2),t2.result,!0,!0,!0),G++,G+c2==h2&&L2()},t2.onerror=()=>{c2++,G+c2==h2&&L2()}}),b.onerror=u},g.onerror=u}},k2={DEFAULT_POLLMASK:5,calculateAt:function(n,s,u){if(_2.isAbs(s))return s;var h;if(n===-100)h=p.cwd();else{var g=k2.getStreamFromFD(n);h=g.path}if(s.length==0){if(!u)throw new p.ErrnoError(44);return h}return _2.join2(h,s)},doStat:function(n,s,u){try{var h=n(s)}catch(w){if(w&&w.node&&_2.normalize(s)!==_2.normalize(p.getPath(w.node)))return-54;throw w}H[u>>2]=h.dev,H[u+8>>2]=h.ino,H[u+12>>2]=h.mode,A[u+16>>2]=h.nlink,H[u+20>>2]=h.uid,H[u+24>>2]=h.gid,H[u+28>>2]=h.rdev,N2=[h.size>>>0,(f2=h.size,+Math.abs(f2)>=1?f2>0?(Math.min(+Math.floor(f2/4294967296),4294967295)|0)>>>0:~~+Math.ceil((f2-+(~~f2>>>0))/4294967296)>>>0:0)],H[u+40>>2]=N2[0],H[u+44>>2]=N2[1],H[u+48>>2]=4096,H[u+52>>2]=h.blocks;var g=h.atime.getTime(),M=h.mtime.getTime(),b=h.ctime.getTime();return N2=[Math.floor(g/1e3)>>>0,(f2=Math.floor(g/1e3),+Math.abs(f2)>=1?f2>0?(Math.min(+Math.floor(f2/4294967296),4294967295)|0)>>>0:~~+Math.ceil((f2-+(~~f2>>>0))/4294967296)>>>0:0)],H[u+56>>2]=N2[0],H[u+60>>2]=N2[1],A[u+64>>2]=g%1e3*1e3,N2=[Math.floor(M/1e3)>>>0,(f2=Math.floor(M/1e3),+Math.abs(f2)>=1?f2>0?(Math.min(+Math.floor(f2/4294967296),4294967295)|0)>>>0:~~+Math.ceil((f2-+(~~f2>>>0))/4294967296)>>>0:0)],H[u+72>>2]=N2[0],H[u+76>>2]=N2[1],A[u+80>>2]=M%1e3*1e3,N2=[Math.floor(b/1e3)>>>0,(f2=Math.floor(b/1e3),+Math.abs(f2)>=1?f2>0?(Math.min(+Math.floor(f2/4294967296),4294967295)|0)>>>0:~~+Math.ceil((f2-+(~~f2>>>0))/4294967296)>>>0:0)],H[u+88>>2]=N2[0],H[u+92>>2]=N2[1],A[u+96>>2]=b%1e3*1e3,N2=[h.ino>>>0,(f2=h.ino,+Math.abs(f2)>=1?f2>0?(Math.min(+Math.floor(f2/4294967296),4294967295)|0)>>>0:~~+Math.ceil((f2-+(~~f2>>>0))/4294967296)>>>0:0)],H[u+104>>2]=N2[0],H[u+108>>2]=N2[1],0},doMsync:function(n,s,u,h,g){if(!p.isFile(s.node.mode))throw new p.ErrnoError(43);if(h&2)return 0;var M=C.slice(n,n+u);p.msync(s,M,g,u,h)},varargs:void 0,get:function(){k2.varargs+=4;var n=H[k2.varargs-4>>2];return n},getStr:function(n){var s=o2(n);return s},getStreamFromFD:function(n){var s=p.getStream(n);if(!s)throw new p.ErrnoError(8);return s}};function aa(n,s,u){k2.varargs=u;try{var h=k2.getStreamFromFD(n);switch(s){case 0:{var g=k2.get();if(g<0)return-28;var M;return M=p.createStream(h,g),M.fd}case 1:case 2:return 0;case 3:return h.flags;case 4:{var g=k2.get();return h.flags|=g,0}case 5:{var g=k2.get(),b=0;return j[g+b>>1]=2,0}case 6:case 7:return 0;case 16:case 8:return-28;case 9:return Qt(28),-1;default:return-28}}catch(w){if(typeof p>"u"||!(w instanceof p.ErrnoError))throw w;return-w.errno}}function ra(n,s,u){k2.varargs=u;try{var h=k2.getStreamFromFD(n);switch(s){case 21509:case 21505:return h.tty?0:-59;case 21510:case 21511:case 21512:case 21506:case 21507:case 21508:return h.tty?0:-59;case 21519:{if(!h.tty)return-59;var g=k2.get();return H[g>>2]=0,0}case 21520:return h.tty?-28:-59;case 21531:{var g=k2.get();return p.ioctl(h,s,g)}case 21523:return h.tty?0:-59;case 21524:return h.tty?0:-59;default:return-28}}catch(M){if(typeof p>"u"||!(M instanceof p.ErrnoError))throw M;return-M.errno}}function ca(n,s,u,h){k2.varargs=h;try{s=k2.getStr(s),s=k2.calculateAt(n,s);var g=h?k2.get():0;return p.open(s,u,g).fd}catch(M){if(typeof p>"u"||!(M instanceof p.ErrnoError))throw M;return-M.errno}}function na(){throw 1/0}function ia(n){return A[n>>2]+H[n+4>>2]*4294967296}function la(n,s){var u=new Date(ia(n)*1e3);H[s>>2]=u.getUTCSeconds(),H[s+4>>2]=u.getUTCMinutes(),H[s+8>>2]=u.getUTCHours(),H[s+12>>2]=u.getUTCDate(),H[s+16>>2]=u.getUTCMonth(),H[s+20>>2]=u.getUTCFullYear()-1900,H[s+24>>2]=u.getUTCDay();var h=Date.UTC(u.getUTCFullYear(),0,1,0,0,0,0),g=(u.getTime()-h)/(1e3*60*60*24)|0;H[s+28>>2]=g}function B6(n){var s=D(n)+1,u=H6(s);return u&&d2(n,z,u,s),u}function oa(n,s,u){var h=new Date().getFullYear(),g=new Date(h,0,1),M=new Date(h,6,1),b=g.getTimezoneOffset(),w=M.getTimezoneOffset(),G=Math.max(b,w);A[n>>2]=G*60,H[s>>2]=+(b!=w);function c2(v2){var B2=v2.toTimeString().match(/\(([A-Za-z ]+)\)$/);return B2?B2[1]:"GMT"}var h2=c2(g),L2=c2(M),l2=B6(h2),t2=B6(L2);w<b?(A[u>>2]=l2,A[u+4>>2]=t2):(A[u>>2]=t2,A[u+4>>2]=l2)}function sa(){f1("")}function fa(){return Date.now()}function ua(n,s,u){C.copyWithin(n,s,s+u)}function da(){return 2147483648}function pa(n){try{return y2.grow(n-f.byteLength+65535>>>16),U(y2.buffer),1}catch{}}function ma(n){var s=C.length;n=n>>>0;var u=da();if(n>u)return!1;let h=(G,c2)=>G+(c2-G%c2)%c2;for(var g=1;g<=4;g*=2){var M=s*(1+.2/g);M=Math.min(M,n+100663296);var b=Math.min(u,h(Math.max(n,M),65536)),w=pa(b);if(w)return!0}return!1}function ha(n){try{var s=k2.getStreamFromFD(n);return p.close(s),0}catch(u){if(typeof p>"u"||!(u instanceof p.ErrnoError))throw u;return u.errno}}function ga(n,s,u,h){for(var g=0,M=0;M<u;M++){var b=A[s>>2],w=A[s+4>>2];s+=8;var G=p.read(n,z,b,w,h);if(G<0)return-1;if(g+=G,G<w)break}return g}function va(n,s,u,h){try{var g=k2.getStreamFromFD(n),M=ga(g,s,u);return A[h>>2]=M,0}catch(b){if(typeof p>"u"||!(b instanceof p.ErrnoError))throw b;return b.errno}}function za(n,s){return s+2097152>>>0<4194305-!!n?(n>>>0)+s*4294967296:NaN}function Ma(n,s,u,h,g){try{var M=za(s,u);if(isNaN(M))return 61;var b=k2.getStreamFromFD(n);return p.llseek(b,M,h),N2=[b.position>>>0,(f2=b.position,+Math.abs(f2)>=1?f2>0?(Math.min(+Math.floor(f2/4294967296),4294967295)|0)>>>0:~~+Math.ceil((f2-+(~~f2>>>0))/4294967296)>>>0:0)],H[g>>2]=N2[0],H[g+4>>2]=N2[1],b.getdents&&M===0&&h===0&&(b.getdents=null),0}catch(w){if(typeof p>"u"||!(w instanceof p.ErrnoError))throw w;return w.errno}}function La(n,s,u,h){for(var g=0,M=0;M<u;M++){var b=A[s>>2],w=A[s+4>>2];s+=8;var G=p.write(n,z,b,w,h);if(G<0)return-1;g+=G}return g}function _a(n,s,u,h){try{var g=k2.getStreamFromFD(n),M=La(g,s,u);return A[h>>2]=M,0}catch(b){if(typeof p>"u"||!(b instanceof p.ErrnoError))throw b;return b.errno}}var I4=[];function q2(n){var s=I4[n];return s||(n>=I4.length&&(I4.length=n+1),I4[n]=s=K.get(n)),s}function O6(n,s){n<128?s.push(n):s.push(n%128|128,n>>7)}function ya(n){for(var s={i:"i32",j:"i32",f:"f32",d:"f64",p:"i32"},u={parameters:[],results:n[0]=="v"?[]:[s[n[0]]]},h=1;h<n.length;++h)u.parameters.push(s[n[h]]),n[h]==="j"&&u.parameters.push("i32");return u}function ba(n,s){var u=n.slice(0,1),h=n.slice(1),g={i:127,p:127,j:126,f:125,d:124};s.push(96),O6(h.length,s);for(var M=0;M<h.length;++M)s.push(g[h[M]]);u=="v"?s.push(0):s.push(1,g[u])}function Ca(n,s){if(typeof WebAssembly.Function=="function")return new WebAssembly.Function(ya(s),n);var u=[1];ba(s,u);var h=[0,97,115,109,1,0,0,0,1];O6(u.length,h),h.push.apply(h,u),h.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0);var g=new WebAssembly.Module(new Uint8Array(h)),M=new WebAssembly.Instance(g,{e:{f:n}}),b=M.exports.f;return b}function Sa(n,s){if(C1)for(var u=n;u<n+s;u++){var h=q2(u);h&&C1.set(h,u)}}var C1=void 0,N0=[];function wa(){if(N0.length)return N0.pop();try{K.grow(1)}catch(n){throw n instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":n}return K.length-1}function U6(n,s){K.set(n,s),I4[n]=K.get(n)}function xa(n,s){if(C1||(C1=new WeakMap,Sa(0,K.length)),C1.has(n))return C1.get(n);var u=wa();try{U6(u,n)}catch(g){if(!(g instanceof TypeError))throw g;var h=Ca(n,s);U6(u,h)}return C1.set(n,u),u}function Na(n){C1.delete(q2(n)),N0.push(n)}var j6=function(n,s,u,h){n||(n=this),this.parent=n,this.mount=n.mount,this.mounted=null,this.id=p.nextInode++,this.name=s,this.mode=u,this.node_ops={},this.stream_ops={},this.rdev=h},_3=365,y3=146;Object.defineProperties(j6.prototype,{read:{get:function(){return(this.mode&_3)===_3},set:function(n){n?this.mode|=_3:this.mode&=~_3}},write:{get:function(){return(this.mode&y3)===y3},set:function(n){n?this.mode|=y3:this.mode&=~y3}},isFolder:{get:function(){return p.isDir(this.mode)}},isDevice:{get:function(){return p.isChrdev(this.mode)}}}),p.FSNode=j6,p.staticInit();var Da={i:Zt,q:aa,x:ra,y:ca,u:na,z:la,A:oa,j:sa,r:fa,B:ua,v:ma,o:ha,w:va,t:Ma,p:_a,n:Zn,s:ti,g:Gn,e:$n,c:Vn,f:Kn,C:ei,b:qn,l:Qn,d:Hn,k:Xn,a:Wn,h:Yn,m:Jn},Ts=Kt(),ka=e.___wasm_call_ctors=function(){return(ka=e.___wasm_call_ctors=e.asm.E).apply(null,arguments)},Ea=e._glp_printf=function(){return(Ea=e._glp_printf=e.asm.F).apply(null,arguments)},Ra=e._glp_alloc=function(){return(Ra=e._glp_alloc=e.asm.G).apply(null,arguments)},Aa=e._glp_free=function(){return(Aa=e._glp_free=e.asm.H).apply(null,arguments)},Ta=e._glp_adv_basis=function(){return(Ta=e._glp_adv_basis=e.asm.I).apply(null,arguments)},Ia=e._glp_std_basis=function(){return(Ia=e._glp_std_basis=e.asm.J).apply(null,arguments)},Fa=e._glp_set_row_stat=function(){return(Fa=e._glp_set_row_stat=e.asm.K).apply(null,arguments)},Pa=e._glp_set_col_stat=function(){return(Pa=e._glp_set_col_stat=e.asm.L).apply(null,arguments)},Ba=e._glp_assert_=function(){return(Ba=e._glp_assert_=e.asm.M).apply(null,arguments)},Oa=e._glp_asnprob_hall=function(){return(Oa=e._glp_asnprob_hall=e.asm.O).apply(null,arguments)},Ua=e._glp_check_asnprob=function(){return(Ua=e._glp_check_asnprob=e.asm.P).apply(null,arguments)},ja=e._glp_asnprob_lp=function(){return(ja=e._glp_asnprob_lp=e.asm.Q).apply(null,arguments)},Ha=e._glp_erase_prob=function(){return(Ha=e._glp_erase_prob=e.asm.R).apply(null,arguments)},Va=e._glp_set_prob_name=function(){return(Va=e._glp_set_prob_name=e.asm.S).apply(null,arguments)},qa=e._glp_set_obj_dir=function(){return(qa=e._glp_set_obj_dir=e.asm.T).apply(null,arguments)},Ga=e._glp_add_rows=function(){return(Ga=e._glp_add_rows=e.asm.U).apply(null,arguments)},Wa=e._glp_set_row_name=function(){return(Wa=e._glp_set_row_name=e.asm.V).apply(null,arguments)},$a=e._glp_set_row_bnds=function(){return($a=e._glp_set_row_bnds=e.asm.W).apply(null,arguments)},Xa=e._glp_add_cols=function(){return(Xa=e._glp_add_cols=e.asm.X).apply(null,arguments)},Ka=e._glp_set_col_name=function(){return(Ka=e._glp_set_col_name=e.asm.Y).apply(null,arguments)},Ja=e._glp_set_mat_col=function(){return(Ja=e._glp_set_mat_col=e.asm.Z).apply(null,arguments)},Ya=e._glp_set_col_bnds=function(){return(Ya=e._glp_set_col_bnds=e.asm._).apply(null,arguments)},Za=e._glp_set_obj_coef=function(){return(Za=e._glp_set_obj_coef=e.asm.$).apply(null,arguments)},Qa=e._glp_asnprob_okalg=function(){return(Qa=e._glp_asnprob_okalg=e.asm.aa).apply(null,arguments)},er=e._glp_check_cnfsat=function(){return(er=e._glp_check_cnfsat=e.asm.ba).apply(null,arguments)},tr=e._glp_init_cpxcp=function(){return(tr=e._glp_init_cpxcp=e.asm.ca).apply(null,arguments)},ar=e._glp_read_lp=function(){return(ar=e._glp_read_lp=e.asm.da).apply(null,arguments)},H6=e._malloc=function(){return(H6=e._malloc=e.asm.ea).apply(null,arguments)},rr=e._glp_create_index=function(){return(rr=e._glp_create_index=e.asm.fa).apply(null,arguments)},cr=e._glp_set_obj_name=function(){return(cr=e._glp_set_obj_name=e.asm.ga).apply(null,arguments)},nr=e._glp_find_row=function(){return(nr=e._glp_find_row=e.asm.ha).apply(null,arguments)},ir=e._glp_set_mat_row=function(){return(ir=e._glp_set_mat_row=e.asm.ia).apply(null,arguments)},lr=e._glp_get_col_name=function(){return(lr=e._glp_get_col_name=e.asm.ja).apply(null,arguments)},or=e._glp_get_num_int=function(){return(or=e._glp_get_num_int=e.asm.ka).apply(null,arguments)},sr=e._glp_get_num_bin=function(){return(sr=e._glp_get_num_bin=e.asm.la).apply(null,arguments)},fr=e._glp_delete_index=function(){return(fr=e._glp_delete_index=e.asm.ma).apply(null,arguments)},ur=e._glp_sort_matrix=function(){return(ur=e._glp_sort_matrix=e.asm.na).apply(null,arguments)},dr=e._glp_set_col_kind=function(){return(dr=e._glp_set_col_kind=e.asm.oa).apply(null,arguments)},pr=e._free=function(){return(pr=e._free=e.asm.pa).apply(null,arguments)},mr=e._glp_write_lp=function(){return(mr=e._glp_write_lp=e.asm.qa).apply(null,arguments)},hr=e._glp_get_obj_name=function(){return(hr=e._glp_get_obj_name=e.asm.ra).apply(null,arguments)},gr=e._glp_get_row_name=function(){return(gr=e._glp_get_row_name=e.asm.sa).apply(null,arguments)},vr=e._glp_find_col=function(){return(vr=e._glp_find_col=e.asm.ta).apply(null,arguments)},zr=e._glp_cpp=function(){return(zr=e._glp_cpp=e.asm.ua).apply(null,arguments)},Mr=e._glp_top_sort=function(){return(Mr=e._glp_top_sort=e.asm.va).apply(null,arguments)},Lr=e._glp_cpx_basis=function(){return(Lr=e._glp_cpx_basis=e.asm.wa).apply(null,arguments)},_r=e._glp_get_num_rows=function(){return(_r=e._glp_get_num_rows=e.asm.xa).apply(null,arguments)},yr=e._glp_get_num_cols=function(){return(yr=e._glp_get_num_cols=e.asm.ya).apply(null,arguments)},br=e._glp_get_row_type=function(){return(br=e._glp_get_row_type=e.asm.za).apply(null,arguments)},Cr=e._glp_get_row_lb=function(){return(Cr=e._glp_get_row_lb=e.asm.Aa).apply(null,arguments)},Sr=e._glp_get_row_ub=function(){return(Sr=e._glp_get_row_ub=e.asm.Ba).apply(null,arguments)},wr=e._glp_get_col_type=function(){return(wr=e._glp_get_col_type=e.asm.Ca).apply(null,arguments)},xr=e._glp_get_col_lb=function(){return(xr=e._glp_get_col_lb=e.asm.Da).apply(null,arguments)},Nr=e._glp_get_col_ub=function(){return(Nr=e._glp_get_col_ub=e.asm.Ea).apply(null,arguments)},Dr=e._glp_get_obj_coef=function(){return(Dr=e._glp_get_obj_coef=e.asm.Fa).apply(null,arguments)},kr=e._glp_get_obj_dir=function(){return(kr=e._glp_get_obj_dir=e.asm.Ga).apply(null,arguments)},Er=e._glp_get_mat_col=function(){return(Er=e._glp_get_mat_col=e.asm.Ha).apply(null,arguments)},Rr=e._glp_create_graph=function(){return(Rr=e._glp_create_graph=e.asm.Ia).apply(null,arguments)},Ar=e._glp_set_graph_name=function(){return(Ar=e._glp_set_graph_name=e.asm.Ja).apply(null,arguments)},Tr=e._glp_add_vertices=function(){return(Tr=e._glp_add_vertices=e.asm.Ka).apply(null,arguments)},Ir=e._glp_set_vertex_name=function(){return(Ir=e._glp_set_vertex_name=e.asm.La).apply(null,arguments)},Fr=e._glp_add_arc=function(){return(Fr=e._glp_add_arc=e.asm.Ma).apply(null,arguments)},Pr=e._glp_del_vertices=function(){return(Pr=e._glp_del_vertices=e.asm.Na).apply(null,arguments)},Br=e._glp_del_arc=function(){return(Br=e._glp_del_arc=e.asm.Oa).apply(null,arguments)},Or=e._glp_erase_graph=function(){return(Or=e._glp_erase_graph=e.asm.Pa).apply(null,arguments)},Ur=e._glp_delete_graph=function(){return(Ur=e._glp_delete_graph=e.asm.Qa).apply(null,arguments)},jr=e._glp_create_v_index=function(){return(jr=e._glp_create_v_index=e.asm.Ra).apply(null,arguments)},Hr=e._glp_find_vertex=function(){return(Hr=e._glp_find_vertex=e.asm.Sa).apply(null,arguments)},Vr=e._glp_delete_v_index=function(){return(Vr=e._glp_delete_v_index=e.asm.Ta).apply(null,arguments)},qr=e._glp_gridgen=function(){return(qr=e._glp_gridgen=e.asm.Ua).apply(null,arguments)},Gr=e._glp_intfeas1=function(){return(Gr=e._glp_intfeas1=e.asm.Va).apply(null,arguments)},Wr=e._glp_create_prob=function(){return(Wr=e._glp_create_prob=e.asm.Wa).apply(null,arguments)},$r=e._glp_minisat1=function(){return($r=e._glp_minisat1=e.asm.Xa).apply(null,arguments)},Xr=e._glp_delete_prob=function(){return(Xr=e._glp_delete_prob=e.asm.Ya).apply(null,arguments)},Kr=e._glp_del_rows=function(){return(Kr=e._glp_del_rows=e.asm.Za).apply(null,arguments)},Jr=e._glp_maxflow_ffalg=function(){return(Jr=e._glp_maxflow_ffalg=e.asm._a).apply(null,arguments)},Yr=e._glp_maxflow_lp=function(){return(Yr=e._glp_maxflow_lp=e.asm.$a).apply(null,arguments)},Zr=e._glp_mincost_lp=function(){return(Zr=e._glp_mincost_lp=e.asm.ab).apply(null,arguments)},Qr=e._glp_mincost_okalg=function(){return(Qr=e._glp_mincost_okalg=e.asm.bb).apply(null,arguments)},ec=e._glp_mincost_relax4=function(){return(ec=e._glp_mincost_relax4=e.asm.cb).apply(null,arguments)},tc=e._glp_mpl_alloc_wksp=function(){return(tc=e._glp_mpl_alloc_wksp=e.asm.db).apply(null,arguments)},ac=e._glp_mpl_init_rand=function(){return(ac=e._glp_mpl_init_rand=e.asm.eb).apply(null,arguments)},rc=e._glp_mpl_read_model=function(){return(rc=e._glp_mpl_read_model=e.asm.fb).apply(null,arguments)},cc=e._glp_mpl_read_data=function(){return(cc=e._glp_mpl_read_data=e.asm.gb).apply(null,arguments)},nc=e._glp_mpl_generate=function(){return(nc=e._glp_mpl_generate=e.asm.hb).apply(null,arguments)},ic=e._glp_mpl_build_prob=function(){return(ic=e._glp_mpl_build_prob=e.asm.ib).apply(null,arguments)},lc=e._glp_mpl_postsolve=function(){return(lc=e._glp_mpl_postsolve=e.asm.jb).apply(null,arguments)},oc=e._glp_get_row_stat=function(){return(oc=e._glp_get_row_stat=e.asm.kb).apply(null,arguments)},sc=e._glp_get_row_prim=function(){return(sc=e._glp_get_row_prim=e.asm.lb).apply(null,arguments)},fc=e._glp_get_row_dual=function(){return(fc=e._glp_get_row_dual=e.asm.mb).apply(null,arguments)},uc=e._glp_ipt_row_prim=function(){return(uc=e._glp_ipt_row_prim=e.asm.nb).apply(null,arguments)},dc=e._glp_ipt_row_dual=function(){return(dc=e._glp_ipt_row_dual=e.asm.ob).apply(null,arguments)},pc=e._glp_mip_row_val=function(){return(pc=e._glp_mip_row_val=e.asm.pb).apply(null,arguments)},mc=e._glp_get_col_stat=function(){return(mc=e._glp_get_col_stat=e.asm.qb).apply(null,arguments)},hc=e._glp_get_col_prim=function(){return(hc=e._glp_get_col_prim=e.asm.rb).apply(null,arguments)},gc=e._glp_get_col_dual=function(){return(gc=e._glp_get_col_dual=e.asm.sb).apply(null,arguments)},vc=e._glp_ipt_col_prim=function(){return(vc=e._glp_ipt_col_prim=e.asm.tb).apply(null,arguments)},zc=e._glp_ipt_col_dual=function(){return(zc=e._glp_ipt_col_dual=e.asm.ub).apply(null,arguments)},Mc=e._glp_mip_col_val=function(){return(Mc=e._glp_mip_col_val=e.asm.vb).apply(null,arguments)},Lc=e._glp_mpl_free_wksp=function(){return(Lc=e._glp_mpl_free_wksp=e.asm.wb).apply(null,arguments)},_c=e._glp_init_mpscp=function(){return(_c=e._glp_init_mpscp=e.asm.xb).apply(null,arguments)},yc=e._glp_read_mps=function(){return(yc=e._glp_read_mps=e.asm.yb).apply(null,arguments)},bc=e._glp_write_mps=function(){return(bc=e._glp_write_mps=e.asm.zb).apply(null,arguments)},Cc=e._glp_netgen=function(){return(Cc=e._glp_netgen=e.asm.Ab).apply(null,arguments)},Sc=e._glp_npp_alloc_wksp=function(){return(Sc=e._glp_npp_alloc_wksp=e.asm.Bb).apply(null,arguments)},wc=e._glp_npp_load_prob=function(){return(wc=e._glp_npp_load_prob=e.asm.Cb).apply(null,arguments)},xc=e._glp_npp_preprocess1=function(){return(xc=e._glp_npp_preprocess1=e.asm.Db).apply(null,arguments)},Nc=e._glp_npp_build_prob=function(){return(Nc=e._glp_npp_build_prob=e.asm.Eb).apply(null,arguments)},Dc=e._glp_npp_postprocess=function(){return(Dc=e._glp_npp_postprocess=e.asm.Fb).apply(null,arguments)},kc=e._glp_get_status=function(){return(kc=e._glp_get_status=e.asm.Gb).apply(null,arguments)},Ec=e._glp_ipt_status=function(){return(Ec=e._glp_ipt_status=e.asm.Hb).apply(null,arguments)},Rc=e._glp_mip_status=function(){return(Rc=e._glp_mip_status=e.asm.Ib).apply(null,arguments)},Ac=e._glp_npp_obtain_sol=function(){return(Ac=e._glp_npp_obtain_sol=e.asm.Jb).apply(null,arguments)},Tc=e._glp_npp_free_wksp=function(){return(Tc=e._glp_npp_free_wksp=e.asm.Kb).apply(null,arguments)},Ic=e._glp_print_ipt=function(){return(Ic=e._glp_print_ipt=e.asm.Lb).apply(null,arguments)},Fc=e._glp_print_mip=function(){return(Fc=e._glp_print_mip=e.asm.Mb).apply(null,arguments)},Pc=e._glp_load_matrix=function(){return(Pc=e._glp_load_matrix=e.asm.Nb).apply(null,arguments)},Bc=e._glp_check_dup=function(){return(Bc=e._glp_check_dup=e.asm.Ob).apply(null,arguments)},Oc=e._glp_del_cols=function(){return(Oc=e._glp_del_cols=e.asm.Pb).apply(null,arguments)},Uc=e._glp_copy_prob=function(){return(Uc=e._glp_copy_prob=e.asm.Qb).apply(null,arguments)},jc=e._glp_get_bfcp=function(){return(jc=e._glp_get_bfcp=e.asm.Rb).apply(null,arguments)},Hc=e._glp_set_bfcp=function(){return(Hc=e._glp_set_bfcp=e.asm.Sb).apply(null,arguments)},Vc=e._glp_get_prob_name=function(){return(Vc=e._glp_get_prob_name=e.asm.Tb).apply(null,arguments)},qc=e._glp_get_num_nz=function(){return(qc=e._glp_get_num_nz=e.asm.Ub).apply(null,arguments)},Gc=e._glp_get_mat_row=function(){return(Gc=e._glp_get_mat_row=e.asm.Vb).apply(null,arguments)},Wc=e._glp_set_rii=function(){return(Wc=e._glp_set_rii=e.asm.Wb).apply(null,arguments)},$c=e._glp_set_sjj=function(){return($c=e._glp_set_sjj=e.asm.Xb).apply(null,arguments)},Xc=e._glp_get_rii=function(){return(Xc=e._glp_get_rii=e.asm.Yb).apply(null,arguments)},Kc=e._glp_get_sjj=function(){return(Kc=e._glp_get_sjj=e.asm.Zb).apply(null,arguments)},Jc=e._glp_unscale_prob=function(){return(Jc=e._glp_unscale_prob=e.asm._b).apply(null,arguments)},Yc=e._glp_print_ranges=function(){return(Yc=e._glp_print_ranges=e.asm.$b).apply(null,arguments)},Zc=e._glp_bf_exists=function(){return(Zc=e._glp_bf_exists=e.asm.ac).apply(null,arguments)},Qc=e._glp_version=function(){return(Qc=e._glp_version=e.asm.bc).apply(null,arguments)},e7=e._glp_analyze_bound=function(){return(e7=e._glp_analyze_bound=e.asm.cc).apply(null,arguments)},t7=e._glp_analyze_coef=function(){return(t7=e._glp_analyze_coef=e.asm.dc).apply(null,arguments)},a7=e._glp_print_sol=function(){return(a7=e._glp_print_sol=e.asm.ec).apply(null,arguments)},r7=e._glp_read_asnprob=function(){return(r7=e._glp_read_asnprob=e.asm.fc).apply(null,arguments)},c7=e._glp_read_ccdata=function(){return(c7=e._glp_read_ccdata=e.asm.gc).apply(null,arguments)},n7=e._glp_read_graph=function(){return(n7=e._glp_read_graph=e.asm.hc).apply(null,arguments)},i7=e._glp_read_cnfsat=function(){return(i7=e._glp_read_cnfsat=e.asm.ic).apply(null,arguments)},l7=e._glp_read_ipt=function(){return(l7=e._glp_read_ipt=e.asm.jc).apply(null,arguments)},o7=e._glp_read_maxflow=function(){return(o7=e._glp_read_maxflow=e.asm.kc).apply(null,arguments)},s7=e._glp_read_mincost=function(){return(s7=e._glp_read_mincost=e.asm.lc).apply(null,arguments)},f7=e._glp_read_mip=function(){return(f7=e._glp_read_mip=e.asm.mc).apply(null,arguments)},u7=e._glp_read_prob=function(){return(u7=e._glp_read_prob=e.asm.nc).apply(null,arguments)},d7=e._glp_read_sol=function(){return(d7=e._glp_read_sol=e.asm.oc).apply(null,arguments)},p7=e._glp_rmfgen=function(){return(p7=e._glp_rmfgen=e.asm.pc).apply(null,arguments)},m7=e._glp_strong_comp=function(){return(m7=e._glp_strong_comp=e.asm.qc).apply(null,arguments)},h7=e._glp_weak_comp=function(){return(h7=e._glp_weak_comp=e.asm.rc).apply(null,arguments)},g7=e._glp_wclique_exact=function(){return(g7=e._glp_wclique_exact=e.asm.sc).apply(null,arguments)},v7=e._glp_write_asnprob=function(){return(v7=e._glp_write_asnprob=e.asm.tc).apply(null,arguments)},z7=e._glp_write_ccdata=function(){return(z7=e._glp_write_ccdata=e.asm.uc).apply(null,arguments)},M7=e._glp_write_graph=function(){return(M7=e._glp_write_graph=e.asm.vc).apply(null,arguments)},L7=e._glp_write_cnfsat=function(){return(L7=e._glp_write_cnfsat=e.asm.wc).apply(null,arguments)},_7=e._glp_write_ipt=function(){return(_7=e._glp_write_ipt=e.asm.xc).apply(null,arguments)},y7=e._glp_write_maxflow=function(){return(y7=e._glp_write_maxflow=e.asm.yc).apply(null,arguments)},b7=e._glp_write_mincost=function(){return(b7=e._glp_write_mincost=e.asm.zc).apply(null,arguments)},C7=e._glp_write_mip=function(){return(C7=e._glp_write_mip=e.asm.Ac).apply(null,arguments)},S7=e._glp_write_prob=function(){return(S7=e._glp_write_prob=e.asm.Bc).apply(null,arguments)},w7=e._glp_write_sol=function(){return(w7=e._glp_write_sol=e.asm.Cc).apply(null,arguments)},x7=e._glp_realloc=function(){return(x7=e._glp_realloc=e.asm.Dc).apply(null,arguments)},N7=e._glp_simplex=function(){return(N7=e._glp_simplex=e.asm.Ec).apply(null,arguments)},D7=e._glp_scale_prob=function(){return(D7=e._glp_scale_prob=e.asm.Fc).apply(null,arguments)},k7=e._glp_init_smcp=function(){return(k7=e._glp_init_smcp=e.asm.Gc).apply(null,arguments)},E7=e._glp_factorize=function(){return(E7=e._glp_factorize=e.asm.Hc).apply(null,arguments)},R7=e._glp_get_prim_stat=function(){return(R7=e._glp_get_prim_stat=e.asm.Ic).apply(null,arguments)},A7=e._glp_get_dual_stat=function(){return(A7=e._glp_get_dual_stat=e.asm.Jc).apply(null,arguments)},T7=e._glp_get_obj_val=function(){return(T7=e._glp_get_obj_val=e.asm.Kc).apply(null,arguments)},I7=e._glp_get_unbnd_ray=function(){return(I7=e._glp_get_unbnd_ray=e.asm.Lc).apply(null,arguments)},F7=e._glp_get_it_cnt=function(){return(F7=e._glp_get_it_cnt=e.asm.Mc).apply(null,arguments)},P7=e._glp_set_it_cnt=function(){return(P7=e._glp_set_it_cnt=e.asm.Nc).apply(null,arguments)},B7=e._glp_exact=function(){return(B7=e._glp_exact=e.asm.Oc).apply(null,arguments)},O7=e._glp_time=function(){return(O7=e._glp_time=e.asm.Pc).apply(null,arguments)},U7=e._glp_interior=function(){return(U7=e._glp_interior=e.asm.Qc).apply(null,arguments)},j7=e._glp_init_iptcp=function(){return(j7=e._glp_init_iptcp=e.asm.Rc).apply(null,arguments)},H7=e._glp_ipt_obj_val=function(){return(H7=e._glp_ipt_obj_val=e.asm.Sc).apply(null,arguments)},V7=e._glp_get_col_kind=function(){return(V7=e._glp_get_col_kind=e.asm.Tc).apply(null,arguments)},q7=e._glp_intopt=function(){return(q7=e._glp_intopt=e.asm.Uc).apply(null,arguments)},G7=e._glp_init_iocp=function(){return(G7=e._glp_init_iocp=e.asm.Vc).apply(null,arguments)},W7=e._glp_mip_obj_val=function(){return(W7=e._glp_mip_obj_val=e.asm.Wc).apply(null,arguments)},$7=e._glp_bf_updated=function(){return($7=e._glp_bf_updated=e.asm.Xc).apply(null,arguments)},X7=e._glp_get_bhead=function(){return(X7=e._glp_get_bhead=e.asm.Yc).apply(null,arguments)},K7=e._glp_get_row_bind=function(){return(K7=e._glp_get_row_bind=e.asm.Zc).apply(null,arguments)},J7=e._glp_get_col_bind=function(){return(J7=e._glp_get_col_bind=e.asm._c).apply(null,arguments)},Y7=e._glp_ftran=function(){return(Y7=e._glp_ftran=e.asm.$c).apply(null,arguments)},Z7=e._glp_btran=function(){return(Z7=e._glp_btran=e.asm.ad).apply(null,arguments)},Q7=e._glp_warm_up=function(){return(Q7=e._glp_warm_up=e.asm.bd).apply(null,arguments)},en=e._glp_eval_tab_row=function(){return(en=e._glp_eval_tab_row=e.asm.cd).apply(null,arguments)},tn=e._glp_eval_tab_col=function(){return(tn=e._glp_eval_tab_col=e.asm.dd).apply(null,arguments)},an=e._glp_transform_row=function(){return(an=e._glp_transform_row=e.asm.ed).apply(null,arguments)},rn=e._glp_transform_col=function(){return(rn=e._glp_transform_col=e.asm.fd).apply(null,arguments)},cn=e._glp_prim_rtest=function(){return(cn=e._glp_prim_rtest=e.asm.gd).apply(null,arguments)},nn=e._glp_dual_rtest=function(){return(nn=e._glp_dual_rtest=e.asm.hd).apply(null,arguments)},ln=e._glp_ios_reason=function(){return(ln=e._glp_ios_reason=e.asm.id).apply(null,arguments)},on=e._glp_ios_get_prob=function(){return(on=e._glp_ios_get_prob=e.asm.jd).apply(null,arguments)},sn=e._glp_ios_tree_size=function(){return(sn=e._glp_ios_tree_size=e.asm.kd).apply(null,arguments)},fn=e._glp_ios_curr_node=function(){return(fn=e._glp_ios_curr_node=e.asm.ld).apply(null,arguments)},un=e._glp_ios_next_node=function(){return(un=e._glp_ios_next_node=e.asm.md).apply(null,arguments)},dn=e._glp_ios_prev_node=function(){return(dn=e._glp_ios_prev_node=e.asm.nd).apply(null,arguments)},pn=e._glp_ios_up_node=function(){return(pn=e._glp_ios_up_node=e.asm.od).apply(null,arguments)},mn=e._glp_ios_node_level=function(){return(mn=e._glp_ios_node_level=e.asm.pd).apply(null,arguments)},hn=e._glp_ios_node_bound=function(){return(hn=e._glp_ios_node_bound=e.asm.qd).apply(null,arguments)},gn=e._glp_ios_best_node=function(){return(gn=e._glp_ios_best_node=e.asm.rd).apply(null,arguments)},vn=e._glp_ios_mip_gap=function(){return(vn=e._glp_ios_mip_gap=e.asm.sd).apply(null,arguments)},zn=e._glp_ios_node_data=function(){return(zn=e._glp_ios_node_data=e.asm.td).apply(null,arguments)},Mn=e._glp_ios_row_attr=function(){return(Mn=e._glp_ios_row_attr=e.asm.ud).apply(null,arguments)},Ln=e._glp_ios_pool_size=function(){return(Ln=e._glp_ios_pool_size=e.asm.vd).apply(null,arguments)},_n=e._glp_ios_add_row=function(){return(_n=e._glp_ios_add_row=e.asm.wd).apply(null,arguments)},yn=e._glp_ios_del_row=function(){return(yn=e._glp_ios_del_row=e.asm.xd).apply(null,arguments)},bn=e._glp_ios_clear_pool=function(){return(bn=e._glp_ios_clear_pool=e.asm.yd).apply(null,arguments)},Cn=e._glp_ios_can_branch=function(){return(Cn=e._glp_ios_can_branch=e.asm.zd).apply(null,arguments)},Sn=e._glp_ios_branch_upon=function(){return(Sn=e._glp_ios_branch_upon=e.asm.Ad).apply(null,arguments)},wn=e._glp_ios_select_node=function(){return(wn=e._glp_ios_select_node=e.asm.Bd).apply(null,arguments)},xn=e._glp_ios_heur_sol=function(){return(xn=e._glp_ios_heur_sol=e.asm.Cd).apply(null,arguments)},Nn=e._glp_ios_terminate=function(){return(Nn=e._glp_ios_terminate=e.asm.Dd).apply(null,arguments)},Dn=e._glp_difftime=function(){return(Dn=e._glp_difftime=e.asm.Ed).apply(null,arguments)},kn=e._glp_mem_usage=function(){return(kn=e._glp_mem_usage=e.asm.Fd).apply(null,arguments)},En=e._glp_mem_limit=function(){return(En=e._glp_mem_limit=e.asm.Gd).apply(null,arguments)},Rn=e._glp_init_env=function(){return(Rn=e._glp_init_env=e.asm.Hd).apply(null,arguments)},An=e._glp_config=function(){return(An=e._glp_config=e.asm.Id).apply(null,arguments)},Tn=e._glp_free_env=function(){return(Tn=e._glp_free_env=e.asm.Jd).apply(null,arguments)},In=e._glp_at_error=function(){return(In=e._glp_at_error=e.asm.Kd).apply(null,arguments)},Fn=e._glp_error_hook=function(){return(Fn=e._glp_error_hook=e.asm.Ld).apply(null,arguments)},Pn=e._glp_puts=function(){return(Pn=e._glp_puts=e.asm.Md).apply(null,arguments)},Bn=e._glp_term_out=function(){return(Bn=e._glp_term_out=e.asm.Nd).apply(null,arguments)},On=e._glp_term_hook=function(){return(On=e._glp_term_hook=e.asm.Od).apply(null,arguments)},Un=e._glp_open_tee=function(){return(Un=e._glp_open_tee=e.asm.Pd).apply(null,arguments)},jn=e._glp_close_tee=function(){return(jn=e._glp_close_tee=e.asm.Qd).apply(null,arguments)},V6=e.___errno_location=function(){return(V6=e.___errno_location=e.asm.Rd).apply(null,arguments)},$2=e._setThrew=function(){return($2=e._setThrew=e.asm.Sd).apply(null,arguments)},X2=e.stackSave=function(){return(X2=e.stackSave=e.asm.Td).apply(null,arguments)},K2=e.stackRestore=function(){return(K2=e.stackRestore=e.asm.Ud).apply(null,arguments)};function Hn(n,s,u){var h=X2();try{q2(n)(s,u)}catch(g){if(K2(h),g!==g+0)throw g;$2(1,0)}}function Vn(n,s,u){var h=X2();try{return q2(n)(s,u)}catch(g){if(K2(h),g!==g+0)throw g;$2(1,0)}}function qn(n,s){var u=X2();try{q2(n)(s)}catch(h){if(K2(u),h!==h+0)throw h;$2(1,0)}}function Gn(n){var s=X2();try{return q2(n)()}catch(u){if(K2(s),u!==u+0)throw u;$2(1,0)}}function Wn(n,s,u,h){var g=X2();try{q2(n)(s,u,h)}catch(M){if(K2(g),M!==M+0)throw M;$2(1,0)}}function $n(n,s){var u=X2();try{return q2(n)(s)}catch(h){if(K2(u),h!==h+0)throw h;$2(1,0)}}function Xn(n,s,u,h){var g=X2();try{q2(n)(s,u,h)}catch(M){if(K2(g),M!==M+0)throw M;$2(1,0)}}function Kn(n,s,u,h){var g=X2();try{return q2(n)(s,u,h)}catch(M){if(K2(g),M!==M+0)throw M;$2(1,0)}}function Jn(n,s,u,h,g,M){var b=X2();try{q2(n)(s,u,h,g,M)}catch(w){if(K2(b),w!==w+0)throw w;$2(1,0)}}function Yn(n,s,u,h,g,M){var b=X2();try{q2(n)(s,u,h,g,M)}catch(w){if(K2(b),w!==w+0)throw w;$2(1,0)}}function Zn(n,s){var u=X2();try{return q2(n)(s)}catch(h){if(K2(u),h!==h+0)throw h;$2(1,0)}}function Qn(n,s,u){var h=X2();try{q2(n)(s,u)}catch(g){if(K2(h),g!==g+0)throw g;$2(1,0)}}function ei(n,s,u,h,g,M){var b=X2();try{return q2(n)(s,u,h,g,M)}catch(w){if(K2(b),w!==w+0)throw w;$2(1,0)}}function ti(n,s,u){var h=X2();try{return q2(n)(s,u)}catch(g){if(K2(h),g!==g+0)throw g;$2(1,0)}}e.UTF8ToString=o2,e.stringToUTF8=b2,e.lengthBytesUTF8=D,e.addFunction=xa,e.removeFunction=Na,e.setValue=Yt,e.getValue=Jt,e.FS=p;var b3;W2=function n(){b3||q6(),b3||(W2=n)};function q6(n){if(n=n||o,P2>0||(I(),P2>0))return;function s(){b3||(b3=!0,e.calledRun=!0,!A2&&(O(),r(e),e.onRuntimeInitialized&&e.onRuntimeInitialized(),C2()))}e.setStatus?(e.setStatus("Running..."),setTimeout(function(){setTimeout(function(){e.setStatus("")},1),s()},1)):s()}if(e.preInit)for(typeof e.preInit=="function"&&(e.preInit=[e.preInit]);e.preInit.length>0;)e.preInit.pop()();return q6(),e.ready}})();typeof G3=="object"&&typeof p6=="object"?p6.exports=d6:typeof define=="function"&&define.amd?define([],function(){return d6}):typeof G3=="object"&&(G3.Module=d6)});var K8=P4((W3,X8)=>{"use strict";(function(a,t){typeof W3=="object"&&typeof X8<"u"?t(W3,$8()):typeof define=="function"&&define.amd?define(["exports","glpk-wasm"],t):(a=typeof globalThis<"u"?globalThis:a||self,t(a.GLPK={},a.glpkWasm))})(W3,function(a,t){"use strict";function e(D){return D&&typeof D=="object"&&"default"in D?D:{default:D}}var r=e(t);function c(D,f){var z={};for(var C in D)Object.prototype.hasOwnProperty.call(D,C)&&f.indexOf(C)<0&&(z[C]=D[C]);if(D!=null&&typeof Object.getOwnPropertySymbols=="function")for(var j=0,C=Object.getOwnPropertySymbols(D);j<C.length;j++)f.indexOf(C[j])<0&&Object.prototype.propertyIsEnumerable.call(D,C[j])&&(z[C[j]]=D[C[j]]);return z}function i(D,f,z,C){function j(Z){return Z instanceof z?Z:new z(function(H){H(Z)})}return new(z||(z=Promise))(function(Z,H){function A(U){try{x(C.next(U))}catch(X){H(X)}}function T(U){try{x(C.throw(U))}catch(X){H(X)}}function x(U){U.done?Z(U.value):j(U.value).then(A,T)}x((C=C.apply(D,f||[])).next())})}typeof SuppressedError=="function"&&SuppressedError;let o,l;function d(D){return i(this,void 0,void 0,function*(){return o===void 0&&(o=D===void 0?r.default():r.default({locateFile(){return D}})),l=yield o,l})}var m;(function(D){(function(f){f[f.MIN=1]="MIN",f[f.MAX=2]="MAX"})(D.ObjectiveDirection||(D.ObjectiveDirection={})),(function(f){f[f.FREE=1]="FREE",f[f.LB=2]="LB",f[f.UB=3]="UB",f[f.BOUNDED=4]="BOUNDED",f[f.FIXED=5]="FIXED"})(D.BoundType||(D.BoundType={})),(function(f){f[f.BASIC=1]="BASIC",f[f.LB=2]="LB",f[f.UB=3]="UB",f[f.FREE=4]="FREE",f[f.FIXED=5]="FIXED"})(D.VariableStatus||(D.VariableStatus={})),(function(f){f[f.CONTINUOUS=1]="CONTINUOUS",f[f.INTEGER=2]="INTEGER",f[f.BINARY=3]="BINARY"})(D.VariableType||(D.VariableType={})),(function(f){f[f.GEOMETRIC_MEAN=1]="GEOMETRIC_MEAN",f[f.EQUILIBRATION=16]="EQUILIBRATION",f[f.POWER_TWO=32]="POWER_TWO",f[f.SKIP=64]="SKIP",f[f.AUTO=128]="AUTO"})(D.Scaling||(D.Scaling={})),(function(f){f[f.BASIC=1]="BASIC",f[f.INTERIOR_POINT=2]="INTERIOR_POINT",f[f.MIXED_INTEGER=3]="MIXED_INTEGER"})(D.SolutionIndicator||(D.SolutionIndicator={})),(function(f){f[f.UNDEFINED=1]="UNDEFINED",f[f.FEASIBLE=2]="FEASIBLE",f[f.INFEASIBLE=3]="INFEASIBLE",f[f.NO_FEASIBLE=4]="NO_FEASIBLE",f[f.OPTIMAL=5]="OPTIMAL",f[f.UNBOUNDED=6]="UNBOUNDED"})(D.Status||(D.Status={})),(function(f){f[f.OFF=0]="OFF",f[f.ERR=1]="ERR",f[f.ON=2]="ON",f[f.ALL=3]="ALL",f[f.DBG=4]="DBG"})(D.MessageLevel||(D.MessageLevel={})),(function(f){f[f.PRIMAL=1]="PRIMAL",f[f.DUALP=2]="DUALP",f[f.DUAL=3]="DUAL"})(D.Method||(D.Method={})),(function(f){f[f.STD=17]="STD",f[f.PSE=34]="PSE"})(D.Pricing||(D.Pricing={})),(function(f){f[f.STD=17]="STD",f[f.HAR=34]="HAR",f[f.FLIP=51]="FLIP"})(D.RatioTest||(D.RatioTest={})),(function(f){f[f.NONE=0]="NONE",f[f.QMD=1]="QMD",f[f.AMD=2]="AMD",f[f.SYMAMD=3]="SYMAMD"})(D.OrderingAlgorithm||(D.OrderingAlgorithm={})),(function(f){f[f.OK=0]="OK",f[f.EBADB=1]="EBADB",f[f.ESING=2]="ESING",f[f.ECOND=3]="ECOND",f[f.EBOUND=4]="EBOUND",f[f.EFAIL=5]="EFAIL",f[f.EOBJLL=6]="EOBJLL",f[f.EOBJUL=7]="EOBJUL",f[f.EITLIM=8]="EITLIM",f[f.ETMLIM=9]="ETMLIM",f[f.ENOPFS=10]="ENOPFS",f[f.ENODFS=11]="ENODFS",f[f.EROOT=12]="EROOT",f[f.ESTOP=13]="ESTOP",f[f.EMIPGAP=14]="EMIPGAP",f[f.ENOFEAS=15]="ENOFEAS",f[f.ENOCVG=16]="ENOCVG",f[f.EINSTAB=17]="EINSTAB",f[f.EDATA=18]="EDATA",f[f.ERANGE=19]="ERANGE"})(D.ReturnCode||(D.ReturnCode={})),(function(f){f[f.FFV=1]="FFV",f[f.LFV=2]="LFV",f[f.MFV=3]="MFV",f[f.DTH=4]="DTH",f[f.PCH=5]="PCH"})(D.BranchingTechnique||(D.BranchingTechnique={})),(function(f){f[f.DFS=1]="DFS",f[f.BFS=2]="BFS",f[f.BLB=3]="BLB",f[f.BPH=4]="BPH"})(D.BacktrackingTechnique||(D.BacktrackingTechnique={})),(function(f){f[f.NONE=0]="NONE",f[f.ROOT=1]="ROOT",f[f.ALL=2]="ALL"})(D.PreprocessingTechnique||(D.PreprocessingTechnique={})),(function(f){f[f.PE=1]="PE",f[f.PB=2]="PB",f[f.DE=3]="DE",f[f.DB=4]="DB",f[f.CS=5]="CS"})(D.ConditionIndicator||(D.ConditionIndicator={})),(function(f){f[f.ROWGEN=1]="ROWGEN",f[f.BINGO=2]="BINGO",f[f.HEUR=3]="HEUR",f[f.CUTGEN=4]="CUTGEN",f[f.BRANCH=5]="BRANCH",f[f.SELECT=6]="SELECT",f[f.PREPRO=7]="PREPRO"})(D.ReasonCode||(D.ReasonCode={})),(function(f){f[f.NO_BRNCH=0]="NO_BRNCH",f[f.DN_BRNCH=1]="DN_BRNCH",f[f.UP_BRNCH=2]="UP_BRNCH"})(D.BranchSelection||(D.BranchSelection={})),(function(f){f[f.REG=0]="REG",f[f.LAZY=1]="LAZY",f[f.CUT=2]="CUT"})(D.RowOrigin||(D.RowOrigin={})),(function(f){f[f.GMI=1]="GMI",f[f.MIR=2]="MIR",f[f.COV=3]="COV",f[f.CLQ=4]="CLQ"})(D.RowClass||(D.RowClass={})),(function(f){f[f.DECK=1]="DECK",f[f.FILE=2]="FILE"})(D.MPSFormat||(D.MPSFormat={}))})(m||(m={}));function v(D,f){return D===void 0?f===void 0?m.BoundType.FREE:m.BoundType.UB:f===void 0?m.BoundType.LB:D===f?m.BoundType.FIXED:m.BoundType.BOUNDED}function _(D){let f=D.model.numConstrs,z=D.model.numVars,C=l._malloc((z+1)*12),j=new Float64Array(l.HEAPU8.buffer,C,z+1),Z=new Int32Array(l.HEAPU8.buffer,C+(z+1)*8,z+1);l._glp_eval_tab_row(D.model.ptr,D instanceof k?f+D.id:D.id,C+(z+1)*8,C);let H=Array.from(Z.slice(1).filter(A=>A>0),(A,T)=>[A<=f?D.model.constrs[A-1]:D.model.vars[A-1-f],j[T+1]]);return l._free(C),H}function y(D){let f=D.model.numConstrs,z=l._malloc((f+1)*12),C=new Float64Array(l.HEAPU8.buffer,z,f+1),j=new Int32Array(l.HEAPU8.buffer,z+(f+1)*8,f+1);l._glp_eval_tab_col(D.model.ptr,D instanceof k?f+D.id:D.id,z+(f+1)*8,z);let Z=Array.from(j.slice(1).filter(H=>H>0),(H,A)=>[H<=f?D.model.constrs[H-1]:D.model.vars[H-1-f],C[A+1]]);return l._free(z),Z}let N=new Map([[void 0,m.VariableType.CONTINUOUS],["c",m.VariableType.CONTINUOUS],["cont",m.VariableType.CONTINUOUS],["continuous",m.VariableType.CONTINUOUS],["i",m.VariableType.INTEGER],["int",m.VariableType.INTEGER],["integer",m.VariableType.INTEGER],["b",m.VariableType.BINARY],["bin",m.VariableType.BINARY],["binary",m.VariableType.BINARY]]),S=new Map(Array.from(N.entries(),([D,f])=>[f,D]));function V(D){let f=N.get(D);if(f===void 0)throw new Error(`unknown variable type '${D}'`);return f}let W=new Map([["basic",m.VariableStatus.BASIC],["lower-bound",m.VariableStatus.LB],["upper-bound",m.VariableStatus.UB],["free",m.VariableStatus.FREE],["fixed",m.VariableStatus.FIXED]]),B=new Map(Array.from(W.entries(),([D,f])=>[f,D]));class k{get ptr(){return this.model.ptr}constructor(f,z,C){if(this._lb=0,this._ub=0,this.model=f,this._idx=z,C===void 0)return;let{obj:j,lb:Z,ub:H,type:A,name:T}=C;j!==void 0&&(this.obj=j),this.setBounds(Z,H),A!==void 0&&(this.type=A),T!==void 0&&(this.name=T)}get id(){return this._idx}setBounds(f,z){if(f===this._lb&&z===this._ub)return;this._lb=f,this._ub=z;let C=v(f,z);l._glp_set_col_bnds(this.ptr,this._idx,C,f||0,z||0)}set bounds([f,z]){this.setBounds(f,z)}set name(f){let z=l.lengthBytesUTF8(f)+1,C=l._malloc(z);l.stringToUTF8(f,C,z),l._glp_set_col_name(this.ptr,this._idx,C),l._free(C)}get name(){let f=l._glp_get_col_name(this.ptr,this._idx);return l.UTF8ToString(f)}set lb(f){this.setBounds(f,this.ub)}set ub(f){this.setBounds(this.lb,f)}get lb(){return this._lb}get ub(){return this._ub}get obj(){return l._glp_get_obj_coef(this.ptr,this._idx)}set obj(f){if(typeof f!="number")throw new Error("obj should be a number");l._glp_set_obj_coef(this.ptr,this._idx,f)}set type(f){l._glp_set_col_kind(this.ptr,this._idx,V(f))}get type(){return S.get(l._glp_get_col_kind(this.ptr,this._idx))}get value(){return l._glp_get_col_prim(this.ptr,this._idx)}get dual(){return l._glp_get_col_dual(this.ptr,this._idx)}get valueInt(){return l._glp_ipt_col_prim(this.ptr,this._idx)}get dualInt(){return l._glp_ipt_col_dual(this.ptr,this._idx)}get valueMIP(){return l._glp_mip_col_val(this.ptr,this._idx)}get status(){return B.get(l._glp_get_col_stat(this.ptr,this._idx))}get row(){return _(this)}get column(){return y(this)}}class F{get ptr(){return this.model.ptr}constructor(f,z,C){if(this._needsUpdate=!1,this.model=f,this._idx=z,this._coeffs=new Map,!C)return;let{lb:j,ub:Z,coeffs:H,name:A}=C;this.setBounds(j,Z),H!==void 0&&this.addCollection(H),A!==void 0&&(this.name=A)}get id(){return this._idx}set name(f){let z=l.lengthBytesUTF8(f)+1,C=l._malloc(z);l.stringToUTF8(f,C,z),l._glp_set_row_name(this.ptr,this._idx,C),l._free(C)}get name(){let f=l._glp_get_row_name(this.ptr,this._idx);return l.UTF8ToString(f)}setBounds(f,z){if(f===this._lb&&z===this._ub)return;let C=v(f,z);this._lb=f,this._ub=z,l._glp_set_row_bnds(this.ptr,this._idx,C,f||0,z||0)}set bounds([f,z]){this.setBounds(f,z)}set lb(f){this.setBounds(f,this._ub)}set ub(f){this.setBounds(this.lb,f)}get lb(){return this._lb}get ub(){return this._ub}add(f,z){if(z===void 0)return this.addCollection(f);if(!(f instanceof k))throw new Error("variable should have type Variable");if(!z)return this;let C=(this._coeffs.get(f.id)||0)+z;return C?this._coeffs.set(f.id,C):this._coeffs.delete(f.id),this._needsUpdate=!0,this}addCollection(f){let z=f instanceof Array?f:f instanceof Map?f.entries():void 0;if(z===void 0)throw new Error("coeffs should have type Array or Map");for(let[C,j]of z){if(!(C instanceof k))throw new Error("variable should have type Variable");if(!j)continue;let Z=(this._coeffs.get(C.id)||0)+j;Z?this._coeffs.set(C.id,Z):this._coeffs.delete(C.id),this._needsUpdate=!0}return this}update(){if(!this._needsUpdate)return this;let f=this._coeffs.size+1,z=l._malloc(f*4),C=l._malloc(f*8),j=new Int32Array(l.HEAPU8.buffer,z,f),Z=new Float64Array(l.HEAPU8.buffer,C,f);j[0]=0,Z[0]=0;let H=0;for(let[A,T]of this._coeffs.entries())H++,j[H]=A,Z[H]=T;return l._glp_set_mat_row(this.ptr,this._idx,f-1,z,C),l._free(z),l._free(C),this._needsUpdate=!1,this}get value(){return l._glp_get_row_prim(this.ptr,this._idx)}get dual(){return l._glp_get_row_dual(this.ptr,this._idx)}get valueInt(){return l._glp_ipt_row_prim(this.ptr,this._idx)}get dualInt(){return l._glp_ipt_row_dual(this.ptr,this._idx)}get valueMIP(){return l._glp_mip_row_val(this.ptr,this._idx)}get status(){return B.get(l._glp_get_row_stat(this.ptr,this._idx))}get row(){return _(this)}get column(){return y(this)}}let P=new Map([["optimal",m.Status.OPTIMAL],["feasible",m.Status.FEASIBLE],["infeasible",m.Status.INFEASIBLE],["no_feasible",m.Status.NO_FEASIBLE],["unbounded",m.Status.UNBOUNDED],["undefined",m.Status.UNDEFINED]]),J=new Map(Array.from(P.entries(),([D,f])=>[f,D]));function Y(D){return J.get(D)}function s2(D){let f={all:m.MessageLevel.ALL,on:m.MessageLevel.ON,off:m.MessageLevel.OFF,debug:m.MessageLevel.DBG,error:m.MessageLevel.ERR}[D];if(f===void 0)throw new Error(`unknown message level '${D}'`);return f}a.Interior=void 0,(function(D){function f(C){let j={none:m.OrderingAlgorithm.NONE,qmd:m.OrderingAlgorithm.QMD,amd:m.OrderingAlgorithm.AMD,symamd:m.OrderingAlgorithm.SYMAMD}[C];if(j===void 0)throw new Error(`unknown ordering '${C}'`);return j}function z(C,j){let Z=l._malloc(392);l._glp_init_iptcp(Z),j.msgLevel!==void 0&&l.setValue(Z,s2(j.msgLevel),"i32"),j.ordering!==void 0&&l.setValue(Z+4,f(j.ordering),"i32");let H=l._glp_interior(C.ptr,Z);switch(l._free(Z),H){case m.ReturnCode.OK:return"ok";case m.ReturnCode.EFAIL:return"no_data";case m.ReturnCode.ENOCVG:return"no_convergence";case m.ReturnCode.EITLIM:return"iteration_limit";case m.ReturnCode.EINSTAB:return"instability";default:throw new Error(`unknown return code from interior: ${H}`)}}D.solve=z})(a.Interior||(a.Interior={})),a.Simplex=void 0,(function(D){function f(T){let x={primal:m.Method.PRIMAL,dual:m.Method.DUAL,dual_primal:m.Method.DUALP}[T];if(x===void 0)throw new Error(`unknown method '${T}'`);return x}function z(T){let x={std:m.Pricing.STD,pse:m.Pricing.PSE}[T];if(x===void 0)throw new Error(`unknown pricing '${T}'`);return x}function C(T){let x={std:m.RatioTest.STD,harris:m.RatioTest.HAR,flipflop:m.RatioTest.FLIP}[T];if(x===void 0)throw new Error(`unknown ratioTest '${T}'`);return x}function j(T){switch(T){case m.ReturnCode.OK:return"ok";case m.ReturnCode.EBADB:return"basis_invalid";case m.ReturnCode.ESING:return"basis_singular";case m.ReturnCode.ECOND:return"basis_ill_conditioned";case m.ReturnCode.EBOUND:return"bounds_incorrect";case m.ReturnCode.EFAIL:return"failure";case m.ReturnCode.EOBJLL:return"objective_lower";case m.ReturnCode.EOBJUL:return"objective_upper";case m.ReturnCode.EITLIM:return"iteration_limit";case m.ReturnCode.ETMLIM:return"time_limit";case m.ReturnCode.ENOPFS:return"no_primal_feasible";case m.ReturnCode.ENODFS:return"no_dual_feasible";default:throw new Error(`unknown return code from simplex: ${T}`)}}function Z(T){let x=l._malloc(352);return l._glp_init_smcp(x),T.msgLevel!==void 0&&l.setValue(x,s2(T.msgLevel),"i32"),T.method!==void 0&&l.setValue(x+4,f(T.method),"i32"),T.pricing!==void 0&&l.setValue(x+8,z(T.pricing),"i32"),T.ratioTest!==void 0&&l.setValue(x+12,C(T.ratioTest),"i32"),T.tolPrimal!==void 0&&l.setValue(x+16,T.tolPrimal,"double"),T.tolDual!==void 0&&l.setValue(x+24,T.tolDual,"double"),T.tolPivot!==void 0&&l.setValue(x+32,T.tolPivot,"double"),T.objLower!==void 0&&l.setValue(x+40,T.objLower,"double"),T.objUpper!==void 0&&l.setValue(x+48,T.objUpper,"double"),T.limitIter!==void 0&&l.setValue(x+56,T.limitIter,"i32"),T.limitTime!==void 0&&l.setValue(x+60,T.limitTime,"i32"),T.logFreq!==void 0&&l.setValue(x+64,T.logFreq,"i32"),T.logDelay!==void 0&&l.setValue(x+68,T.logDelay,"i32"),T.presolve!==void 0&&l.setValue(x+72,T.presolve?1:0,"i32"),x}function H(T,x){let U=Z(x),X=l._glp_simplex(T.ptr,U);return l._free(U),j(X)}D.solve=H;function A(T,x){let U=Z(x),X=l._glp_exact(T.ptr,U);return l._free(U),j(X)}D.solveExact=A})(a.Simplex||(a.Simplex={}));let g2={row:m.ReasonCode.ROWGEN,improved:m.ReasonCode.BINGO,heuristic:m.ReasonCode.HEUR,cut:m.ReasonCode.CUTGEN,branch:m.ReasonCode.BRANCH,select:m.ReasonCode.SELECT,preprocessing:m.ReasonCode.PREPRO},y2=new Map(Object.entries(g2).map(([D,f])=>[f,D])),A2={regular:m.RowOrigin.REG,lazy:m.RowOrigin.LAZY,cut:m.RowOrigin.CUT},D2=new Map(Object.entries(A2).map(([D,f])=>[f,D])),V2={gomory:m.RowClass.GMI,mir:m.RowClass.MIR,cover:m.RowClass.COV,clique:m.RowClass.CLQ},E=new Map(Object.entries(V2).map(([D,f])=>[f,D])),e2={down:m.BranchSelection.DN_BRNCH,up:m.BranchSelection.UP_BRNCH,general:m.BranchSelection.NO_BRNCH};class o2{constructor(f,z){this.tree=f,this.idx=z}select(){l._glp_ios_select_node(this.tree.ptr,this.idx)}get next(){let f=l._glp_ios_next_node(this.tree.ptr,this.idx);if(f!==0)return new o2(this.tree,f)}get previous(){let f=l._glp_ios_prev_node(this.tree.ptr,this.idx);if(f!==0)return new o2(this.tree,f)}get parent(){let f=l._glp_ios_up_node(this.tree.ptr,this.idx);if(f!==0)return new o2(this.tree,f)}get level(){return l._glp_ios_node_level(this.tree.ptr,this.idx)}get bound(){return l._glp_ios_node_bound(this.tree.ptr,this.idx)}}class d2{constructor(f){this.ptr=f}static _alloc(){d2._data===void 0&&(d2._data=l._malloc(72))}get reason(){let f=l._glp_ios_reason(this.ptr),z=y2.get(f);if(z===void 0)throw new Error(`unknown reason code '${f}'`);return z}get model(){let f=l._glp_ios_get_prob(this.ptr);return b2.fromPointer(f)}rowAttribute(f){return d2._alloc(),l._glp_ios_row_attr(this.ptr,f,d2._data),{level:l.getValue(d2._data+0,"i32"),origin:D2.get(l.getValue(d2._data+4,"i32")),cls:E.get(l.getValue(d2._data+8,"i32"))}}get gap(){return l._glp_ios_mip_gap(this.ptr)}setHeuristicSolution(f){let z=f.length,C=l._malloc(z*8),j=new Float64Array(l.HEAPU8.buffer,C,z);if(f instanceof Float64Array)f.set(j);else for(let[Z,H]of f.entries())j[Z]=H;l._glp_ios_heur_sol(this.ptr,C),l._free(C)}canBranch(f){return l._glp_ios_can_branch(this.ptr,f)}branchUpon(f,z){let C=e2[z];if(C===void 0)throw new Error(`unknown branch selection '${z}'`);l._glp_ios_branch_upon(this.ptr,f,C)}terminate(){l._glp_ios_terminate(this.ptr)}get size(){d2._alloc();let f=d2._data;return l._glp_ios_tree_size(this.ptr,f,f+4,f+8),{active:l.getValue(f,"i32"),current:l.getValue(f+4,"i32"),total:l.getValue(f+8,"i32")}}get currentNode(){let f=l._glp_ios_curr_node(this.ptr);if(f!==0)return new o2(this,f)}get bestNode(){let f=l._glp_ios_best_node(this.ptr);if(f!==0)return new o2(this,f)}get firstNode(){let f=l._glp_ios_next_node(this.ptr,0);if(f!==0)return new o2(this,f)}get lastNode(){let f=l._glp_ios_prev_node(this.ptr,0);if(f!==0)return new o2(this,f)}get cutPoolSize(){return l._glp_ios_pool_size(this.ptr)}clearCutPool(){l._glp_ios_clear_pool(this.ptr)}}a.MIP=void 0,(function(D){let f={ffv:m.BranchingTechnique.FFV,lfv:m.BranchingTechnique.LFV,mfv:m.BranchingTechnique.MFV,dth:m.BranchingTechnique.DTH,pch:m.BranchingTechnique.PCH,first_fractional:m.BranchingTechnique.FFV,last_fractional:m.BranchingTechnique.LFV,most_fractional:m.BranchingTechnique.MFV,driebeck_tomlin:m.BranchingTechnique.DTH,hybrid_pseudocost:m.BranchingTechnique.PCH},z={dfs:m.BacktrackingTechnique.DFS,bfs:m.BacktrackingTechnique.BFS,blb:m.BacktrackingTechnique.BLB,bph:m.BacktrackingTechnique.BPH,depth_first:m.BacktrackingTechnique.DFS,breadth_first:m.BacktrackingTechnique.BFS,best_bound:m.BacktrackingTechnique.BLB,best_projection:m.BacktrackingTechnique.BPH},C={none:m.PreprocessingTechnique.NONE,root:m.PreprocessingTechnique.ROOT,all:m.PreprocessingTechnique.ALL};function j(A){switch(A){case m.ReturnCode.OK:return"ok";case m.ReturnCode.EBOUND:return"bounds_incorrect";case m.ReturnCode.EROOT:return"no_root_basis";case m.ReturnCode.ENOPFS:return"no_primal_feasible";case m.ReturnCode.ENODFS:return"no_dual_feasible";case m.ReturnCode.EFAIL:return"failure";case m.ReturnCode.EMIPGAP:return"mip_gap_tolerance";case m.ReturnCode.ETMLIM:return"time_limit";case m.ReturnCode.ESTOP:return"stopped";default:throw new Error(`unknown return code from intopt: ${A}`)}}function Z(A){let T=l._malloc(328);l._glp_init_iocp(T);let x;if(A.msgLevel!==void 0&&l.setValue(T,s2(A.msgLevel),"i32"),A.branching!==void 0){if(x=f[A.branching],x===void 0)throw new Error(`unknown branching technique '${A.branching}'`);l.setValue(T+4,x,"i32")}if(A.backtracking!==void 0){if(x=z[A.backtracking],x===void 0)throw new Error(`unknown backtracking technique '${A.backtracking}'`);l.setValue(T+8,x,"i32")}if(A.tolInt!==void 0&&l.setValue(T+16,A.tolInt,"double"),A.tolObj!==void 0&&l.setValue(T+24,A.tolObj,"double"),A.limitTime!==void 0&&l.setValue(T+32,A.limitTime,"i32"),A.logFreq!==void 0&&l.setValue(T+36,A.logFreq,"i32"),A.logDelay!==void 0&&l.setValue(T+40,A.logDelay,"i32"),A.callbackPtr!==void 0&&l.setValue(T+44,A.callbackPtr,"*"),A.preprocessing!==void 0){if(x=C[A.preprocessing],x===void 0)throw new Error(`unknown preprocessing technique '${A.preprocessing}'`);l.setValue(T+56,x,"i32")}return A.gapMIP!==void 0&&l.setValue(T+64,A.gapMIP,"double"),A.cutsMIR!==void 0&&l.setValue(T+72,A.cutsMIR?1:0,"i32"),A.cutsGomory!==void 0&&l.setValue(T+76,A.cutsGomory?1:0,"i32"),A.cutsCover!==void 0&&l.setValue(T+80,A.cutsCover?1:0,"i32"),A.cutsClique!==void 0&&l.setValue(T+84,A.cutsClique?1:0,"i32"),A.presolve!==void 0&&l.setValue(T+88,A.presolve?1:0,"i32"),A.binarize!==void 0&&l.setValue(T+92,A.binarize?1:0,"i32"),A.heuristicFP!==void 0&&l.setValue(T+96,A.heuristicFP?1:0,"i32"),A.heuristicPS!==void 0&&l.setValue(T+100,A.heuristicPS?1:0,"i32"),A.limitProxy!==void 0&&l.setValue(T+104,A.limitProxy,"i32"),A.heuristicRound!==void 0&&l.setValue(T+108,A.heuristicRound?1:0,"i32"),T}function H(A,T){if(T.callback!==void 0){let X=T.callback;T.callbackPtr=l.addFunction(K=>X(new d2(K)),"vii")}let x=Z(T||{}),U=l._glp_intopt(A.ptr,x);return l._free(x),T.callback!==void 0&&(l.removeFunction(T.callbackPtr),T.callbackPtr=void 0),j(U)}D.solve=H})(a.MIP||(a.MIP={}));class b2{get vars(){return this._vars}get constrs(){return this._constrs}constructor(f){if(this._vars=[],this._constrs=[],l===void 0)throw new Error("wasm module not loaded");if(this.ptr=l._glp_create_prob(),f===void 0)return;let{name:z,sense:C}=f;z!==void 0&&(this.name=z),C!==void 0&&(this.sense=C)}set name(f){let z=l.lengthBytesUTF8(f)+1,C=l._malloc(z);l.stringToUTF8(f,C,z),l._glp_set_prob_name(this.ptr,C),l._free(C)}get name(){let f=l._glp_get_prob_name(this.ptr);return l.UTF8ToString(f)}static fromPointer(f){let z=Object.create(b2.prototype);return z.ptr=f,z}get value(){return l._glp_get_obj_val(this.ptr)}get valueInt(){return l._glp_ipt_obj_val(this.ptr)}get valueMIP(){return l._glp_mip_obj_val(this.ptr)}get numVars(){return l._glp_get_num_cols(this.ptr)}get numConstrs(){return l._glp_get_num_rows(this.ptr)}get numNZs(){return l._glp_get_num_nz(this.ptr)}get numBinary(){return l._glp_get_num_bin(this.ptr)}get numInteger(){return l._glp_get_num_int(this.ptr)}get status(){let f=l._glp_get_status(this.ptr);return Y(f)}get statusPrimal(){let f=l._glp_get_prim_stat(this.ptr);return Y(f)}get statusDual(){let f=l._glp_get_dual_stat(this.ptr);return Y(f)}get statusInt(){let f=l._glp_ipt_status(this.ptr);return Y(f)}get statusMIP(){let f=l._glp_mip_status(this.ptr);return Y(f)}addVars(f,z){return Number.isInteger(f)?this.addVarsByCount(f,z):Array.isArray(f)?f.length===0||typeof f[0]=="string"?this.addVarsByKeys(f,z):this.addVarsByProperties(f):this.addVarsFromPropertiesArray(f)}addVar(f){let z=l._glp_add_cols(this.ptr,1),C=new k(this,z,f);return this._vars.push(C),C}addVarsByProperties(f){let z=l._glp_add_cols(this.ptr,f.length),C=f.map((j,Z)=>new k(this,z+Z,j));return this._vars=this._vars.concat(C),C}addVarsByCount(f,z){let C=l._glp_add_cols(this.ptr,f),j=Array.from(Array(f).keys(),Z=>new k(this,C+Z,z&&z.name?Object.assign(Object.assign({},z),{name:`${z.name}_${Z}`}):z));return this._vars=this._vars.concat(j),j}addVarsByKeys(f,z){let C=z||{},{name:j}=C,Z=c(C,["name"]);return this.addVarsFromPropertiesArray(Object.fromEntries(f.map(H=>[H,Object.assign(Object.assign({},Z),{name:`${j}[${H}]`})])))}addVarsFromPropertiesArray(f){let z=[...Object.keys(f)];return Object.fromEntries(this.addVarsByProperties(Object.values(f)).map((C,j)=>[z[j],C]))}addConstrs(f,z){return Number.isInteger(f)?this.addConstrsByCount(f,z):this.addConstrsByProperties(f)}addConstr(f){let z=l._glp_add_rows(this.ptr,1),C=new F(this,z,f);return this._constrs.push(C),C}addConstrsByProperties(f){let z=l._glp_add_rows(this.ptr,f.length),C=f.map((j,Z)=>new F(this,z+Z,j));return this._constrs=this._constrs.concat(C),C}addConstrsByCount(f,z){let C=l._glp_add_rows(this.ptr,f),j=Array.from(Array(f).keys(),Z=>new F(this,C+Z,z&&z.name?Object.assign(Object.assign({},z),{name:`${z.name}_${Z}`}):z));return this._constrs=this._constrs.concat(j),j}update(){for(let f of this._constrs)f.update()}get sense(){return l._glp_get_obj_dir(this.ptr)===m.ObjectiveDirection.MIN?"min":"max"}set sense(f){if(f!=="min"&&f!=="max")throw new Error(`unknown sense '${f}'`);l._glp_set_obj_dir(this.ptr,f==="min"?m.ObjectiveDirection.MIN:m.ObjectiveDirection.MAX)}toModelLP(){this.update();let f="_tmp.lp",z=l._malloc(f.length+1);return l.stringToUTF8(f,z,f.length+1),l._glp_write_lp(this.ptr,0,z),l._free(z),l.FS.readFile(f,{encoding:"utf8"})}_refreshVariables(){let f=l._glp_get_num_cols(this.ptr);this._vars=Array.from(Array(f).keys(),z=>new k(this,z+1,{lb:l._glp_get_col_lb(this.ptr,z+1),ub:l._glp_get_col_ub(this.ptr,z+1)}))}_refreshConstraints(){let f=l._glp_get_num_rows(this.ptr);this._constrs=Array.from(Array(f).keys(),z=>new F(this,z+1,{lb:l._glp_get_row_lb(this.ptr,z+1),ub:l._glp_get_row_ub(this.ptr,z+1)}))}static fromModelLP(f){let z=new b2,C="_tmp.lp";l.FS.writeFile(C,f);let j=l._malloc(C.length+1);return l.stringToUTF8(C,j,C.length+1),l._glp_read_lp(z.ptr,0,j),l._free(j),z._refreshVariables(),z._refreshConstraints(),z}toMPS(){this.update();let f="_tmp.mps",z=l._malloc(f.length+1);return l.stringToUTF8(f,z,f.length+1),l._glp_write_mps(this.ptr,m.MPSFormat.FILE,0,z),l._free(z),l.FS.readFile(f,{encoding:"utf8"})}static fromMPS(f,z){let C=new b2,j="_tmp.mps";l.FS.writeFile(j,f);let Z=l._malloc(j.length+1);l.stringToUTF8(j,Z,j.length+1);let H=z==="deck"?m.MPSFormat.DECK:m.MPSFormat.FILE,A=l._glp_read_mps(C.ptr,H,0,Z);if(l._free(Z),A!==0)throw new Error("mps reading failed");return C._refreshVariables(),C._refreshConstraints(),C}simplex(f){return this.update(),a.Simplex.solve(this,f||{})}exact(f){return this.update(),a.Simplex.solveExact(this,f||{})}interior(f){return this.update(),a.Interior.solve(this,f||{})}intopt(f){return this.update(),a.MIP.solve(this,f||{})}get solution(){switch(this.status){case"undefined":case"infeasible":throw new Error(`status is '${this.status}', run simplex first`);case"feasible":case"optimal":return[`status = ${this.status}`,...this._vars.map(f=>`${f.name} = ${f.value}`),`value = ${this.value}`].join(`
`);case"unbounded":return"problem is unbounded";case"no_feasible":return"problem has no feasible solution";default:throw new Error("unknown status")}}get solutionInt(){switch(this.statusInt){case"undefined":case"infeasible":throw new Error(`status is '${this.statusInt}', run interior first`);case"optimal":return[`status = ${this.statusInt}`,...this._vars.map(f=>`${f.name} = ${Number(f.valueInt.toFixed(6))}`),`value = ${Number(this.valueInt.toFixed(6))}`].join(`
`);case"no_feasible":return"problem has no feasible solution";default:throw new Error("unknown status")}}get solutionMIP(){switch(this.statusMIP){case"undefined":throw new Error(`status is '${this.statusMIP}', run intopt first`);case"feasible":case"optimal":return[`status = ${this.statusMIP}`,...this._vars.map(f=>`${f.name} = ${f.valueMIP}`),`value = ${this.valueMIP}`].join(`
`);case"no_feasible":return"problem has no feasible solution";default:throw new Error("unknown status")}}get ray(){let f=l._glp_get_unbnd_ray(this.ptr);if(f===0)throw new Error("no unbounded ray");return f<=this.numConstrs?this._constrs[f-1]:this._vars[f-1-this.numConstrs]}getTableau(f){let z=f===void 0?f=C=>C.toString():f;return[...[...this.vars,...this.constrs].filter(C=>C.status==="basic").map(C=>C.name+" = "+[...C.row.map(([j,Z])=>`${z(j instanceof k?Z:-Z)} ${j.name}`),z(C.value)].join(" + ")),"z = "+[...[...this.vars,...this.constrs].filter(C=>C.status!=="basic").map(C=>`${z(C instanceof k?C.dual:-C.dual)} ${C.name}`),z(this.value)].join(" + ")].join(`
`)}}a.Constraint=F,a.Model=b2,a.Node=o2,a.Tree=d2,a.Variable=k,a.loadModule=d,Object.defineProperty(a,"__esModule",{value:!0})})});var Ce=null;function v1(){return Ce}function U0(a){Ce??=a}var j4=class{},j0=(()=>{class a{historyGo(e){throw new Error("")}static \u0275fac=function(r){return new(r||a)};static \u0275prov=a2({token:a,factory:()=>Q(Se),providedIn:"platform"})}return a})();var Se=(()=>{class a extends j0{_location;_history;_doc=Q(R2);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return v1().getBaseHref(this._doc)}onPopState(e){let r=v1().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",e,!1),()=>r.removeEventListener("popstate",e)}onHashChange(e){let r=v1().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",e,!1),()=>r.removeEventListener("hashchange",e)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(e){this._location.pathname=e}pushState(e,r,c){this._history.pushState(e,r,c)}replaceState(e,r,c){this._history.replaceState(e,r,c)}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||a)};static \u0275prov=a2({token:a,factory:()=>new a,providedIn:"platform"})}return a})();function we(a,t){return a?t?a.endsWith("/")?t.startsWith("/")?a+t.slice(1):a+t:t.startsWith("/")?a+t:`${a}/${t}`:a:t}function ye(a){let t=a.search(/#|\?|$/);return a[t-1]==="/"?a.slice(0,t-1)+a.slice(t):a}function N1(a){return a&&a[0]!=="?"?`?${a}`:a}var x3=(()=>{class a{historyGo(e){throw new Error("")}static \u0275fac=function(r){return new(r||a)};static \u0275prov=a2({token:a,factory:()=>Q(Ne),providedIn:"root"})}return a})(),xe=new G2(""),Ne=(()=>{class a extends x3{_platformLocation;_baseHref;_removeListenerFns=[];constructor(e,r){super(),this._platformLocation=e,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??Q(R2).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return we(this._baseHref,e)}path(e=!1){let r=this._platformLocation.pathname+N1(this._platformLocation.search),c=this._platformLocation.hash;return c&&e?`${r}${c}`:r}pushState(e,r,c,i){let o=this.prepareExternalUrl(c+N1(i));this._platformLocation.pushState(e,r,o)}replaceState(e,r,c,i){let o=this.prepareExternalUrl(c+N1(i));this._platformLocation.replaceState(e,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static \u0275fac=function(r){return new(r||a)(p2(j0),p2(xe,8))};static \u0275prov=a2({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})(),De=(()=>{class a{_subject=new S3;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(e){this._locationStrategy=e;let r=this._locationStrategy.getBaseHref();this._basePath=ni(ye(be(r))),this._locationStrategy.onPopState(c=>{this._subject.next({url:this.path(!0),pop:!0,state:c.state,type:c.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,r=""){return this.path()==this.normalize(e+N1(r))}normalize(e){return a.stripTrailingSlash(ci(this._basePath,be(e)))}prepareExternalUrl(e){return e&&e[0]!=="/"&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,r="",c=null){this._locationStrategy.pushState(c,"",e,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+N1(r)),c)}replaceState(e,r="",c=null){this._locationStrategy.replaceState(c,"",e,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+N1(r)),c)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",r){this._urlChangeListeners.forEach(c=>c(e,r))}subscribe(e,r,c){return this._subject.subscribe({next:e,error:r??void 0,complete:c??void 0})}static normalizeQueryParams=N1;static joinWithSlash=we;static stripTrailingSlash=ye;static \u0275fac=function(r){return new(r||a)(p2(x3))};static \u0275prov=a2({token:a,factory:()=>ri(),providedIn:"root"})}return a})();function ri(){return new De(p2(x3))}function ci(a,t){if(!a||!t.startsWith(a))return t;let e=t.substring(a.length);return e===""||["/",";","?","#"].includes(e[0])?e:t}function be(a){return a.replace(/\/index.html$/,"")}function ni(a){if(new RegExp("^(https?:)?//").test(a)){let[,e]=a.split(/\/\/[^\/]+/);return e}return a}function ii(a,t){return new E2(2100,!1)}var H0=class{createSubscription(t,e,r){return h4(()=>t.subscribe({next:e,error:r}))}dispose(t){h4(()=>t.unsubscribe())}},V0=class{createSubscription(t,e,r){return t.then(c=>e?.(c),c=>r?.(c)),{unsubscribe:()=>{e=null,r=null}}}dispose(t){t.unsubscribe()}},li=new V0,oi=new H0,si=(()=>{class a{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;applicationErrorHandler=Q(re);constructor(e){this._ref=e}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(e){if(!this._obj){if(e)try{this.markForCheckOnValueUpdate=!1,this._subscribe(e)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return e!==this._obj?(this._dispose(),this.transform(e)):this._latestValue}_subscribe(e){this._obj=e,this._strategy=this._selectStrategy(e),this._subscription=this._strategy.createSubscription(e,r=>this._updateLatestValue(e,r),r=>this.applicationErrorHandler(r))}_selectStrategy(e){if(he(e))return li;if(ge(e))return oi;throw ii(a,e)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(e,r){e===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(r){return new(r||a)(B0(Me,16))};static \u0275pipe=O0({name:"async",type:a,pure:!1})}return a})();function fi(a,t){return{key:a,value:t}}var ui=(()=>{class a{differs;constructor(e){this.differs=e}differ;keyValues=[];compareFn=ke;transform(e,r=ke){if(!e||!(e instanceof Map)&&typeof e!="object")return null;this.differ??=this.differs.find(e).create();let c=this.differ.diff(e),i=r!==this.compareFn;return c&&(this.keyValues=[],c.forEachItem(o=>{this.keyValues.push(fi(o.key,o.currentValue))})),(c||i)&&(r&&this.keyValues.sort(r),this.compareFn=r),this.keyValues}static \u0275fac=function(r){return new(r||a)(B0(Le,16))};static \u0275pipe=O0({name:"keyvalue",type:a,pure:!1})}return a})();function ke(a,t){let e=a.key,r=t.key;if(e===r)return 0;if(e==null)return 1;if(r==null)return-1;if(typeof e=="string"&&typeof r=="string")return e<r?-1:1;if(typeof e=="number"&&typeof r=="number")return e-r;if(typeof e=="boolean"&&typeof r=="boolean")return e<r?-1:1;let c=String(e),i=String(r);return c==i?0:c<i?-1:1}function H4(a,t){t=encodeURIComponent(t);for(let e of a.split(";")){let r=e.indexOf("="),[c,i]=r==-1?[e,""]:[e.slice(0,r),e.slice(r+1)];if(c.trim()===t)return decodeURIComponent(i)}return null}var W1=class{};var W0="browser";function Sf(a){return a===W0}var D3=new G2(""),Y0=(()=>{class a{_zone;_plugins;_eventNameToPlugin=new Map;constructor(e,r){this._zone=r,e.forEach(c=>{c.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,r,c,i){return this._findPluginFor(r).addEventListener(e,r,c,i)}getZone(){return this._zone}_findPluginFor(e){let r=this._eventNameToPlugin.get(e);if(r)return r;if(r=this._plugins.find(i=>i.supports(e)),!r)throw new E2(5101,!1);return this._eventNameToPlugin.set(e,r),r}static \u0275fac=function(r){return new(r||a)(p2(D3),p2(m4))};static \u0275prov=a2({token:a,factory:a.\u0275fac})}return a})(),V4=class{_doc;constructor(t){this._doc=t}manager},$0="ng-app-id";function Re(a){for(let t of a)t.remove()}function Ae(a,t){let e=t.createElement("style");return e.textContent=a,e}function mi(a,t,e,r){let c=a.head?.querySelectorAll(`style[${$0}="${t}"],link[${$0}="${t}"]`);if(c)for(let i of c)i.removeAttribute($0),i instanceof HTMLLinkElement?r.set(i.href.slice(i.href.lastIndexOf("/")+1),{usage:0,elements:[i]}):i.textContent&&e.set(i.textContent,{usage:0,elements:[i]})}function K0(a,t){let e=t.createElement("link");return e.setAttribute("rel","stylesheet"),e.setAttribute("href",a),e}var Z0=(()=>{class a{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(e,r,c,i={}){this.doc=e,this.appId=r,this.nonce=c,mi(e,r,this.inline,this.external),this.hosts.add(e.head)}addStyles(e,r){for(let c of e)this.addUsage(c,this.inline,Ae);r?.forEach(c=>this.addUsage(c,this.external,K0))}removeStyles(e,r){for(let c of e)this.removeUsage(c,this.inline);r?.forEach(c=>this.removeUsage(c,this.external))}addUsage(e,r,c){let i=r.get(e);i?i.usage++:r.set(e,{usage:1,elements:[...this.hosts].map(o=>this.addElement(o,c(e,this.doc)))})}removeUsage(e,r){let c=r.get(e);c&&(c.usage--,c.usage<=0&&(Re(c.elements),r.delete(e)))}ngOnDestroy(){for(let[,{elements:e}]of[...this.inline,...this.external])Re(e);this.hosts.clear()}addHost(e){this.hosts.add(e);for(let[r,{elements:c}]of this.inline)c.push(this.addElement(e,Ae(r,this.doc)));for(let[r,{elements:c}]of this.external)c.push(this.addElement(e,K0(r,this.doc)))}removeHost(e){this.hosts.delete(e)}addElement(e,r){return this.nonce&&r.setAttribute("nonce",this.nonce),e.appendChild(r)}static \u0275fac=function(r){return new(r||a)(p2(R2),p2(I0),p2(F0,8),p2(U4))};static \u0275prov=a2({token:a,factory:a.\u0275fac})}return a})(),X0={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Q0=/%COMP%/g;var Ie="%COMP%",hi=`_nghost-${Ie}`,gi=`_ngcontent-${Ie}`,vi=!0,zi=new G2("",{providedIn:"root",factory:()=>vi});function Mi(a){return gi.replace(Q0,a)}function Li(a){return hi.replace(Q0,a)}function Fe(a,t){return t.map(e=>e.replace(Q0,a))}var e6=(()=>{class a{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;animationDisabled;maxAnimationTimeout;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;registry;constructor(e,r,c,i,o,l,d,m=null,v,_,y=null){this.eventManager=e,this.sharedStylesHost=r,this.appId=c,this.removeStylesOnCompDestroy=i,this.doc=o,this.platformId=l,this.ngZone=d,this.nonce=m,this.animationDisabled=v,this.maxAnimationTimeout=_,this.tracingService=y,this.platformIsServer=!1,this.defaultRenderer=new q4(e,o,d,this.platformIsServer,this.tracingService,this.registry=ae(),this.maxAnimationTimeout)}createRenderer(e,r){if(!e||!r)return this.defaultRenderer;let c=this.getOrCreateRenderer(e,r);return c instanceof N3?c.applyToHost(e):c instanceof G4&&c.applyStyles(),c}getOrCreateRenderer(e,r){let c=this.rendererByCompId,i=c.get(r.id);if(!i){let o=this.doc,l=this.ngZone,d=this.eventManager,m=this.sharedStylesHost,v=this.removeStylesOnCompDestroy,_=this.platformIsServer,y=this.tracingService;switch(r.encapsulation){case P0.Emulated:i=new N3(d,m,r,this.appId,v,o,l,_,y,this.registry,this.animationDisabled,this.maxAnimationTimeout);break;case P0.ShadowDom:return new J0(d,m,e,r,o,l,this.nonce,_,y,this.registry,this.maxAnimationTimeout);default:i=new G4(d,m,r,v,o,l,_,y,this.registry,this.animationDisabled,this.maxAnimationTimeout);break}c.set(r.id,i)}return i}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(e){this.rendererByCompId.delete(e)}static \u0275fac=function(r){return new(r||a)(p2(Y0),p2(Z0),p2(I0),p2(zi),p2(R2),p2(U4),p2(m4),p2(F0),p2(ve),p2(ze),p2(me,8))};static \u0275prov=a2({token:a,factory:a.\u0275fac})}return a})(),q4=class{eventManager;doc;ngZone;platformIsServer;tracingService;registry;maxAnimationTimeout;data=Object.create(null);throwOnSyntheticProps=!0;constructor(t,e,r,c,i,o,l){this.eventManager=t,this.doc=e,this.ngZone=r,this.platformIsServer=c,this.tracingService=i,this.registry=o,this.maxAnimationTimeout=l}destroy(){}destroyNode=null;createElement(t,e){return e?this.doc.createElementNS(X0[e]||e,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,e){(Te(t)?t.content:t).appendChild(e)}insertBefore(t,e,r){t&&(Te(t)?t.content:t).insertBefore(e,r)}removeChild(t,e){let{elements:r}=this.registry;if(r){r.animate(e,()=>e.remove(),this.maxAnimationTimeout);return}e.remove()}selectRootElement(t,e){let r=typeof t=="string"?this.doc.querySelector(t):t;if(!r)throw new E2(-5104,!1);return e||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,r,c){if(c){e=c+":"+e;let i=X0[c];i?t.setAttributeNS(i,e,r):t.setAttribute(e,r)}else t.setAttribute(e,r)}removeAttribute(t,e,r){if(r){let c=X0[r];c?t.removeAttributeNS(c,e):t.removeAttribute(`${r}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,r,c){c&(p4.DashCase|p4.Important)?t.style.setProperty(e,r,c&p4.Important?"important":""):t.style[e]=r}removeStyle(t,e,r){r&p4.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,r){t!=null&&(t[e]=r)}setValue(t,e){t.nodeValue=e}listen(t,e,r,c){if(typeof t=="string"&&(t=v1().getGlobalEventTarget(this.doc,t),!t))throw new E2(5102,!1);let i=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(i=this.tracingService.wrapEventListener(t,e,i)),this.eventManager.addEventListener(t,e,i,c)}decoratePreventDefault(t){return e=>{if(e==="__ngUnwrap__")return t;t(e)===!1&&e.preventDefault()}}};function Te(a){return a.tagName==="TEMPLATE"&&a.content!==void 0}var J0=class extends q4{sharedStylesHost;hostEl;shadowRoot;constructor(t,e,r,c,i,o,l,d,m,v,_){super(t,i,o,d,m,v,_),this.sharedStylesHost=e,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let y=c.styles;y=Fe(c.id,y);for(let S of y){let V=document.createElement("style");l&&V.setAttribute("nonce",l),V.textContent=S,this.shadowRoot.appendChild(V)}let N=c.getExternalStyles?.();if(N)for(let S of N){let V=K0(S,i);l&&V.setAttribute("nonce",l),this.shadowRoot.appendChild(V)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,r){return super.insertBefore(this.nodeOrShadowRoot(t),e,r)}removeChild(t,e){return super.removeChild(null,e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},G4=class extends q4{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;_animationDisabled;constructor(t,e,r,c,i,o,l,d,m,v,_,y){super(t,i,o,l,d,m,_),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=c,this._animationDisabled=v;let N=r.styles;this.styles=y?Fe(y,N):N,this.styleUrls=r.getExternalStyles?.(y)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){if(this.removeStylesOnCompDestroy){if(!this._animationDisabled&&this.registry.elements){this.ngZone.runOutsideAngular(()=>{setTimeout(()=>{this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)},this.maxAnimationTimeout)});return}this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}}},N3=class extends G4{contentAttr;hostAttr;constructor(t,e,r,c,i,o,l,d,m,v,_,y){let N=c+"-"+r.id;super(t,e,r,i,o,l,d,m,v,_,y,N),this.contentAttr=Mi(N),this.hostAttr=Li(N)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){let r=super.createElement(t,e);return super.setAttribute(r,this.contentAttr,""),r}};var k3=class a extends j4{supportsDOMEvents=!0;static makeCurrent(){U0(new a)}onAndCancel(t,e,r,c){return t.addEventListener(e,r,c),()=>{t.removeEventListener(e,r,c)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.remove()}createElement(t,e){return e=e||this.getDefaultDocument(),e.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return e==="window"?window:e==="document"?t:e==="body"?t.body:null}getBaseHref(t){let e=yi();return e==null?null:bi(e)}resetBaseElement(){W4=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return H4(document.cookie,t)}},W4=null;function yi(){return W4=W4||document.head.querySelector("base"),W4?W4.getAttribute("href"):null}function bi(a){return new URL(a,document.baseURI).pathname}var Ci=(()=>{class a{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||a)};static \u0275prov=a2({token:a,factory:a.\u0275fac})}return a})(),Be=(()=>{class a extends V4{constructor(e){super(e)}supports(e){return!0}addEventListener(e,r,c,i){return e.addEventListener(r,c,i),()=>this.removeEventListener(e,r,c,i)}removeEventListener(e,r,c,i){return e.removeEventListener(r,c,i)}static \u0275fac=function(r){return new(r||a)(p2(R2))};static \u0275prov=a2({token:a,factory:a.\u0275fac})}return a})(),Pe=["alt","control","meta","shift"],Si={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},wi={alt:a=>a.altKey,control:a=>a.ctrlKey,meta:a=>a.metaKey,shift:a=>a.shiftKey},Oe=(()=>{class a extends V4{constructor(e){super(e)}supports(e){return a.parseEventName(e)!=null}addEventListener(e,r,c,i){let o=a.parseEventName(r),l=a.eventCallback(o.fullKey,c,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>v1().onAndCancel(e,o.domEventName,l,i))}static parseEventName(e){let r=e.toLowerCase().split("."),c=r.shift();if(r.length===0||!(c==="keydown"||c==="keyup"))return null;let i=a._normalizeKey(r.pop()),o="",l=r.indexOf("code");if(l>-1&&(r.splice(l,1),o="code."),Pe.forEach(m=>{let v=r.indexOf(m);v>-1&&(r.splice(v,1),o+=m+".")}),o+=i,r.length!=0||i.length===0)return null;let d={};return d.domEventName=c,d.fullKey=o,d}static matchEventFullKeyCode(e,r){let c=Si[e.key]||e.key,i="";return r.indexOf("code.")>-1&&(c=e.code,i="code."),c==null||!c?!1:(c=c.toLowerCase(),c===" "?c="space":c==="."&&(c="dot"),Pe.forEach(o=>{if(o!==c){let l=wi[o];l(e)&&(i+=o+".")}}),i+=c,i===r)}static eventCallback(e,r,c){return i=>{a.matchEventFullKeyCode(i,e)&&c.runGuarded(()=>r(i))}}static _normalizeKey(e){return e==="esc"?"escape":e}static \u0275fac=function(r){return new(r||a)(p2(R2))};static \u0275prov=a2({token:a,factory:a.\u0275fac})}return a})();function xi(a,t,e){let r=U2({rootComponent:a,platformRef:e?.platformRef},Ni(t));return _e(r)}function Ni(a){return{appProviders:[...Ai,...a?.providers??[]],platformProviders:Ri}}function Di(){k3.makeCurrent()}function ki(){return new A0}function Ei(){return ce(document),document}var Ri=[{provide:U4,useValue:W0},{provide:ne,useValue:Di,multi:!0},{provide:R2,useFactory:Ei}];var Ai=[{provide:Q6,useValue:"root"},{provide:A0,useFactory:ki},{provide:D3,useClass:Be,multi:!0,deps:[R2]},{provide:D3,useClass:Oe,multi:!0,deps:[R2]},e6,Z0,Y0,{provide:pe,useExisting:e6},{provide:W1,useClass:Ci},[]];var M4=class{},$4=class{},D1=class a{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(t){t?typeof t=="string"?this.lazyInit=()=>{this.headers=new Map,t.split(`
`).forEach(e=>{let r=e.indexOf(":");if(r>0){let c=e.slice(0,r),i=e.slice(r+1).trim();this.addHeaderEntry(c,i)}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((e,r)=>{this.addHeaderEntry(r,e)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([e,r])=>{this.setHeaderEntries(e,r)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();let e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof a?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){let e=new a;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof a?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){let e=t.name.toLowerCase();switch(t.op){case"a":case"s":let r=t.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(t.name,e);let c=(t.op==="a"?this.headers.get(e):void 0)||[];c.push(...r),this.headers.set(e,c);break;case"d":let i=t.value;if(!i)this.headers.delete(e),this.normalizedNames.delete(e);else{let o=this.headers.get(e);if(!o)return;o=o.filter(l=>i.indexOf(l)===-1),o.length===0?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,o)}break}}addHeaderEntry(t,e){let r=t.toLowerCase();this.maybeSetNormalizedName(t,r),this.headers.has(r)?this.headers.get(r).push(e):this.headers.set(r,[e])}setHeaderEntries(t,e){let r=(Array.isArray(e)?e:[e]).map(i=>i.toString()),c=t.toLowerCase();this.headers.set(c,r),this.maybeSetNormalizedName(t,c)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}};var R3=class{encodeKey(t){return Ue(t)}encodeValue(t){return Ue(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}};function Ti(a,t){let e=new Map;return a.length>0&&a.replace(/^\?/,"").split("&").forEach(c=>{let i=c.indexOf("="),[o,l]=i==-1?[t.decodeKey(c),""]:[t.decodeKey(c.slice(0,i)),t.decodeValue(c.slice(i+1))],d=e.get(o)||[];d.push(l),e.set(o,d)}),e}var Ii=/%(\d[a-f0-9])/gi,Fi={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Ue(a){return encodeURIComponent(a).replace(Ii,(t,e)=>Fi[e]??t)}function E3(a){return`${a}`}var z1=class a{map;encoder;updates=null;cloneFrom=null;constructor(t={}){if(this.encoder=t.encoder||new R3,t.fromString){if(t.fromObject)throw new E2(2805,!1);this.map=Ti(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{let r=t.fromObject[e],c=Array.isArray(r)?r.map(E3):[E3(r)];this.map.set(e,c)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();let e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){let e=[];return Object.keys(t).forEach(r=>{let c=t[r];Array.isArray(c)?c.forEach(i=>{e.push({param:r,value:i,op:"a"})}):e.push({param:r,value:c,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{let e=this.encoder.encodeKey(t);return this.map.get(t).map(r=>e+"="+this.encoder.encodeValue(r)).join("&")}).filter(t=>t!=="").join("&")}clone(t){let e=new a({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":let e=(t.op==="a"?this.map.get(t.param):void 0)||[];e.push(E3(t.value)),this.map.set(t.param,e);break;case"d":if(t.value!==void 0){let r=this.map.get(t.param)||[],c=r.indexOf(E3(t.value));c!==-1&&r.splice(c,1),r.length>0?this.map.set(t.param,r):this.map.delete(t.param)}else{this.map.delete(t.param);break}}}),this.cloneFrom=this.updates=null)}};var A3=class{map=new Map;set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}};function Pi(a){switch(a){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function je(a){return typeof ArrayBuffer<"u"&&a instanceof ArrayBuffer}function He(a){return typeof Blob<"u"&&a instanceof Blob}function Ve(a){return typeof FormData<"u"&&a instanceof FormData}function Bi(a){return typeof URLSearchParams<"u"&&a instanceof URLSearchParams}var qe="Content-Type",Ge="Accept",We="X-Request-URL",$e="text/plain",Xe="application/json",Oi=`${Xe}, ${$e}, */*`,v4=class a{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;credentials;keepalive=!1;cache;priority;mode;redirect;referrer;integrity;responseType="json";method;params;urlWithParams;transferCache;timeout;constructor(t,e,r,c){this.url=e,this.method=t.toUpperCase();let i;if(Pi(this.method)||c?(this.body=r!==void 0?r:null,i=c):i=r,i){if(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,this.keepalive=!!i.keepalive,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.context&&(this.context=i.context),i.params&&(this.params=i.params),i.priority&&(this.priority=i.priority),i.cache&&(this.cache=i.cache),i.credentials&&(this.credentials=i.credentials),typeof i.timeout=="number"){if(i.timeout<1||!Number.isInteger(i.timeout))throw new E2(2822,"");this.timeout=i.timeout}i.mode&&(this.mode=i.mode),i.redirect&&(this.redirect=i.redirect),i.integrity&&(this.integrity=i.integrity),i.referrer&&(this.referrer=i.referrer),this.transferCache=i.transferCache}if(this.headers??=new D1,this.context??=new A3,!this.params)this.params=new z1,this.urlWithParams=e;else{let o=this.params.toString();if(o.length===0)this.urlWithParams=e;else{let l=e.indexOf("?"),d=l===-1?"?":l<e.length-1?"&":"";this.urlWithParams=e+d+o}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||je(this.body)||He(this.body)||Ve(this.body)||Bi(this.body)?this.body:this.body instanceof z1?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||Ve(this.body)?null:He(this.body)?this.body.type||null:je(this.body)?null:typeof this.body=="string"?$e:this.body instanceof z1?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?Xe:null}clone(t={}){let e=t.method||this.method,r=t.url||this.url,c=t.responseType||this.responseType,i=t.keepalive??this.keepalive,o=t.priority||this.priority,l=t.cache||this.cache,d=t.mode||this.mode,m=t.redirect||this.redirect,v=t.credentials||this.credentials,_=t.referrer||this.referrer,y=t.integrity||this.integrity,N=t.transferCache??this.transferCache,S=t.timeout??this.timeout,V=t.body!==void 0?t.body:this.body,W=t.withCredentials??this.withCredentials,B=t.reportProgress??this.reportProgress,k=t.headers||this.headers,F=t.params||this.params,P=t.context??this.context;return t.setHeaders!==void 0&&(k=Object.keys(t.setHeaders).reduce((J,Y)=>J.set(Y,t.setHeaders[Y]),k)),t.setParams&&(F=Object.keys(t.setParams).reduce((J,Y)=>J.set(Y,t.setParams[Y]),F)),new a(e,r,V,{params:F,headers:k,context:P,reportProgress:B,responseType:c,withCredentials:W,transferCache:N,keepalive:i,cache:l,priority:o,timeout:S,mode:d,redirect:m,credentials:v,referrer:_,integrity:y})}},$1=(function(a){return a[a.Sent=0]="Sent",a[a.UploadProgress=1]="UploadProgress",a[a.ResponseHeader=2]="ResponseHeader",a[a.DownloadProgress=3]="DownloadProgress",a[a.Response=4]="Response",a[a.User=5]="User",a})($1||{}),L4=class{headers;status;statusText;url;ok;type;redirected;constructor(t,e=200,r="OK"){this.headers=t.headers||new D1,this.status=t.status!==void 0?t.status:e,this.statusText=t.statusText||r,this.url=t.url||null,this.redirected=t.redirected,this.ok=this.status>=200&&this.status<300}},T3=class a extends L4{constructor(t={}){super(t)}type=$1.ResponseHeader;clone(t={}){return new a({headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},X4=class a extends L4{body;constructor(t={}){super(t),this.body=t.body!==void 0?t.body:null}type=$1.Response;clone(t={}){return new a({body:t.body!==void 0?t.body:this.body,headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0,redirected:t.redirected??this.redirected})}},z4=class extends L4{name="HttpErrorResponse";message;error;ok=!1;constructor(t){super(t,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${t.url||"(unknown url)"}`:this.message=`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}},Ui=200,ji=204;function t6(a,t){return{body:t,headers:a.headers,context:a.context,observe:a.observe,params:a.params,reportProgress:a.reportProgress,responseType:a.responseType,withCredentials:a.withCredentials,credentials:a.credentials,transferCache:a.transferCache,timeout:a.timeout,keepalive:a.keepalive,priority:a.priority,cache:a.cache,mode:a.mode,redirect:a.redirect,integrity:a.integrity,referrer:a.referrer}}var F3=(()=>{class a{handler;constructor(e){this.handler=e}request(e,r,c={}){let i;if(e instanceof v4)i=e;else{let d;c.headers instanceof D1?d=c.headers:d=new D1(c.headers);let m;c.params&&(c.params instanceof z1?m=c.params:m=new z1({fromObject:c.params})),i=new v4(e,r,c.body!==void 0?c.body:null,{headers:d,context:c.context,params:m,reportProgress:c.reportProgress,responseType:c.responseType||"json",withCredentials:c.withCredentials,transferCache:c.transferCache,keepalive:c.keepalive,priority:c.priority,cache:c.cache,mode:c.mode,redirect:c.redirect,credentials:c.credentials,referrer:c.referrer,integrity:c.integrity,timeout:c.timeout})}let o=B4(i).pipe($6(d=>this.handler.handle(d)));if(e instanceof v4||c.observe==="events")return o;let l=o.pipe(s4(d=>d instanceof X4));switch(c.observe||"body"){case"body":switch(i.responseType){case"arraybuffer":return l.pipe(S1(d=>{if(d.body!==null&&!(d.body instanceof ArrayBuffer))throw new E2(2806,!1);return d.body}));case"blob":return l.pipe(S1(d=>{if(d.body!==null&&!(d.body instanceof Blob))throw new E2(2807,!1);return d.body}));case"text":return l.pipe(S1(d=>{if(d.body!==null&&typeof d.body!="string")throw new E2(2808,!1);return d.body}));case"json":default:return l.pipe(S1(d=>d.body))}case"response":return l;default:throw new E2(2809,!1)}}delete(e,r={}){return this.request("DELETE",e,r)}get(e,r={}){return this.request("GET",e,r)}head(e,r={}){return this.request("HEAD",e,r)}jsonp(e,r){return this.request("JSONP",e,{params:new z1().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,r={}){return this.request("OPTIONS",e,r)}patch(e,r,c={}){return this.request("PATCH",e,t6(c,r))}post(e,r,c={}){return this.request("POST",e,t6(c,r))}put(e,r,c={}){return this.request("PUT",e,t6(c,r))}static \u0275fac=function(r){return new(r||a)(p2(M4))};static \u0275prov=a2({token:a,factory:a.\u0275fac})}return a})();var Hi=new G2("");function Vi(a,t){return t(a)}function qi(a,t,e){return(r,c)=>te(e,()=>t(r,i=>a(i,c)))}var Ke=new G2(""),Je=new G2(""),Ye=new G2("",{providedIn:"root",factory:()=>!0});var I3=(()=>{class a extends M4{backend;injector;chain=null;pendingTasks=Q(T0);contributeToStability=Q(Ye);constructor(e,r){super(),this.backend=e,this.injector=r}handle(e){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(Ke),...this.injector.get(Je,[])]));this.chain=r.reduceRight((c,i)=>qi(c,i,this.injector),Vi)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(e,c=>this.backend.handle(c)).pipe(X6(r))}else return this.chain(e,r=>this.backend.handle(r))}static \u0275fac=function(r){return new(r||a)(p2($4),p2(ee))};static \u0275prov=a2({token:a,factory:a.\u0275fac})}return a})();var Gi=/^\)\]\}',?\n/,Wi=RegExp(`^${We}:`,"m");function $i(a){return"responseURL"in a&&a.responseURL?a.responseURL:Wi.test(a.getAllResponseHeaders())?a.getResponseHeader(We):null}var a6=(()=>{class a{xhrFactory;constructor(e){this.xhrFactory=e}handle(e){if(e.method==="JSONP")throw new E2(-2800,!1);let r=this.xhrFactory;return B4(null).pipe(w1(()=>new C3(i=>{let o=r.build();if(o.open(e.method,e.urlWithParams),e.withCredentials&&(o.withCredentials=!0),e.headers.forEach((W,B)=>o.setRequestHeader(W,B.join(","))),e.headers.has(Ge)||o.setRequestHeader(Ge,Oi),!e.headers.has(qe)){let W=e.detectContentTypeHeader();W!==null&&o.setRequestHeader(qe,W)}if(e.timeout&&(o.timeout=e.timeout),e.responseType){let W=e.responseType.toLowerCase();o.responseType=W!=="json"?W:"text"}let l=e.serializeBody(),d=null,m=()=>{if(d!==null)return d;let W=o.statusText||"OK",B=new D1(o.getAllResponseHeaders()),k=$i(o)||e.url;return d=new T3({headers:B,status:o.status,statusText:W,url:k}),d},v=()=>{let{headers:W,status:B,statusText:k,url:F}=m(),P=null;B!==ji&&(P=typeof o.response>"u"?o.responseText:o.response),B===0&&(B=P?Ui:0);let J=B>=200&&B<300;if(e.responseType==="json"&&typeof P=="string"){let Y=P;P=P.replace(Gi,"");try{P=P!==""?JSON.parse(P):null}catch(s2){P=Y,J&&(J=!1,P={error:s2,text:P})}}J?(i.next(new X4({body:P,headers:W,status:B,statusText:k,url:F||void 0})),i.complete()):i.error(new z4({error:P,headers:W,status:B,statusText:k,url:F||void 0}))},_=W=>{let{url:B}=m(),k=new z4({error:W,status:o.status||0,statusText:o.statusText||"Unknown Error",url:B||void 0});i.error(k)},y=_;e.timeout&&(y=W=>{let{url:B}=m(),k=new z4({error:new DOMException("Request timed out","TimeoutError"),status:o.status||0,statusText:o.statusText||"Request timeout",url:B||void 0});i.error(k)});let N=!1,S=W=>{N||(i.next(m()),N=!0);let B={type:$1.DownloadProgress,loaded:W.loaded};W.lengthComputable&&(B.total=W.total),e.responseType==="text"&&o.responseText&&(B.partialText=o.responseText),i.next(B)},V=W=>{let B={type:$1.UploadProgress,loaded:W.loaded};W.lengthComputable&&(B.total=W.total),i.next(B)};return o.addEventListener("load",v),o.addEventListener("error",_),o.addEventListener("timeout",y),o.addEventListener("abort",_),e.reportProgress&&(o.addEventListener("progress",S),l!==null&&o.upload&&o.upload.addEventListener("progress",V)),o.send(l),i.next({type:$1.Sent}),()=>{o.removeEventListener("error",_),o.removeEventListener("abort",_),o.removeEventListener("load",v),o.removeEventListener("timeout",y),e.reportProgress&&(o.removeEventListener("progress",S),l!==null&&o.upload&&o.upload.removeEventListener("progress",V)),o.readyState!==o.DONE&&o.abort()}})))}static \u0275fac=function(r){return new(r||a)(p2(W1))};static \u0275prov=a2({token:a,factory:a.\u0275fac})}return a})(),Ze=new G2(""),Xi="XSRF-TOKEN",Ki=new G2("",{providedIn:"root",factory:()=>Xi}),Ji="X-XSRF-TOKEN",Yi=new G2("",{providedIn:"root",factory:()=>Ji}),K4=class{},Zi=(()=>{class a{doc;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(e,r){this.doc=e,this.cookieName=r}getToken(){let e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=H4(e,this.cookieName),this.lastCookieString=e),this.lastToken}static \u0275fac=function(r){return new(r||a)(p2(R2),p2(Ki))};static \u0275prov=a2({token:a,factory:a.\u0275fac})}return a})();function Qi(a,t){let e=a.url.toLowerCase();if(!Q(Ze)||a.method==="GET"||a.method==="HEAD"||e.startsWith("http://")||e.startsWith("https://"))return t(a);let r=Q(K4).getToken(),c=Q(Yi);return r!=null&&!a.headers.has(c)&&(a=a.clone({headers:a.headers.set(c,r)})),t(a)}function el(...a){let t=[F3,a6,I3,{provide:M4,useExisting:I3},{provide:$4,useFactory:()=>Q(Hi,{optional:!0})??Q(a6)},{provide:Ke,useValue:Qi,multi:!0},{provide:Ze,useValue:!0},{provide:K4,useClass:Zi}];for(let e of a)t.push(...e.\u0275providers);return R0(t)}var Qe=(()=>{class a{_doc;constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}static \u0275fac=function(r){return new(r||a)(p2(R2))};static \u0275prov=a2({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})();var tl=(()=>{class a{static \u0275fac=function(r){return new(r||a)};static \u0275prov=a2({token:a,factory:function(r){let c=null;return r?c=new(r||a):c=p2(al),c},providedIn:"root"})}return a})(),al=(()=>{class a extends tl{_doc;constructor(e){super(),this._doc=e}sanitize(e,r){if(r==null)return null;switch(e){case G1.NONE:return r;case G1.HTML:return d4(r,"HTML")?u4(r):de(this._doc,String(r)).toString();case G1.STYLE:return d4(r,"Style")?u4(r):r;case G1.SCRIPT:if(d4(r,"Script"))return u4(r);throw new E2(5200,!1);case G1.URL:return d4(r,"URL")?u4(r):ue(String(r));case G1.RESOURCE_URL:if(d4(r,"ResourceURL"))return u4(r);throw new E2(5201,!1);default:throw new E2(5202,!1)}}bypassSecurityTrustHtml(e){return ie(e)}bypassSecurityTrustStyle(e){return le(e)}bypassSecurityTrustScript(e){return oe(e)}bypassSecurityTrustUrl(e){return se(e)}bypassSecurityTrustResourceUrl(e){return fe(e)}static \u0275fac=function(r){return new(r||a)(p2(R2))};static \u0275prov=a2({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})();var id={prefix:"fas",iconName:"rotate",icon:[512,512,[128260,"sync-alt"],"f2f1","M480.1 192l7.9 0c13.3 0 24-10.7 24-24l0-144c0-9.7-5.8-18.5-14.8-22.2S477.9 .2 471 7L419.3 58.8C375 22.1 318 0 256 0 127 0 20.3 95.4 2.6 219.5 .1 237 12.2 253.2 29.7 255.7s33.7-9.7 36.2-27.1C79.2 135.5 159.3 64 256 64 300.4 64 341.2 79 373.7 104.3L327 151c-6.9 6.9-8.9 17.2-5.2 26.2S334.3 192 344 192l136.1 0zm29.4 100.5c2.5-17.5-9.7-33.7-27.1-36.2s-33.7 9.7-36.2 27.1c-13.3 93-93.4 164.5-190.1 164.5-44.4 0-85.2-15-117.7-40.3L185 361c6.9-6.9 8.9-17.2 5.2-26.2S177.7 320 168 320L24 320c-13.3 0-24 10.7-24 24L0 488c0 9.7 5.8 18.5 14.8 22.2S34.1 511.8 41 505l51.8-51.8C137 489.9 194 512 256 512 385 512 491.7 416.6 509.4 292.5z"]};var ld={prefix:"fas",iconName:"question",icon:[320,512,[10067,10068,61736],"3f","M64 160c0-53 43-96 96-96s96 43 96 96c0 42.7-27.9 78.9-66.5 91.4-28.4 9.2-61.5 35.3-61.5 76.6l0 24c0 17.7 14.3 32 32 32s32-14.3 32-32l0-24c0-1.7 .6-4.1 3.5-7.3 3-3.3 7.9-6.5 13.7-8.4 64.3-20.7 110.8-81 110.8-152.3 0-88.4-71.6-160-160-160S0 71.6 0 160c0 17.7 14.3 32 32 32s32-14.3 32-32zm96 352c22.1 0 40-17.9 40-40s-17.9-40-40-40-40 17.9-40 40 17.9 40 40 40z"]};var od={prefix:"fas",iconName:"file-arrow-down",icon:[384,512,["file-download"],"f56d","M0 64C0 28.7 28.7 0 64 0L213.5 0c17 0 33.3 6.7 45.3 18.7L365.3 125.3c12 12 18.7 28.3 18.7 45.3L384 448c0 35.3-28.7 64-64 64L64 512c-35.3 0-64-28.7-64-64L0 64zm208-5.5l0 93.5c0 13.3 10.7 24 24 24L325.5 176 208 58.5zM175 441c9.4 9.4 24.6 9.4 33.9 0l64-64c9.4-9.4 9.4-24.6 0-33.9s-24.6-9.4-33.9 0l-23 23 0-86.1c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 86.1-23-23c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9l64 64z"]};var rl={prefix:"fas",iconName:"circle-pause",icon:[512,512,[62092,"pause-circle"],"f28b","M256 512a256 256 0 1 0 0-512 256 256 0 1 0 0 512zM224 192l0 128c0 17.7-14.3 32-32 32s-32-14.3-32-32l0-128c0-17.7 14.3-32 32-32s32 14.3 32 32zm128 0l0 128c0 17.7-14.3 32-32 32s-32-14.3-32-32l0-128c0-17.7 14.3-32 32-32s32 14.3 32 32z"]},e8=rl;var sd={prefix:"fas",iconName:"magnifying-glass",icon:[512,512,[128269,"search"],"f002","M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376C296.3 401.1 253.9 416 208 416 93.1 416 0 322.9 0 208S93.1 0 208 0 416 93.1 416 208zM208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288z"]};var fd={prefix:"fas",iconName:"arrow-right-long",icon:[576,512,["long-arrow-right"],"f178","M566.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-128-128c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L466.7 224 32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l434.7 0-73.4 73.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l128-128z"]};var ud={prefix:"fas",iconName:"table-columns",icon:[448,512,["columns"],"f0db","M0 96C0 60.7 28.7 32 64 32l320 0c35.3 0 64 28.7 64 64l0 320c0 35.3-28.7 64-64 64L64 480c-35.3 0-64-28.7-64-64L0 96zm64 64l0 256 128 0 0-256-128 0zm320 0l-128 0 0 256 128 0 0-256z"]};var dd={prefix:"fas",iconName:"angle-left",icon:[256,512,[8249],"f104","M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256 214.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"]};var pd={prefix:"fas",iconName:"forward",icon:[576,512,[9193],"f04e","M371.7 43.1C360.1 32 343 28.9 328.3 35.2S304 56 304 72l0 136.3-172.3-165.1C120.1 32 103 28.9 88.3 35.2S64 56 64 72l0 368c0 16 9.6 30.5 24.3 36.8s31.8 3.2 43.4-7.9L304 303.7 304 440c0 16 9.6 30.5 24.3 36.8s31.8 3.2 43.4-7.9l192-184c7.9-7.5 12.3-18 12.3-28.9s-4.5-21.3-12.3-28.9l-192-184z"]};var md={prefix:"fas",iconName:"database",icon:[448,512,[],"f1c0","M448 205.8c-14.8 9.8-31.8 17.7-49.5 24-47 16.8-108.7 26.2-174.5 26.2S96.4 246.5 49.5 229.8c-17.6-6.3-34.7-14.2-49.5-24L0 288c0 44.2 100.3 80 224 80s224-35.8 224-80l0-82.2zm0-77.8l0-48C448 35.8 347.7 0 224 0S0 35.8 0 80l0 48c0 44.2 100.3 80 224 80s224-35.8 224-80zM398.5 389.8C351.6 406.5 289.9 416 224 416S96.4 406.5 49.5 389.8c-17.6-6.3-34.7-14.2-49.5-24L0 432c0 44.2 100.3 80 224 80s224-35.8 224-80l0-66.2c-14.8 9.8-31.8 17.7-49.5 24z"]};var hd={prefix:"fas",iconName:"file-import",icon:[384,512,["arrow-right-to-file"],"f56f","M64 0C28.7 0 0 28.7 0 64l0 240 182.1 0-31-31c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l72 72c9.4 9.4 9.4 24.6 0 33.9l-72 72c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l31-31-182.1 0 0 96c0 35.3 28.7 64 64 64l256 0c35.3 0 64-28.7 64-64l0-277.5c0-17-6.7-33.3-18.7-45.3L258.7 18.7C246.7 6.7 230.5 0 213.5 0L64 0zM325.5 176L232 176c-13.3 0-24-10.7-24-24L208 58.5 325.5 176z"]};var gd={prefix:"fas",iconName:"square-check",icon:[448,512,[9745,9989,61510,"check-square"],"f14a","M64 32C28.7 32 0 60.7 0 96L0 416c0 35.3 28.7 64 64 64l320 0c35.3 0 64-28.7 64-64l0-320c0-35.3-28.7-64-64-64L64 32zM308.4 212.7l-80 128c-4.2 6.7-11.4 10.9-19.3 11.3s-15.5-3.2-20.2-9.6l-48-64c-8-10.6-5.8-25.6 4.8-33.6s25.6-5.8 33.6 4.8l27 36 61.4-98.3c7-11.2 21.8-14.7 33.1-7.6s14.7 21.8 7.6 33.1z"]};var vd={prefix:"fas",iconName:"box-open",icon:[640,512,[],"f49e","M560.3 237.2c10.4 11.8 28.3 14.4 41.8 5.5 14.7-9.8 18.7-29.7 8.9-44.4l-48-72c-2.8-4.2-6.6-7.7-11.1-10.2L351.4 4.7c-19.3-10.7-42.8-10.7-62.2 0L88.8 116c-5.4 3-9.7 7.4-12.6 12.8L27.7 218.7c-12.6 23.4-3.8 52.5 19.6 65.1l33 17.7 0 53.3c0 23 12.4 44.3 32.4 55.7l176 99.7c19.6 11.1 43.5 11.1 63.1 0l176-99.7c20.1-11.4 32.4-32.6 32.4-55.7l0-117.5zm-240-9.8L170.2 144 320.3 60.6 470.4 144 320.3 227.4zm-41.5 50.2l-21.3 46.2-165.8-88.8 25.4-47.2 161.7 89.8z"]};var zd={prefix:"fas",iconName:"angle-right",icon:[256,512,[8250],"f105","M247.1 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L179.2 256 41.9 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"]};var Md={prefix:"fas",iconName:"diagram-project",icon:[512,512,["project-diagram"],"f542","M0 80C0 53.5 21.5 32 48 32l96 0c26.5 0 48 21.5 48 48l0 16 128 0 0-16c0-26.5 21.5-48 48-48l96 0c26.5 0 48 21.5 48 48l0 96c0 26.5-21.5 48-48 48l-96 0c-26.5 0-48-21.5-48-48l0-16-128 0 0 16c0 7.3-1.7 14.3-4.6 20.5l68.6 91.5 80 0c26.5 0 48 21.5 48 48l0 96c0 26.5-21.5 48-48 48l-96 0c-26.5 0-48-21.5-48-48l0-96c0-7.3 1.7-14.3 4.6-20.5L128 224 48 224c-26.5 0-48-21.5-48-48L0 80z"]};var cl={prefix:"fas",iconName:"circle-exclamation",icon:[512,512,["exclamation-circle"],"f06a","M256 512a256 256 0 1 0 0-512 256 256 0 1 0 0 512zm0-376c13.3 0 24 10.7 24 24l0 112c0 13.3-10.7 24-24 24s-24-10.7-24-24l0-112c0-13.3 10.7-24 24-24zM229.3 352a26.7 26.7 0 1 1 53.3 0 26.7 26.7 0 1 1 -53.3 0z"]},t8=cl;var Ld={prefix:"fas",iconName:"play",icon:[448,512,[9654],"f04b","M91.2 36.9c-12.4-6.8-27.4-6.5-39.6 .7S32 57.9 32 72l0 368c0 14.1 7.5 27.2 19.6 34.4s27.2 7.5 39.6 .7l336-184c12.8-7 20.8-20.5 20.8-35.1s-8-28.1-20.8-35.1l-336-184z"]};var _d={prefix:"fas",iconName:"check",icon:[448,512,[10003,10004],"f00c","M434.8 70.1c14.3 10.4 17.5 30.4 7.1 44.7l-256 352c-5.5 7.6-14 12.3-23.4 13.1s-18.5-2.7-25.1-9.3l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l101.5 101.5 234-321.7c10.4-14.3 30.4-17.5 44.7-7.1z"]};var yd={prefix:"fas",iconName:"xmark",icon:[384,512,[128473,10005,10006,10060,215,"close","multiply","remove","times"],"f00d","M55.1 73.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L147.2 256 9.9 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192.5 301.3 329.9 438.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.8 256 375.1 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192.5 210.7 55.1 73.4z"]};var bd={prefix:"fas",iconName:"list",icon:[512,512,["list-squares"],"f03a","M40 48C26.7 48 16 58.7 16 72l0 48c0 13.3 10.7 24 24 24l48 0c13.3 0 24-10.7 24-24l0-48c0-13.3-10.7-24-24-24L40 48zM192 64c-17.7 0-32 14.3-32 32s14.3 32 32 32l288 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L192 64zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32l288 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-288 0zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32l288 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-288 0zM16 232l0 48c0 13.3 10.7 24 24 24l48 0c13.3 0 24-10.7 24-24l0-48c0-13.3-10.7-24-24-24l-48 0c-13.3 0-24 10.7-24 24zM40 368c-13.3 0-24 10.7-24 24l0 48c0 13.3 10.7 24 24 24l48 0c13.3 0 24-10.7 24-24l0-48c0-13.3-10.7-24-24-24l-48 0z"]};var Cd={prefix:"fas",iconName:"chevron-down",icon:[448,512,[],"f078","M201.4 406.6c12.5 12.5 32.8 12.5 45.3 0l192-192c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 338.7 54.6 169.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l192 192z"]};var Sd={prefix:"fas",iconName:"clock-rotate-left",icon:[576,512,["history"],"f1da","M288 64c106 0 192 86 192 192S394 448 288 448c-65.2 0-122.9-32.5-157.6-82.3-10.1-14.5-30.1-18-44.6-7.9s-18 30.1-7.9 44.6C124.1 468.6 201 512 288 512 429.4 512 544 397.4 544 256S429.4 0 288 0C202.3 0 126.5 42.1 80 106.7L80 80c0-17.7-14.3-32-32-32S16 62.3 16 80l0 112c0 17.7 14.3 32 32 32l24.6 0c.5 0 1 0 1.5 0l86 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-38.3 0C154.9 102.6 217 64 288 64zm24 88c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 104c0 6.4 2.5 12.5 7 17l72 72c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-65-65 0-94.1z"]};var wd={prefix:"fas",iconName:"arrow-up-short-wide",icon:[576,512,["sort-amount-up-alt"],"f885","M320 32c-17.7 0-32 14.3-32 32s14.3 32 32 32l32 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-32 0zm0 128c-17.7 0-32 14.3-32 32s14.3 32 32 32l96 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-96 0zm0 128c-17.7 0-32 14.3-32 32s14.3 32 32 32l160 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-160 0zm0 128c-17.7 0-32 14.3-32 32s14.3 32 32 32l224 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-224 0zM150.6 41.4c-12.5-12.5-32.8-12.5-45.3 0l-96 96c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L96 141.3 96 448c0 17.7 14.3 32 32 32s32-14.3 32-32l0-306.7 41.4 41.4c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3l-96-96z"]};var xd={prefix:"fas",iconName:"rotate-left",icon:[512,512,["rotate-back","rotate-backward","undo-alt"],"f2ea","M24 192l144 0c9.7 0 18.5-5.8 22.2-14.8s1.7-19.3-5.2-26.2l-46.7-46.7c75.3-58.6 184.3-53.3 253.5 15.9 75 75 75 196.5 0 271.5s-196.5 75-271.5 0c-10.2-10.2-19-21.3-26.4-33-9.5-14.9-29.3-19.3-44.2-9.8s-19.3 29.3-9.8 44.2C49.7 408.7 61.4 423.5 75 437 175 537 337 537 437 437S537 175 437 75C342.8-19.3 193.3-24.7 92.7 58.8L41 7C34.1 .2 23.8-1.9 14.8 1.8S0 14.3 0 24L0 168c0 13.3 10.7 24 24 24z"]};var Nd={prefix:"fas",iconName:"plus",icon:[448,512,[10133,61543,"add"],"2b","M256 64c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 160-160 0c-17.7 0-32 14.3-32 32s14.3 32 32 32l160 0 0 160c0 17.7 14.3 32 32 32s32-14.3 32-32l0-160 160 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-160 0 0-160z"]};var Dd={prefix:"fas",iconName:"arrow-down-wide-short",icon:[576,512,["sort-amount-asc","sort-amount-down"],"f160","M246.6 374.6l-96 96c-12.5 12.5-32.8 12.5-45.3 0l-96-96c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L96 370.7 96 64c0-17.7 14.3-32 32-32s32 14.3 32 32l0 306.7 41.4-41.4c12.5-12.5 32.8-12.5 45.3 0s12.5 32.8 0 45.3zM320 480c-17.7 0-32-14.3-32-32s14.3-32 32-32l32 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-32 0zm0-128c-17.7 0-32-14.3-32-32s14.3-32 32-32l96 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-96 0zm0-128c-17.7 0-32-14.3-32-32s14.3-32 32-32l160 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-160 0zm0-128c-17.7 0-32-14.3-32-32s14.3-32 32-32l224 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L320 96z"]};var kd={prefix:"fas",iconName:"eye-slash",icon:[576,512,[],"f070","M41-24.9c-9.4-9.4-24.6-9.4-33.9 0S-2.3-.3 7 9.1l528 528c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-96.4-96.4c2.7-2.4 5.4-4.8 8-7.2 46.8-43.5 78.1-95.4 93-131.1 3.3-7.9 3.3-16.7 0-24.6-14.9-35.7-46.2-87.7-93-131.1-47.1-43.7-111.8-80.6-192.6-80.6-56.8 0-105.6 18.2-146 44.2L41-24.9zM204.5 138.7c23.5-16.8 52.4-26.7 83.5-26.7 79.5 0 144 64.5 144 144 0 31.1-9.9 59.9-26.7 83.5l-34.7-34.7c12.7-21.4 17-47.7 10.1-73.7-13.7-51.2-66.4-81.6-117.6-67.9-8.6 2.3-16.7 5.7-24 10l-34.7-34.7zM325.3 395.1c-11.9 3.2-24.4 4.9-37.3 4.9-79.5 0-144-64.5-144-144 0-12.9 1.7-25.4 4.9-37.3L69.4 139.2c-32.6 36.8-55 75.8-66.9 104.5-3.3 7.9-3.3 16.7 0 24.6 14.9 35.7 46.2 87.7 93 131.1 47.1 43.7 111.8 80.6 192.6 80.6 37.3 0 71.2-7.9 101.5-20.6l-64.2-64.2z"]};var Ed={prefix:"fas",iconName:"pause",icon:[384,512,[9208],"f04c","M48 32C21.5 32 0 53.5 0 80L0 432c0 26.5 21.5 48 48 48l64 0c26.5 0 48-21.5 48-48l0-352c0-26.5-21.5-48-48-48L48 32zm224 0c-26.5 0-48 21.5-48 48l0 352c0 26.5 21.5 48 48 48l64 0c26.5 0 48-21.5 48-48l0-352c0-26.5-21.5-48-48-48l-64 0z"]};var Rd={prefix:"fas",iconName:"bars",icon:[448,512,["navicon"],"f0c9","M0 96C0 78.3 14.3 64 32 64l384 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 128C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32l384 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 288c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32L32 448c-17.7 0-32-14.3-32-32s14.3-32 32-32l384 0c17.7 0 32 14.3 32 32z"]};var Ad={prefix:"fas",iconName:"up-down",icon:[512,512,[8597,11021,"arrows-alt-v"],"f338","M406.6 502.6l96-96c9.2-9.2 11.9-22.9 6.9-34.9S492.9 352 480 352l-64 0 0-320c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 320-64 0c-12.9 0-24.6 7.8-29.6 19.8s-2.2 25.7 6.9 34.9l96 96c12.5 12.5 32.8 12.5 45.3 0zM150.6 9.4c-12.5-12.5-32.8-12.5-45.3 0l-96 96c-9.2 9.2-11.9 22.9-6.9 34.9S19.1 160 32 160l64 0 0 320c0 17.7 14.3 32 32 32s32-14.3 32-32l0-320 64 0c12.9 0 24.6-7.8 29.6-19.8s2.2-25.7-6.9-34.9l-96-96z"]};var Td={prefix:"fas",iconName:"book-open",icon:[512,512,[128214,128366],"f518","M256 141.3l0 309.3 .5-.2C311.1 427.7 369.7 416 428.8 416l19.2 0 0-320-19.2 0c-42.2 0-84.1 8.4-123.1 24.6-16.8 7-33.4 13.9-49.7 20.7zM230.9 61.5L256 72 281.1 61.5C327.9 42 378.1 32 428.8 32L464 32c26.5 0 48 21.5 48 48l0 352c0 26.5-21.5 48-48 48l-35.2 0c-50.7 0-100.9 10-147.7 29.5l-12.8 5.3c-7.9 3.3-16.7 3.3-24.6 0l-12.8-5.3C184.1 490 133.9 480 83.2 480L48 480c-26.5 0-48-21.5-48-48L0 80C0 53.5 21.5 32 48 32l35.2 0c50.7 0 100.9 10 147.7 29.5z"]};var Id={prefix:"fas",iconName:"grip",icon:[512,512,[58119,"grid-horizontal","grip-horizontal"],"f58d","M88 96c22.1 0 40 17.9 40 40l0 48c0 22.1-17.9 40-40 40l-48 0c-22.1 0-40-17.9-40-40l0-48c0-22.1 17.9-40 40-40l48 0zM280 224l-48 0c-22.1 0-40-17.9-40-40l0-48c0-22.1 17.9-40 40-40l48 0c22.1 0 40 17.9 40 40l0 48c0 22.1-17.9 40-40 40zm192 0l-48 0c-22.1 0-40-17.9-40-40l0-48c0-22.1 17.9-40 40-40l48 0c22.1 0 40 17.9 40 40l0 48c0 22.1-17.9 40-40 40zm0 192l-48 0c-22.1 0-40-17.9-40-40l0-48c0-22.1 17.9-40 40-40l48 0c22.1 0 40 17.9 40 40l0 48c0 22.1-17.9 40-40 40zM280 288c22.1 0 40 17.9 40 40l0 48c0 22.1-17.9 40-40 40l-48 0c-22.1 0-40-17.9-40-40l0-48c0-22.1 17.9-40 40-40l48 0zM88 416l-48 0c-22.1 0-40-17.9-40-40l0-48c0-22.1 17.9-40 40-40l48 0c22.1 0 40 17.9 40 40l0 48c0 22.1-17.9 40-40 40z"]};var Fd={prefix:"fas",iconName:"hand-holding-dollar",icon:[576,512,["hand-holding-usd"],"f4c0","M288-16c-13.3 0-24 10.7-24 24l0 12-1.8 0c-36.6 0-66.2 29.7-66.2 66.2 0 33.4 24.9 61.6 58 65.7l61 7.6c5.1 .6 9 5 9 10.2 0 5.7-4.6 10.2-10.2 10.2L240 180c-15.5 0-28 12.5-28 28s12.5 28 28 28l24 0 0 12c0 13.3 10.7 24 24 24s24-10.7 24-24l0-12 1.8 0c36.6 0 66.2-29.7 66.2-66.2 0-33.4-24.9-61.6-58-65.7l-61-7.6c-5.1-.6-9-5-9-10.2 0-5.7 4.6-10.2 10.2-10.2L328 76c15.5 0 28-12.5 28-28s-12.5-28-28-28l-16 0 0-12c0-13.3-10.7-24-24-24zM109.3 341.5L66.7 384 32 384c-17.7 0-32 14.3-32 32l0 64c0 17.7 14.3 32 32 32l320.5 0c29 0 57.3-9.3 80.7-26.5l126.6-93.3c17.8-13.1 21.6-38.1 8.5-55.9s-38.1-21.6-55.9-8.5L392.6 416 280 416c-13.3 0-24-10.7-24-24s10.7-24 24-24l72 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-152.2 0c-33.9 0-66.5 13.5-90.5 37.5z"]};var i8=G6(a8(),1),r8=1e7,nl="Cannot divide by zero",il=1e-10;function ll(a,t){if(a=_4(a),t=_4(t),t>a){let r=t;t=a,a=r}let e;for(;t;)e=t,t=a%t,a=e;return a}function _4(a){return a<0n?a*-1n:a}var t1=class a{isZero(){return this.p===0n}isOne(){return this.p===1n&&this.q===1n}nonzero(){return this.p!==0n}isInteger(){return this.q===1n}inverse(){return new a(this.p*-1n,this.q)}reciprocal(){return new a(this.q,this.p)}lt(t){return this.q===t.q?this.p<t.p:this.p*t.q<t.p*this.q}lte(t){return this.eq(t)||this.lt(t)}gt(t){return t.lt(this)}gte(t){return this.eq(t)||this.gt(t)}eq(t){return this.p===t.p&&this.q===t.q}add(t){return t.isZero()?this:new a(this.p*t.q+this.q*t.p,this.q*t.q)}sub(t){return t.isZero()?this:new a(this.p*t.q-this.q*t.p,this.q*t.q)}mul(t){return this.isOne()?t:t.isOne()?this:this.isZero()||t.isZero()?r6:new a(this.p*t.p,this.q*t.q)}div(t){return t.isOne()||this.isZero()?this:this.eq(t)?l8:new a(this.p*t.q,this.q*t.p)}ceil(){if(this.isInteger())return this;let t=new a(_4(this.p)/this.q+1n);return this.p<0n?t.inverse():t}floor(){return this.isInteger()?this:new a(this.p/this.q)}trunc(t){typeof t=="number"&&(t=BigInt(t));let e=10n**t,r=this.p*e/this.q;return new a(r,e)}round(t=0){if(t){typeof t=="number"&&(t=BigInt(t));let c=L(10n**t);return this.mul(c).round().div(c)}if(this.isInteger())return this;let e=this.p%this.q,r=Number(e)/Number(this.q);return Math.abs(r)>=.5?this.ceil():this.floor()}abs(){return new a(_4(this.p),this.q)}pow(t){let e=this.toNumber(),r=Math.pow(e,t);return L(r)}simplify(){return L(this.toNumber())}toNumber(){return Number(this.p)/Number(this.q)}toLocaleString(t=2,e=!1){return this.toNumber().toLocaleString(void 0,{minimumFractionDigits:e?t:void 0,maximumFractionDigits:t,roundingMode:"ceil"})}toPrecision(t){let e=P3(Math.pow(10,t));return this.mul(e).ceil().div(e).toNumber()}toFraction(t=!0){if(this.isInteger())return this.p.toString();if(t&&_4(this.p)>_4(this.q)){let e=this.p/this.q,r=this.p%this.q;return`${e.toString()} + ${r.toString()}/${this.q.toString()}`}return`${this.p.toString()}/${this.q.toString()}`}toString(t){if(t)return this.toPrecision(t).toString();let e=this.toNumber()*100;return t===null||Math.floor(e)===e?this.toFraction(t!==void 0):this.toNumber().toString()}toJSON(){return this.toString()}constructor(t,e=1n){if(e===1n){this.p=t,this.q=e;return}if(e===0n)throw new Error(nl);e<0n&&(t=-t,e=-e);let r=ll(t,e);r>1n&&(t=t/r,e=e/r),this.p=t,this.q=e}},r6=new t1(0n),l8=new t1(1n);function P3(a){return Number.isInteger(a)?new t1(BigInt(a)):Math.abs(a)<il?r6:ol(a)}var c8=new Map;function ol(a){let t=c8.get(a);if(t!=null)return t;let e=a,r=a,c=[[1,0],[0,1]];for(;c[1][0]*(e=Math.floor(r))+c[1][1]<=r8;){let v=c[0][0]*e+c[0][1];if(c[0][1]=c[0][0],c[0][0]=v,v=c[1][0]*e+c[1][1],c[1][1]=c[1][0],c[1][0]=v,r===e)break;r=1/(r-e)}let i=L(c[0][0],c[1][0]),o=Math.abs(a-i.toNumber());e=Math.floor((r8-c[1][1])/c[1][0]),c[0][0]=c[0][0]*e+c[0][1],c[1][0]=c[1][0]*e+c[1][1];let l=L(c[0][0],c[1][0]),d=Math.abs(a-l.toNumber()),m=o<d?i:l;return c8.set(a,m),m}var n8=new Map;function sl(a){let t=n8.get(a);if(t)return t;if(a.length===0)throw new Error("Empty string");let e;if(a.startsWith("=")){let r=new i8.Parser(a.substring(1)).evaluate();e=L(r)}else if(!a.includes("/"))e=P3(Number(a));else{let r=a.split("/");if(r.length>2)throw new Error("Too many /");if(r[0].includes(" ")){let c=r[0].split(" ");if(c.length>2)throw new Error("Too many spaces");let i=Number(c[0]),o=Number(c[1]),l=Number(r[1]);e=P3(i).add(L(o,l))}else{let c=Number(r[0]),i=Number(r[1]);e=L(c,i)}}return n8.set(a,e),e}function fl(a,t){if(a!=null){if(t!=null)return a=BigInt(a),t=BigInt(t),new t1(a,t);switch(typeof a){case"bigint":return new t1(a);case"number":return P3(a);case"string":return sl(a)}}}var L=Object.assign(fl,{zero:r6,one:l8});function $(a,...t){if(t.length===0)return U2({},a);for(let e of t)a=U2(U2({},a),e);return a}function o8(a){let t=a;Object.keys(t).filter(r=>t[r]===void 0).forEach(r=>delete t[r])}function ul(a,t){if(!(a.length===t.length&&a.every((e,r)=>e===t[r])))return a}function dl(a,t){return a.size!==t.size?a:Array.from(a).every(e=>t.has(e))?void 0:a}var X1=class{constructor(t,e=[]){this.initial=t;this.nestedKeys=e;this._state=O4(this.initial);this.load$=new S3;this.state=this._state.asReadonly()}load(t){if(this.load$.next(),t==null){this.set(this.initial);return}let e=$(this.initial,t);for(let r of this.nestedKeys){let c=t[r];if(typeof c!="object")continue;let i=this.initial[r],o={};o[r]=$(i,c),e=$(e,o)}this.set(e)}apply(t){this.set($(this.state(),t))}updateField(t,e,r){let c=this._resetValue(e,r),i={};i[t]=c,this.apply(i)}set(t){this._state.set(t)}reduce(t){let e=this._state(),r=t(e);this.set(r)}update(t){let e=this._state(),r=t(e),c=$(e,r);this.set(c)}select(t){return r2(()=>this.state()[t])}_removeEntry(t,e){return t=$(t),delete t[e],t}_resetValue(t,e){return e==null?t:Array.isArray(t)&&Array.isArray(e)?ul(t,e):t instanceof Set&&e instanceof Set?dl(t,e):t instanceof t1&&e instanceof t1?t.eq(e)?void 0:t:t===e?void 0:t}},a1=class extends X1{constructor(){super({},[])}updateRecord(t,e){this.reduce(r=>this._updateRecord(r,t,e))}updateRecordField(t,e,r,c){this.reduce(i=>this._updateField(i,t,e,r,c))}resetFields(...t){this.reduce(e=>this._resetFields(e,t))}resetId(t){this.reduce(e=>this._removeEntry(e,t))}_updateRecord(t,e,r){let c=$(t[e],r);if(o8(c),Object.keys(c).length)return $(t,{[e]:c});{let i=$(t);return delete i[e],i}}_resetField(t,e){let r=$(t);for(let c of Object.keys(r))r[c][e]!==void 0&&(Object.keys(r[c]).length===1?delete r[c]:(r[c]=$(r[c]),delete r[c][e]));return r}_resetFields(t,e){let r=$(t);for(let c of e)r=this._resetField(r,c);return r}_updateField(t,e,r,c,i){let o=this._resetValue(c,i),l={};return l[r]=o,this._updateRecord(t,e,l)}};var pl=[50,100,200,300,400,500,600,700,800,900,950],y4=[{name:"rose",hue:16.439,variants:[[.969,.015,12.422],[.941,.03,12.58],[.892,.058,10.001],[.81,.117,11.638],[.712,.194,13.428],[.645,.246,16.439],[.586,.253,17.585],[.514,.222,16.935],[.455,.188,13.697],[.41,.159,10.272],[.271,.105,12.094]]},{name:"red",hue:25.331,variants:[[.971,.013,17.38],[.936,.032,17.717],[.885,.062,18.334],[.808,.114,19.571],[.704,.191,22.216],[.637,.237,25.331],[.577,.245,27.325],[.505,.213,27.518],[.444,.177,26.899],[.396,.141,25.723],[.258,.092,26.042]]},{name:"orange",hue:47.604,variants:[[.98,.016,73.684],[.954,.038,75.164],[.901,.076,70.697],[.837,.128,66.29],[.75,.183,55.934],[.705,.213,47.604],[.646,.222,41.116],[.553,.195,38.402],[.47,.157,37.304],[.408,.123,38.172],[.266,.079,36.259]]},{name:"amber",hue:70.08,variants:[[.987,.022,95.277],[.962,.059,95.617],[.924,.12,95.746],[.879,.169,91.605],[.828,.189,84.429],[.769,.188,70.08],[.666,.179,58.318],[.555,.163,48.998],[.473,.137,46.201],[.414,.112,45.904],[.279,.077,45.635]]},{name:"yellow",hue:86.047,variants:[[.987,.026,102.212],[.973,.071,103.193],[.945,.129,101.54],[.905,.182,98.111],[.852,.199,91.936],[.795,.184,86.047],[.681,.162,75.834],[.554,.135,66.442],[.476,.114,61.907],[.421,.095,57.708],[.286,.066,53.813]]},{name:"lime",hue:130.85,variants:[[.986,.031,120.757],[.967,.067,122.328],[.938,.127,124.321],[.897,.196,126.665],[.841,.238,128.85],[.768,.233,130.85],[.648,.2,131.684],[.532,.157,131.589],[.453,.124,130.933],[.405,.101,131.063],[.274,.072,132.109]]},{name:"green",hue:149.579,variants:[[.982,.018,155.826],[.962,.044,156.743],[.925,.084,155.995],[.871,.15,154.449],[.792,.209,151.711],[.723,.219,149.579],[.627,.194,149.214],[.527,.154,150.069],[.448,.119,151.328],[.393,.095,152.535],[.266,.065,152.934]]},{name:"emerald",hue:162.48,variants:[[.979,.021,166.113],[.95,.052,163.051],[.905,.093,164.15],[.845,.143,164.978],[.765,.177,163.223],[.696,.17,162.48],[.596,.145,163.225],[.508,.118,165.612],[.432,.095,166.913],[.378,.077,168.94],[.262,.051,172.552]]},{name:"teal",hue:182.503,variants:[[.984,.014,180.72],[.953,.051,180.801],[.91,.096,180.426],[.855,.138,181.071],[.777,.152,181.912],[.704,.14,182.503],[.6,.118,184.704],[.511,.096,186.391],[.437,.078,188.216],[.386,.063,188.416],[.277,.046,192.524]]},{name:"cyan",hue:215.221,variants:[[.984,.019,200.873],[.956,.045,203.388],[.917,.08,205.041],[.865,.127,207.078],[.789,.154,211.53],[.715,.143,215.221],[.609,.126,221.723],[.52,.105,223.128],[.45,.085,224.283],[.398,.07,227.392],[.302,.056,229.695]]},{name:"sky",hue:237.323,variants:[[.977,.013,236.62],[.951,.026,236.824],[.901,.058,230.902],[.828,.111,230.318],[.746,.16,232.661],[.685,.169,237.323],[.588,.158,241.966],[.5,.134,242.749],[.443,.11,240.79],[.391,.09,240.876],[.293,.066,243.157]]},{name:"blue",hue:259.815,variants:[[.97,.014,254.604],[.932,.032,255.585],[.882,.059,254.128],[.809,.105,251.813],[.707,.165,254.624],[.623,.214,259.815],[.546,.245,262.881],[.488,.243,264.376],[.424,.199,265.638],[.379,.146,265.522],[.282,.091,267.935]]},{name:"indigo",hue:277.117,variants:[[.962,.018,272.314],[.93,.034,272.788],[.87,.065,274.039],[.785,.115,274.713],[.673,.182,276.935],[.585,.233,277.117],[.511,.262,276.966],[.457,.24,277.023],[.398,.195,277.366],[.359,.144,278.697],[.257,.09,281.288]]},{name:"violet",hue:292.717,variants:[[.969,.016,293.756],[.943,.029,294.588],[.894,.057,293.283],[.811,.111,293.571],[.702,.183,293.541],[.606,.25,292.717],[.541,.281,293.009],[.491,.27,292.581],[.432,.232,292.759],[.38,.189,293.745],[.283,.141,291.089]]},{name:"purple",hue:303.9,variants:[[.977,.014,308.299],[.946,.033,307.174],[.902,.063,306.703],[.827,.119,306.383],[.714,.203,305.504],[.627,.265,303.9],[.558,.288,302.321],[.496,.265,301.924],[.438,.218,303.724],[.381,.176,304.987],[.291,.149,302.717]]},{name:"fuchsia",hue:322.15,variants:[[.977,.017,320.058],[.952,.037,318.852],[.903,.076,319.62],[.833,.145,321.434],[.74,.238,322.16],[.667,.295,322.15],[.591,.293,322.896],[.518,.253,323.949],[.452,.211,324.591],[.401,.17,325.612],[.293,.136,325.661]]},{name:"pink",hue:354.308,variants:[[.971,.014,343.198],[.948,.028,342.258],[.899,.061,343.231],[.823,.12,346.018],[.718,.202,349.761],[.656,.241,354.308],[.592,.249,.584],[.525,.223,3.958],[.459,.187,3.815],[.408,.153,2.432],[.284,.109,3.907]]}];function s8(a,t){let e=y4.findIndex(l=>l.hue>=a);e===-1&&(e=0);let r=e===0?y4.length-1:e-1,c=y4[e].hue;c<a&&(c+=360);let i=y4[r].hue;i>a&&(i-=360);let o=(a-c)/(c-i);y4[e].variants.forEach((l,d)=>{let[m,v,_]=l.map((y,N)=>{let S=y4[r].variants[d][N];return N===2&&S>y&&(S-=360),Number((y+o*(y-S)).toPrecision(N===2?6:3))});t.style.setProperty(`--brand-${pl[d]}`,`oklch(${m} ${v} ${_})`)})}function ml(a){return localStorage.getItem(a)??void 0}function c6(a,t){t?localStorage.setItem(a,t):localStorage.removeItem(a)}function f8(a){let t=O4(ml(a));return J2(()=>{c6(a,t())}),t}var O3={checkbox:{hideDefault:!0},tree:{},items:{hasPrecision:!0},belts:{hasPrecision:!0},wagons:{hasPrecision:!0,flag:!0},rockets:{hasPrecision:!0,flag:!0},machines:{hasPrecision:!0},beacons:{flag:!0},power:{hasPrecision:!0,flag:!0},pollution:{hasPrecision:!0,flag:!0},link:{}},n6=Object.keys(O3),hl=1,B3=n6.reduce((a,t)=>{let e=O3[t];return a[t]={show:!e.hideDefault,precision:e.hasPrecision?hl:null},a},{});function u8(a){return n6.filter(t=>!O3[t].flag||a.has(t)).map(t=>({label:`options.column.${t}`,value:t,disabled:t==="items"||t==="machines"}))}function d8(a,t){return a=$(B3,a),Object.keys(a).filter(r=>!B3[r]).forEach(r=>delete a[r]),n6.filter(r=>O3[r].flag&&!t.has(r)).forEach(r=>{a=$(a,{[r]:$(a[r],{show:!1})})}),a}function ep(a){return Object.keys(a).reduce((e,r)=>(e[r]=$(a[r]),e),{})}function p8(a){let t=[{label:"options.linkValue.none",value:0},{label:"options.linkValue.percent",value:1},{label:"options.linkValue.items",value:2},{label:"options.linkValue.belts",value:3},{label:"options.linkValue.wagons",value:4},{label:"options.linkValue.machines",value:5}];return a.has("wagons")?t:t.filter(e=>e.value!==4)}var m8={states:{},columns:B3,language:"en",powerUnit:0,hue:256,theme:"system",bypassLanding:!1,showTechLabels:!1,rows:50,disablePaginator:!1,paused:!1,convertObjectiveValues:!1,flowSettings:{diagram:0,linkSize:2,linkText:2,sankeyAlign:0,hideExcluded:!1}};var K1=class K1 extends X1{constructor(){super(m8,["states","flowSettings"]);this.document=Q(R2);this.stored=f8("preferences");this.bypassLanding=this.select("bypassLanding");this.columns=this.select("columns");this.convertObjectiveValues=this.select("convertObjectiveValues");this.flowSettings=this.select("flowSettings");this.language=this.select("language");this.paused=this.select("paused");this.powerUnit=this.select("powerUnit");this.showTechLabels=this.select("showTechLabels");this.states=this.select("states");this.theme=this.select("theme");this.hue=this.select("hue");let e=this.stored();if(e)try{let r=JSON.parse(e);this.load(r)}catch(r){console.warn("Failed to parse stored preferences",r)}J2(()=>{c6("preferences",JSON.stringify(this.state()))}),J2(()=>{let r=this.theme();r==="light"||r==="system"&&window.matchMedia("(prefers-color-scheme: light)").matches?this.document.documentElement.setAttribute("data-theme","light"):this.document.documentElement.removeAttribute("data-theme")}),J2(()=>{s8(this.hue(),this.document.documentElement)})}saveState(e,r,c){this.update(i=>{let o=$(i.states[e],{[r]:c});return{states:$(i.states,{[e]:o})}})}removeState(e,r){this.update(c=>{let i=this._removeEntry(c.states[e],r);return{states:$(c.states,{[e]:i})}})}};K1.\u0275fac=function(r){return new(r||K1)},K1.\u0275prov=a2({token:K1,factory:K1.\u0275fac,providedIn:"root"});var k1=K1;function R(a,t){return a??t}function xp(){return s4(i6)}function j2(...a){return t=>a.every(e=>t[e]!=null)}function i6(a){return a!=null}var l6={factorio:{route:"/spa",label:"options.game.factorio",modId:"spa"},"dyson-sphere-program":{route:"/dsp",label:"options.game.dysonSphereProgram",modId:"dsp"},satisfactory:{route:"/sfy",label:"options.game.satisfactory",modId:"sfy"},"captain-of-industry":{route:"/coi",label:"options.game.captainOfIndustry",modId:"coi"},"final-factory":{route:"/ffy",label:"options.game.finalFactory",modId:"ffy"},techtonica:{route:"/tta",label:"options.game.techtonica",modId:"tta"},"factor-y":{route:"/fay",label:"options.game.factorY",modId:"fay"},mindustry:{route:"/mds",label:"options.game.mindustry",modId:"mds"},foundry:{route:"/fdy",label:"options.game.foundry",modId:"fdy"},"outworld-station":{route:"/ows",label:"options.game.outworldStation",modId:"ows"}};var Y4="spa",o6={mods:[{id:"spa",name:"Space Age",game:"factorio",flags:"spa"},{id:"2.0",name:"2.0",game:"factorio",flags:"2.0"},{id:"2.0q",name:"2.0 + Quality",game:"factorio",flags:"2.0q"},{id:"1.1",name:"1.1",game:"factorio",flags:"1.1"},{id:"1.1e",name:"1.1 Expensive",game:"factorio",flags:"1.1"},{id:"1.0",name:"1.0",game:"factorio",flags:"1.1"},{id:"017",name:"0.17",game:"factorio",flags:"1.1"},{id:"016",name:"0.16",game:"factorio",flags:"1.1"},{id:"248",name:"248k Standalone",game:"factorio",flags:"1.1"},{id:"248o",name:"248k Overhaul",game:"factorio",flags:"1.1"},{id:"248kr2sxp",name:"248k + Krastorio 2 + SE",game:"factorio",flags:"1.1"},{id:"aai",name:"AAI Industry",game:"factorio",flags:"1.1"},{id:"ang",name:"Angel's Industries",game:"factorio",flags:"1.1"},{id:"ango",name:"Angel's Industries Overhaul",game:"factorio",flags:"1.1"},{id:"bio",name:"Bio Industries",game:"factorio",flags:"1.1"},{id:"bob",name:"Bob's Mods",game:"factorio",flags:"1.1"},{id:"bobang",name:"Bob's & Angel's",game:"factorio",flags:"1.1"},{id:"efs",name:"Electric Furnaces",game:"factorio",flags:"1.1"},{id:"fpp",name:"Factorio Plus Plus",game:"factorio",flags:"1.1"},{id:"fep",name:"FactorioExtended Plus",game:"factorio",flags:"1.1"},{id:"ffw",name:"Freight Forwarding",game:"factorio",flags:"1.1"},{id:"ir3",name:"Industrial Revolution 3",game:"factorio",flags:"1.1"},{id:"kr2",name:"Krastorio 2",game:"factorio",flags:"2.0"},{id:"kr2248",name:"Krastorio 2 + 248K",game:"factorio",flags:"1.1"},{id:"kr2aai",name:"Krastorio 2 + AAI",game:"factorio",flags:"1.1"},{id:"kr2ffw",name:"Krastorio 2 + FFW",game:"factorio",flags:"1.1"},{id:"kr2sxp",name:"Krastorio 2 + SE",game:"factorio",flags:"1.1"},{id:"lls",name:"Lunar Landings",game:"factorio",flags:"1.1"},{id:"mbf",name:"Mobile Factory",game:"factorio",flags:"1.1"},{id:"msc",name:"More Science",game:"factorio",flags:"1.1"},{id:"nls",name:"Nullius",game:"factorio",flags:"1.1"},{id:"omf",name:"Omnifluid",game:"factorio",flags:"1.1"},{id:"ps2",name:"Production Scrap 2",game:"factorio",flags:"1.1"},{id:"pys",name:"Pyanodons",game:"factorio",flags:"1.1"},{id:"pysalf",name:"Pyanodons + AL",game:"factorio",flags:"1.1"},{id:"qat",name:"Qatavin's More Stuff",game:"factorio",flags:"1.1"},{id:"ram",name:"Rampant",game:"factorio",flags:"1.1"},{id:"sea",name:"Sea Block",game:"factorio",flags:"1.1"},{id:"sbk",name:"Spaceblock",game:"factorio",flags:"1.1"},{id:"sxp",name:"Space Exploration",game:"factorio",flags:"1.1"},{id:"ulc",name:"Ultracube",game:"factorio",flags:"1.1"},{id:"vbz",name:"Very BZ",game:"factorio",flags:"1.1"},{id:"wt2",name:"Warptorio2",game:"factorio",flags:"1.1"},{id:"xan",name:"Xander Mod",game:"factorio",flags:"1.1"},{id:"dsp",name:"Dyson Sphere Program",game:"dyson-sphere-program",flags:"dsp"},{id:"sfy",name:"Satisfactory",game:"satisfactory",flags:"sfy"},{id:"coi",name:"Captain of Industry",game:"captain-of-industry",flags:"coi"},{id:"tta",name:"Techtonica",game:"techtonica",flags:"tta"},{id:"ffy",name:"Final Factory",game:"final-factory",flags:"ffy"},{id:"fay",name:"Factor Y",game:"factor-y",flags:"fay"},{id:"mds",name:"Serpulo",game:"mindustry",flags:"mds"},{id:"mde",name:"Erekir",game:"mindustry",flags:"mds"},{id:"fdy",name:"Foundry",game:"foundry",flags:"fdy"},{id:"ows",name:"Outworld Station",game:"outworld-station",flags:"fdy"}],modHashV0:["1.1","1.0","0.17","0.16","bio-industries","bobs","bobs-angels","dsp","factorio-extended-plus","industrial-revolution","krastorio2","krastorio2+se","pyanodons","pyanodons+al","seablock","space-exploration","xander"],modHash:["1.1","1.0","017","016","bio","bob","bobang","dsp","fep","ir2","kr2","kr2sxp","pys","pysalf","sea","sxp","xan","nls","fpp","ang","msc","sfy","coi","qat","1.1e","248","248o","248kr2sxp","aai","ir3","efs","kr2aai","vbz","ffw","kr2ffw","mbf","omf","kr2248","sbk","wt2","ango","kr2p","ram","tta","utc","ffy","fay","lls","ulc","ps2","2.0","2.0q","mds","mde","fdy","ows","spa"]};function h8(a){return o6.mods.filter(t=>t.game===a).map(t=>({label:t.name,value:t.id}))}var U3="pipe";function s6(a){if(a!=null)return{speed:L(a.speed)}}function g8(a){if(a!=null)return{effectivity:L(a.effectivity),modules:L(a.modules),range:L(a.range),type:a.type,usage:L(a.usage),disallowedEffects:a.disallowedEffects,size:a.size,profile:a.profile?a.profile.map(t=>L(t)):void 0}}function v8(a){if(a!=null)return{size:L(a.size)}}function z8(a){if(a!=null)return{capacity:L(a.capacity)}}function M8(a){if(a!=null)return{category:a.category,value:L(a.value),result:a.result}}function f6(a,t,e){t.forEach(r=>{a[r]||(a[r]=L.zero),a[r]=a[r].add(e)})}function j3(a){if(a!=null)return $(a)}function L8(a,t){return Object.keys(a).some(e=>a[e]===t)}function _8(a,t={}){return Object.keys(a).reduce((e,r)=>(e[r]=vl(a[r],t[r]),e),t)}function vl(a,t={}){return a.reduce((e,r)=>(e[r]=!0,e),t)}function b4(a){if(a!=null)return Object.keys(a).reduce((t,e)=>(t[e]=L(a[e]),t),{})}function r1(a){return g4()?a.reduce((t,e)=>(t[e.id]&&console.warn(`Duplicate id: ${e.id}`),t[e.id]=e,t),{}):a.reduce((t,e)=>(t[e.id]=e,t),{})}function y8(a){if(a!=null)return{parts:L(a.parts),launch:L(a.launch).div(L(60n))}}var b8="pumpjack",C8=new Set(["assembling-machine","furnace","lab","offshore-pump","rocket-silo"]);function S8(a){if(a!=null)return{speed:L(a.speed),modules:a.modules===!0?a.modules:L(a.modules),disallowedEffects:a.disallowedEffects,type:a.type,fuelCategories:a.fuelCategories,fuel:a.fuel,usage:L(a.usage),drain:L(a.drain),pollution:L(a.pollution),silo:y8(a.silo),consumption:b4(a.consumption),size:a.size,baseEffect:a.baseEffect?zl(a.baseEffect):void 0,hideRate:a.hideRate,totalRecipe:a.totalRecipe,entityType:a.entityType,locations:a.locations,ingredientUsage:L(a.ingredientUsage)}}function zl(a){return Object.keys(a).reduce((e,r)=>(e[r]=L(a[r]),e),{})}var w8="somersloop",C4={consumption:2,pollution:2,productivity:2,quality:3,speed:2},x8=["consumption","pollution","productivity","quality","speed"],Ml=new Set(["consumption","pollution"]);function Z4(a,t){return a[t]==null||(Ml.has(t)?a[t].gte(L.zero):a[t].lte(L.zero))}function N8(a){if(a!=null)return{consumption:L(a.consumption),pollution:L(a.pollution),productivity:L(a.productivity),quality:L(a.quality),speed:L(a.speed),limitation:a.limitation,sprays:L(a.sprays),proliferator:a.proliferator}}function D8(a){return{id:a.id,name:a.name,category:a.category,row:a.row,stack:L(a.stack),rocketCapacity:L(a.rocketCapacity),beacon:g8(a.beacon),belt:s6(a.belt),pipe:s6(a.pipe),machine:S8(a.machine),module:N8(a.module),fuel:M8(a.fuel),cargoWagon:v8(a.cargoWagon),fluidWagon:z8(a.fluidWagon),technology:a.technology,icon:a.icon,iconText:a.iconText}}var k8="legendary-quality",E8="epic-quality",R8="quality-module-technology";var Tm=[{value:-1,label:"options.quality.any"},{value:0,label:"options.quality.normal"},{value:1,label:"options.quality.uncommon"},{value:2,label:"options.quality.rare"},{value:3,label:"options.quality.epic"},{value:5,label:"options.quality.legendary"}],Ll=/^(.*)\((\d)\)$/;function Q4(a){let t=Ll.exec(a);return t?t[1]:a}function E1(a,t){return t<1?a:`${a}(${t.toString()})`}function H3(a){return a.technology==null&&a.stack!=null}function A8(a,t){let e=new Set(a.flags);return a.part==null&&!e.has("mining")&&(!e.has("technology")||Object.keys(a.in).length>0)&&!e.has("burn")&&!e.has("grow")&&Object.keys(a.in).some(r=>t[r].stack)}function T8(a){return{id:a.id,name:a.name,category:a.category,row:a.row,time:L(a.time),producers:a.producers,in:b4(a.in),out:b4(a.out),catalyst:b4(a.catalyst),cost:L(a.cost),part:a.part,icon:a.icon,iconText:a.iconText,usage:L(a.usage),disallowedEffects:a.disallowedEffects,locations:a.locations,flags:new Set(a.flags)}}function I8(a){return $(a,{in:j3(a.in),out:j3(a.out),catalyst:j3(a.catalyst)})}function u6(a){for(let t of Object.keys(a.out)){let e=a.out[t];e.gt(L.zero)&&(a.in[t]==null||a.in[t].lt(e))&&a.produces.add(t),a.output[t]=e.sub(a.in[t]??L.zero).div(a.time)}for(let t of Object.keys(a.in).filter(e=>a.out[e]==null)){let e=a.in[t];a.output[t]=e.inverse().div(a.time)}}function S4(a,t,e=new Set(a),r,c=!1){a=a.filter(o=>e.has(o)),r&&(a=a.filter(o=>!r.has(o)));let i=a.map(o=>({label:t[o].name,value:o}));return c&&i.unshift({label:"none",value:""}),i}var F8={spa:new Set(["beacons","beltStack","diminishingBeacons","fluidCostRatio","fuels","inserterEstimation","maximumFactor","minimumFactor","miningDepletion","miningProductivity","mods","pollution","power","quality","researchSpeed","rockets","wagons"]),"2.0":new Set(["beacons","diminishingBeacons","fluidCostRatio","fuels","inserterEstimation","maximumFactor","minimumFactor","miningDepletion","miningProductivity","mods","pollution","power","researchSpeed","wagons"]),"2.0q":new Set(["beacons","diminishingBeacons","fluidCostRatio","fuels","inserterEstimation","maximumFactor","minimumFactor","miningDepletion","miningProductivity","mods","pollution","power","quality","researchSpeed","wagons"]),"1.1":new Set(["beacons","flowRate","fluidCostRatio","fuels","inserterEstimation","minimumFactor","minimumRecipeTime","miningDepletion","miningProductivity","miningTechnologyBypassLimitations","mods","pollution","power","researchSpeed","wagons"]),"1.1e":new Set(["beacons","expensive","flowRate","fluidCostRatio","fuels","inserterEstimation","minimumFactor","minimumRecipeTime","miningDepletion","miningProductivity","miningTechnologyBypassLimitations","mods","pollution","power","researchSpeed","wagons"]),dsp:new Set(["beltStack","fuels","inactiveDrain","miningSpeed","power","proliferator"]),sfy:new Set(["consumptionAsDrain","overclock","power","resourcePurity","somersloop","wagons"]),coi:new Set(["hideMachineSettings"]),ffy:new Set(["duplicators"]),tta:new Set(["fuels","power"]),fay:new Set(["fuels","power","miningSpeed","beltStack"]),mds:new Set(["power","mods"]),fdy:new Set(["power"])};function e3(a,t){g4()||gtag("event",a,{event_category:t})}var R1=class R1 extends a1{constructor(){super(...arguments);this.modRecord=r2(()=>{let e=this._state();return o6.mods.reduce((r,c)=>{let i=e[c.id]?.data;return i!=null&&(r[c.id]=$(c,i)),r},{})})}loadData(e,r,c){this.update(i=>({[e]:$(i[e],{data:r,hash:c})}))}loadI18n(e,r,c){this.update(i=>({[e]:$(i[e],{i18n:$(i[e]?.i18n,{[r]:c})})}))}};R1.\u0275fac=(()=>{let e;return function(c){return(e||(e=x1(R1)))(c||R1)}})(),R1.\u0275prov=a2({token:R1,factory:R1.\u0275fac,providedIn:"root"});var V3=R1;function w4(a,t,e=(r,c)=>r===c){return a?.length?t?.length?a.length===t.length&&a.every((r,c)=>e(r,t[c])):!1:!t?.length}function t3(a,t){return a.count?.toString()===t.count?.toString()&&a.id===t.id}function P8(a,t){return a.count?.toString()===t.count?.toString()&&a.id===t.id&&w4(a.modules,t.modules,t3)&&a.total?.toString()===t.total?.toString()}var J1=class J1{bestMatch(t,e){let r=t.map(c=>c.value);if(r.length>1){for(let c of e)if(r.includes(c))return c}return r[0]}machineOptions(t,e,r){let c=t.producers.filter(i=>e.availableItemIds.has(i)&&(r.machineRecord[i].locations==null||r.machineRecord[i].locations.some(o=>e.locationIds.has(o))));return c.length===0&&(c=t.producers),c.map(i=>({value:i,label:r.itemRecord[i].name}))}fuelOptions(t,e,r){if(t.fuel){let o=r.itemRecord[t.fuel];return[{value:o.id,label:o.name}]}if(t.fuelCategories==null)return[];let c=t.fuelCategories,i=r.fuelIds.map(o=>r.itemRecord[o]).filter(j2("fuel")).filter(o=>c.includes(o.fuel.category));return i.some(o=>e.availableItemIds.has(o.id))&&(i=i.filter(o=>e.availableItemIds.has(o.id))),i.map(o=>({value:o.id,label:o.name}))}moduleOptions(t,e,r,c){let i=r.moduleIds.map(d=>r.itemRecord[d]).filter(j2("module")).filter(d=>e.availableItemIds.has(d.id)),o;if(c!=null&&(o=r.recipeRecord[c],Object.keys(r.limitations).length&&(!r.flags.has("miningTechnologyBypassLimitations")||!o.flags.has("mining")&&!o.flags.has("technology"))&&(i=i.filter(d=>!d.module.limitation||r.limitations[d.module.limitation][c])),o.disallowedEffects))for(let d of o.disallowedEffects)i=i.filter(m=>Z4(m.module,d));if(t.disallowedEffects)for(let d of t.disallowedEffects)i=i.filter(m=>Z4(m.module,d));let l=i.map(d=>({value:d.id,label:d.name}));return(!r.flags.has("resourcePurity")||!o?.flags.has("mining"))&&!r.flags.has("duplicators")&&l.unshift({label:"none",value:""}),l}defaultModules(t,e,r,c){if(r==null)return;if(c){let o=new Set(t.map(l=>l.value));if(c.every(l=>l.id&&o.has(l.id)))return c}let i=this.bestMatch(t,e);return r=r===!0?L.zero:r,[{id:i,count:r}]}};J1.\u0275fac=function(e){return new(e||J1)},J1.\u0275prov=a2({token:J1,factory:J1.\u0275fac,providedIn:"root"});var A1=J1;var Y1=class Y1{constructor(){this.options=Q(A1)}dehydrateModules(t,e,r,c,i){let o=this.options.defaultModules(e,r,c,i);if(w4(t,o,t3))return;let l=this.options.bestMatch(e,r),d=c===!0||c==null?L.zero:c;return t.filter(v=>v.id!=="").map(v=>{let _={};return v.id!==l&&(_.id=v.id),(v.id==null||!v.count?.eq(d))&&(_.count=v.count),_})}hydrateModules(t,e,r,c,i){if(t==null)return this.options.defaultModules(e,r,c,i);let o=c===!0||c==null?L.zero:c,l=this.options.bestMatch(e,r),d=t.map(m=>({count:R(m.count,o),id:R(m.id,l)}));if(o.nonzero()){let m=d.reduce((_,y)=>_.add(y.count),L.zero),v=o.sub(m);v.gt(L.zero)&&d.push({count:v,id:""})}return d}dehydrateBeacons(t,e){if(w4(t,e,P8))return;if(e==null||e.length===0)return t;let r=e[0],c=r?.modules?.[0].id,i=R(r?.modules?.[0].count,L.zero),o=t.map(l=>{let d={};return l.id&&l.id!==r.id&&(d.id=l.id),l.count?.eq(R(r.count,L.zero))||(d.count=l.count),w4(l.modules,r.modules,t3)||(d.modules=l.modules?.filter(m=>m.id!=="").map(m=>{let v={};return m.id!==c&&(v.id=m.id),m.count?.eq(i)||(v.count=m.count),v})),l.total&&(d.total=l.total),d});return o.every(l=>Object.keys(l).length===0)?[]:o}hydrateBeacons(t,e){if(t==null||e==null||e.length===0)return e;let r=e[0],c=r.modules?.[0],i=t.map(o=>({id:R(o.id,r.id),count:o.count??r.count,modules:R(o.modules?.map(l=>({id:R(l.id,c?.id),count:R(l.count,c?.count)})),r.modules),total:R(o.total,r.total)}));return c?.count==null?i:i.filter(j2("modules")).map(o=>{let l=o.modules.reduce((m,v)=>m.add(R(v.count,L.zero)),L.zero),d=c?.count?.sub(l);return d?.gt(L.zero)&&o.modules.push({count:d,id:""}),o})}};Y1.\u0275fac=function(e){return new(e||Y1)},Y1.\u0275prov=a2({token:Y1,factory:Y1.\u0275fac,providedIn:"root"});var T1=Y1;var q3=(c=>(c[c.Items=0]="Items",c[c.Belts=1]="Belts",c[c.Wagons=2]="Wagons",c[c.Machines=3]="Machines",c))(q3||{});function B8(a,t){let e=[{value:0,label:a.itemsLabel},{value:1,label:"options.objectiveUnit.belts"},{value:2,label:a.wagonsLabel},{value:3,label:"options.objectiveUnit.machines"}];return t.has("wagons")?e:e.filter(r=>r.value!==2)}var bh=[{value:0,label:"options.displayRate.perSecond"},{value:1,label:"options.displayRate.perMinute"},{value:2,label:"options.displayRate.perHour"}],a3={0:{option:0,suffix:"options.displayRate.perSecondSuffix",itemsLabel:"options.objectiveUnit.itemsPerSecond",wagonsLabel:"options.objectiveUnit.wagonsPerSecond",rocketsLabel:"options.objectiveUnit.rocketsPerSecond",pollutionLabel:"options.objectiveUnit.pollutionPerSecond",value:L.one},1:{option:1,suffix:"options.displayRate.perMinuteSuffix",itemsLabel:"options.objectiveUnit.itemsPerMinute",wagonsLabel:"options.objectiveUnit.wagonsPerMinute",rocketsLabel:"options.objectiveUnit.rocketsPerMinute",pollutionLabel:"options.objectiveUnit.pollutionPerMinute",value:L(60n)},2:{option:2,suffix:"options.displayRate.perHourSuffix",itemsLabel:"options.objectiveUnit.itemsPerHour",wagonsLabel:"options.objectiveUnit.wagonsPerHour",rocketsLabel:"options.objectiveUnit.rocketsPerHour",pollutionLabel:"options.objectiveUnit.pollutionPerHour",value:L(3600n)}};function O8(a,t=void 0){if(t&&"presets"in t)return t.presets.map(r=>({value:r.id,label:r.label}));let e=[{value:0,label:"options.preset.minimum"},{value:1,label:"options.preset.upgraded"}];return a.has("beacons")&&(e[1].label="options.preset.modules",e.push({value:2,label:"options.preset.beacon8"},{value:3,label:"options.preset.beacon12"})),a.has("proliferator")&&e.push({value:2,label:"options.preset.proliferated"}),e}var M1={speed0:L.zero,speed1:L(20n),speed2:L(50n),speed3:L(90n),speed4:L(140n),speed5:L(190n),speed6:L(250n)},Eh=[{label:"options.researchBonus.speed0",value:M1.speed0},{label:"options.researchBonus.speed1",value:M1.speed1},{label:"options.researchBonus.speed2",value:M1.speed2},{label:"options.researchBonus.speed3",value:M1.speed3},{label:"options.researchBonus.speed4",value:M1.speed4},{label:"options.researchBonus.speed5",value:M1.speed5},{label:"options.researchBonus.speed6",value:M1.speed6}];var U8={checkedObjectiveIds:new Set,preset:0,maximizeType:1,requireMachinesOutput:!1,displayRate:1,excludedItemIds:new Set,checkedItemIds:new Set,flowRate:L(1200n),checkedRecipeIds:new Set,netProductionOnly:!1,proliferatorSprayId:"",inserterTarget:1,miningBonus:L.zero,researchBonus:M1.speed6,inserterCapacity:2,costs:{factor:L.one,machine:L.one,footprint:L.one,unproduceable:L(1000000000n),excluded:L.zero,surplus:L.zero,maximize:L(-1000000000n),recycling:L(1000n)}};var bl=[{id:"time",position:"-66px 0",color:""},{id:"transparent",position:"-132px 0",color:""},{id:"module",position:"-198px 0",color:"#ffffff"},{id:"pipe",position:"-264px 0",color:""},{id:"inserter",position:"0 -66px",color:""},{id:"long-handed-inserter",position:"-66px -66px",color:""},{id:"fast-inserter",position:"-132px -66px",color:""},{id:"bulk-inserter",position:"-198px -66px",color:""},{id:"q-1",position:"-264px -66px",color:""},{id:"q0",position:"0 -132px",color:""},{id:"q1",position:"-66px -132px",color:""},{id:"q2",position:"-132px -132px",color:""},{id:"q3",position:"-198px -132px",color:""},{id:"q5",position:"-264px -132px",color:""},{id:"captain-of-industry",position:"0 -198px",color:""},{id:"dyson-sphere-program",position:"-66px -198px",color:""},{id:"factor-y",position:"-132px -198px",color:""},{id:"factorio",position:"-198px -198px",color:""},{id:"final-factory",position:"-264px -198px",color:""},{id:"foundry",position:"0 -264px",color:""},{id:"mindustry",position:"-66px -264px",color:""},{id:"outworld-station",position:"-132px -264px",color:""},{id:"satisfactory",position:"-198px -264px",color:""},{id:"techtonica",position:"-264px -264px",color:""}],j8=r1(bl.map(a=>g1(U2({},a),{file:'url("icons/icons.webp")'})));var Z1=class Z1 extends X1{constructor(){super(U8,["costs"]);this.datasetsStore=Q(V3);this.hydration=Q(T1);this.preferencesStore=Q(k1);this.displayRate=this.select("displayRate");this.flowRate=this.select("flowRate");this.maximizeType=this.select("maximizeType");this.modId=this.select("modId");this.preset=this.select("preset");this.excludedRecipeIds=this.select("excludedRecipeIds");this.researchedTechnologyIds=this.select("researchedTechnologyIds");this.mod=r2(()=>{let e=this.modId();return e==null?void 0:this.datasetsStore.modRecord()[e]});this.hash=r2(()=>{let e=this.modId();return e==null?void 0:this.datasetsStore.state()[e]?.hash});this.i18n=r2(()=>{let e=this.modId();if(e==null)return;let r=this.datasetsStore.state(),c=this.preferencesStore.language();return r[e]?.i18n?.[c]});this.game=r2(()=>{let e=this.mod();return R(e?.game,"factorio")});this.modStates=r2(()=>{let e=this.modId();if(e==null)return{};let r=this.preferencesStore.states();return R(r[e],{})});this.stateOptions=r2(()=>{let e=this.modStates();return Object.keys(e).sort().map(r=>({label:r,value:r}))});this.gameInfo=r2(()=>{let e=this.game();return l6[e]});this.displayRateInfo=r2(()=>{let e=this.displayRate();return a3[e]});this.modOptions=r2(()=>{let e=this.game();return h8(e)});this.defaults=r2(()=>this.computeDefaults(this.mod(),this.preset()));this.dataset=r2(()=>this.computeDataset(this.mod(),this.hash(),this.i18n(),this.game()));this.linkValueOptions=r2(()=>{let e=this.dataset();return p8(e.flags)});this.objectiveUnitOptions=r2(()=>{let e=this.displayRateInfo(),r=this.dataset();return B8(e,r.flags)});this.presetOptions=r2(()=>{let e=this.mod(),r=this.dataset();return O8(r.flags,e?.defaults)});this.columnOptions=r2(()=>{let e=this.dataset();return u8(e.flags)});this.columnsState=r2(()=>{let e=this.dataset(),r=this.preferencesStore.columns();return d8(r,e.flags)});this.settings=r2(()=>this.computeSettings(this.state(),this.defaults(),this.dataset()));this.options=r2(()=>{let e=this.dataset(),r=this.settings(),c=new Set(r.availableItemIds);function i(o,l){return S4(o,e.itemRecord,c,l)}return{categories:S4(e.categoryIds,e.categoryRecord),items:i(e.itemIds),beacons:i(e.beaconIds),belts:i(e.beltIds,e.itemQIds),pipes:i(e.pipeIds),cargoWagons:i(e.cargoWagonIds,e.itemQIds),fluidWagons:i(e.fluidWagonIds,e.itemQIds),fuels:i(e.fuelIds,e.itemQIds),modules:i(e.moduleIds),proliferatorModules:S4(e.proliferatorModuleIds,e.itemRecord,c,new Set,!0),machines:i(e.machineIds),recipes:S4(e.recipeIds,e.recipeRecord,new Set(r.availableRecipeIds)),locations:S4(e.locationIds,e.locationRecord)}});this.beltSpeed=r2(()=>{let e=this.dataset(),r=this.flowRate(),c={[U3]:r};if(e.beltIds)for(let i of e.beltIds)c[i]=e.beltRecord[i].speed;if(e.pipeIds)for(let i of e.pipeIds)c[i]=e.beltRecord[i].speed;return c});this.beltSpeedTxt=r2(()=>{let e=this.beltSpeed(),r=this.displayRateInfo();return Object.keys(e).reduce((c,i)=>{let o=e[i].mul(r.value);return c[i]=Number(o.toNumber().toFixed(2)).toString(),c},{})});this.modMenuItem=r2(()=>{let e=this.mod();return{icon:"fa-solid fa-database",routerLink:`/${R(e?.id,Y4)}/data`,queryParamsHandling:"preserve",label:e?.name}});J2(()=>{let e=this.modId();e&&e3("set_mod_id",e)}),J2(()=>{let e=this.mod();e&&e3("set_game",e.game)})}computeDefaults(e,r){if(e?.defaults==null)return;let c=e.defaults;if("presets"in c){let v=R(c.presets.find(B=>B.id===r),R(c.presets[0],{id:0,label:""})),_=[],y=R(v.beacon,c.beacon);if(y){let B=Q4(y),k=e.items.find(F=>F.id===B)?.beacon;if(k){let F=R(v.beaconModule,c.beaconModule),P=[{count:L(k.modules),id:R(F,"")}];_=[{count:L(R(v.beaconCount,0)),id:y,modules:P}]}}let N=R(v.excludedRecipes,c.excludedRecipes),S=R(v.machineRank,c.machineRank),V=R(v.fuelRank,c.fuelRank),W=R(v.moduleRank,c.moduleRank);return{locations:R(v.locations,c.locations),beltId:R(v.belt,c.belt),beltStack:L(R(v.beltStack,c.beltStack)),pipeId:R(v.pipe,c.pipe),cargoWagonId:R(v.cargoWagon,c.cargoWagon),fluidWagonId:R(v.fluidWagon,c.fluidWagon),excludedRecipeIds:R(N,[]),machineRankIds:R(S,[]),fuelRankIds:R(V,[]),moduleRankIds:R(W,[]),beacons:_}}let i=r,o=[],l,d;switch(e.game){case"factorio":{if(l=i===0?void 0:c.moduleRank,c.beacon){let v=e.items.find(_=>_.id===c.beacon)?.beacon;if(v){let _=c.beacon,y=[{count:L(v.modules),id:R(c.beaconModule,"")}];o=[{count:i<2?L.zero:i===2?L(8n):L(12n),id:_,modules:y}]}}break}case"dyson-sphere-program":{l=i===2?c.moduleRank:void 0;break}case"satisfactory":{l=c.moduleRank,d=L(100n);break}case"final-factory":{l=c.moduleRank;break}}let m=i===0?c.minMachineRank:c.maxMachineRank;return{beltId:i===0?c.minBelt:c.maxBelt,pipeId:i===0?c.minPipe:c.maxPipe,cargoWagonId:c.cargoWagon,fluidWagonId:c.fluidWagon,excludedRecipeIds:R(c.excludedRecipes,[]),machineRankIds:R(m,[]),fuelRankIds:R(c.fuelRank,[]),moduleRankIds:R(l,[]),beacons:o,overclock:d}}computeDataset(e,r,c,i){let o=r1(R(e?.categories,[])),l=r1(R(e?.icons,[])),d=r1(R(e?.items,[])),m=r1(R(e?.recipes,[])),v=_8(R(e?.limitations,{})),_=r1(R(e?.locations,[]));if(c){for(let I of Object.keys(c.categories).filter(O=>o[O]))o[I]=$(o[I],{name:c.categories[I]});for(let I of Object.keys(c.items).filter(O=>d[O]))d[I]=$(d[I],{name:c.items[I]});for(let I of Object.keys(c.recipes).filter(O=>m[O]))m[I]=$(m[I],{name:c.recipes[I]});if(c.locations)for(let I of Object.keys(c.locations).filter(O=>_[O]))_[I]=$(_[I],{name:c.locations[I]})}let y=Object.keys(o),N=Object.keys(l),S=Object.keys(d),V=Object.keys(m),W=Object.keys(_),B=S.map(I=>D8(d[I])),k=V.map(I=>T8(m[I]));k.filter(I=>!l[I.id]&&!I.icon).forEach(I=>{let O=Object.keys(I.out)[0],C2=d[O];I.icon=C2.icon??O});let F=new Set,P=new Set,J=F8[R(e?.flags,Y4)];if(J.has("quality")){let I=[1,2,3,5];k.forEach(i2=>{i2.producers=[...i2.producers,...I.flatMap(m2=>i2.producers.map(S2=>E1(S2,m2)))]});let O=B.length,C2=k.length;I.forEach(i2=>{for(let m2=0;m2<O;m2++){let S2=B[m2];if(!H3(S2))continue;let P2=E1(S2.id,i2);F.add(P2),S.push(P2);let z2=$(S2,{id:P2,quality:i2,icon:R(S2.icon,S2.id)});if(z2.machine?.speed&&z2.machine.entityType&&C8.has(z2.machine.entityType)){let W2=L(i2).mul(L(3n,10n)).add(L.one).mul(z2.machine.speed);z2.machine=$(z2.machine,{speed:W2})}if(z2.module){let W2=L(i2).mul(L(3n,10n)).add(L.one);for(let e1 of Object.keys(C4))if(z2.module[e1]&&!Z4(z2.module,e1)){let q1=z2.module[e1].mul(W2);q1=q1.trunc(C4[e1]),z2.module=$(z2.module,{[e1]:q1})}}if(z2.beacon){let W2=L(i2).mul(L(2n,15n)).add(L.one).mul(z2.beacon.effectivity);if(z2.beacon=$(z2.beacon,{effectivity:W2}),z2.beacon.usage){let e1=L.one.sub(L(i2).mul(L(1n,6n))).mul(z2.beacon.usage);z2.beacon=$(z2.beacon,{usage:e1})}}if(z2.pipe){let W2=L(i2).mul(L(3n,10n)).add(L.one),e1=z2.pipe.speed.mul(W2);z2.pipe=$(z2.pipe,{speed:e1})}B.push(z2)}for(let m2=0;m2<C2;m2++){let S2=k[m2];if(!A8(S2,d))continue;let P2=E1(S2.id,i2);P.add(P2),V.push(P2);let z2=this.qualityRecord(S2.in,i2,d,S2.flags.has("technology")),W2=S2.flags.has("technology")?S2.out:this.qualityRecord(S2.out,i2,d),e1;S2.catalyst&&(e1=this.qualityRecord(S2.catalyst,i2,d)),k.push($(S2,{id:P2,in:z2,out:W2,catalyst:e1,quality:i2,icon:R(S2.icon,S2.id)}))}})}let Y=B.filter(j2("beacon")).sort((I,O)=>I.beacon.modules.sub(O.beacon.modules).toNumber()).map(I=>I.id),s2=B.filter(j2("belt")).sort((I,O)=>I.belt.speed.sub(O.belt.speed).toNumber()).map(I=>I.id),g2=B.filter(j2("pipe")).sort((I,O)=>I.pipe.speed.sub(O.pipe.speed).toNumber()).map(I=>I.id),y2=B.filter(j2("cargoWagon")).sort((I,O)=>I.cargoWagon.size.sub(O.cargoWagon.size).toNumber()).map(I=>I.id),A2=B.filter(j2("fluidWagon")).sort((I,O)=>I.fluidWagon.capacity.sub(O.fluidWagon.capacity).toNumber()).map(I=>I.id),D2=B.filter(j2("machine")).map(I=>I.id),V2=B.filter(j2("module")),E=V2.map(I=>I.id),e2=V2.filter(I=>I.module.sprays!=null).map(I=>I.id),d2=B.filter(j2("fuel")).sort((I,O)=>I.fuel.value.sub(O.fuel.value).toNumber()).map(I=>I.id),b2=B.filter(j2("technology")).map(I=>I.id),D={};for(let I of y){let O=[[]],C2=B.filter(i2=>i2.category===I).sort((i2,m2)=>i2.row-m2.row);if(C2.length){let i2=C2[0].row;for(let m2 of C2)m2.row>i2&&(O.push([]),i2=m2.row),O[O.length-1].push(m2.id);D[I]=O}}let f={};for(let I of y){let O=[[]],C2=k.filter(i2=>i2.category===I).sort((i2,m2)=>i2.row-m2.row);if(C2.length){let i2=C2[0].row;for(let m2 of C2)m2.row>i2&&(O.push([]),i2=m2.row),O[O.length-1].push(m2.id);f[I]=O}}let z={},C={},j={},Z={},H={},A={},T={},x={},U=B.reduce((I,O)=>(O.beacon&&(z[O.id]=O.beacon),O.belt?C[O.id]=O.belt:O.pipe&&(C[O.id]=O.pipe),O.cargoWagon&&(j[O.id]=O.cargoWagon),O.fluidWagon&&(Z[O.id]=O.fluidWagon),O.machine&&(H[O.id]=O.machine),O.module&&(A[O.id]=O.module),O.fuel&&(T[O.id]=O.fuel),O.technology&&(x[O.id]=O.technology),I[O.id]=O,I),{}),X=new Set(S),K=k.reduce((I,O)=>(Object.keys(O.out).forEach(C2=>{(O.in[C2]??0)<O.out[C2]&&X.delete(C2)}),I[O.id]=O,I),{});if(J.has("quality")){let I=[1,2,3,5];for(let O of I)for(let C2 in x){let i2=x[C2];if(i2.prodUpgrades)for(let m2 of i2.prodUpgrades.slice()){let S2=E1(m2,O);P.has(S2)&&i2.prodUpgrades.push(S2)}}}let q=[],n2={};for(let I in x)x[I].prodUpgrades&&(q.push(I),n2[I]=x[I].prodUpgrades);let x2=`url("data/${R(e?.id,Y4)}/icons.webp")`;function w2(I,O){return I.reduce((C2,i2)=>{let m2=O[i2],S2=R(m2.icon,i2),P2=m2.iconText,z2=m2.quality;return C2[i2]=g1(U2({},l[S2]),{file:x2,text:P2,quality:z2}),C2},{})}let p1={system:j8,category:w2(y,o),item:w2(S,U),recipe:w2(V,K),location:w2(W,_)};return{game:i,modId:R(e?.id,Y4),info:l6[i],flags:J,version:R(e?.version,{}),categoryIds:y,categoryRecord:o,itemCategoryRows:D,recipeCategoryRows:f,iconIds:N,iconRecord:p1,itemIds:S,itemQIds:F,itemRecord:U,noRecipeItemIds:X,beaconIds:Y,beaconRecord:z,beltIds:s2,pipeIds:g2,beltRecord:C,cargoWagonIds:y2,cargoWagonRecord:j,fluidWagonIds:A2,fluidWagonRecord:Z,machineIds:D2,machineRecord:H,moduleIds:E,proliferatorModuleIds:e2,moduleRecord:A,fuelIds:d2,fuelRecord:T,recipeIds:V,recipeQIds:P,recipeRecord:K,prodUpgradeTechs:q,prodUpgrades:n2,technologyIds:b2,technologyRecord:x,locationIds:W,locationRecord:_,limitations:v,hash:r}}computeSettings(e,r,c){let i=e.researchedTechnologyIds,o=Object.keys(c.technologyRecord),l=new Set(o);if(i!=null&&o.length>0){let z=Array.from(i).filter(C=>l.has(C));l=new Set(z)}let d=e.locationIds,m=r?.locations??Object.keys(c.locationRecord),v=new Set(m);d!=null&&m.length>0&&(v=d);let _=0;c.flags.has("quality")&&(l.has(k8)?_=5:l.has(E8)?_=3:l.has(R8)&&(_=2));let y=c.recipeIds.map(z=>c.recipeRecord[z]).filter(z=>(!z.flags.has("locked")||Array.from(l).some(C=>c.technologyRecord[C].unlockedRecipes?.includes(Q4(z.id))))&&(z.quality==null||z.quality<=_)),N=Array.from(c.noRecipeItemIds).map(z=>c.itemRecord[z]).filter(z=>z.quality==null||z.quality<_).map(z=>z.id),S=new Set(N);y.forEach(z=>{Object.keys(z.in).forEach(C=>S.add(C)),Object.keys(z.out).forEach(C=>S.add(C))});let V=y.filter(z=>(z.locations==null||z.locations.some(C=>v.has(C)))&&z.producers.some(C=>S.has(C)&&(c.machineRecord[C].locations==null||c.machineRecord[C].locations.some(j=>v.has(j))))),W=new Set(V.map(z=>z.id));function B(z,C){if(z=R(z,C),!(!z||!S.has(z)))return z}function k(z,C){return z=R(z,C),z.filter(j=>S.has(j))}let F=r?.beltId,P=B(e.beltId,F),J=r?.pipeId,Y=B(e.pipeId,J),s2=r?.cargoWagonId,g2=B(e.cargoWagonId,s2),y2=r?.fluidWagonId,A2=B(e.fluidWagonId,y2),D2=R(r?.machineRankIds,[]),V2=k(e.machineRankIds,D2).filter(z=>c.machineRecord[z].locations==null||c.machineRecord[z].locations.some(C=>v.has(C))),E=R(r?.fuelRankIds,[]),e2=k(e.fuelRankIds,E),o2=R(r?.moduleRankIds,[]),d2=k(e.moduleRankIds,o2),b2=r?.beacons;b2&&(b2=b2.map(z=>(z.id&&!S.has(z.id)&&(z=$(z,{id:void 0})),z.modules&&(z=$(z,{modules:z.modules.map(C=>(C.id&&!S.has(C.id)&&(C=$(C,{id:""})),C))})),z)).filter(z=>z.id));let D=new Set(r?.excludedRecipeIds),f=R(e.excludedRecipeIds,D);return $(e,{beltId:P,defaultBeltId:F,stack:R(e.stack,r?.beltStack),pipeId:Y,defaultPipeId:J,cargoWagonId:g2,defaultCargoWagonId:s2,fluidWagonId:A2,defaultFluidWagonId:y2,excludedRecipeIds:f,defaultExcludedRecipeIds:D,machineRankIds:V2,defaultMachineRankIds:D2,fuelRankIds:e2,defaultFuelRankIds:E,moduleRankIds:d2,defaultModuleRankIds:o2,beacons:this.hydration.hydrateBeacons(e.beacons,b2),overclock:e.overclock??r?.overclock,researchedTechnologyIds:l,locationIds:v,defaultLocationIds:new Set(c.locationIds),availableRecipeIds:W,availableItemIds:S,quality:_})}qualityRecord(e,r,c,i=!1){let o=i?L.one.add(L(r)):L.one;return Object.keys(e).reduce((l,d)=>(c[d].stack?l[E1(d,r)]=e[d].div(o):l[d]=e[d],l),{})}};Z1.\u0275fac=function(r){return new(r||Z1)},Z1.\u0275prov=a2({token:Z1,factory:Z1.\u0275fac,providedIn:"root"});var c1=Z1;function I1(a){return a.unit===3}var Q1=class Q1{constructor(){this.hydration=Q(T1);this.options=Q(A1);this.maxFactor=L(4n);this.minFactor=L(1n,5n);this.pollutionFactor=L(60n);this.minFactorioRecipeTime=L(1n,60n)}adjustRecipe(t,e,r,c,i){let o=$(I8(i.recipeRecord[t]),{effects:{consumption:L.one,pollution:L.one,productivity:L.one,quality:L.zero,speed:L.one},produces:new Set,output:{}}),{proliferatorSprayId:l,miningBonus:d,researchBonus:m,netProductionOnly:v}=c,_=d.div(L(100n)),y=m.add(L(100n)).div(L(100n));if(e.machineId!=null){let N=i.machineRecord[e.machineId];if(N.speed!=null)o.time=o.time.div(N.speed);else{let F=[...Object.keys(o.in).filter(J=>o.in[J].nonzero()),...Object.keys(o.out).filter(J=>o.out[J].nonzero())].map(J=>{let Y=r[J],s2=Y.beltId;if(s2!=null)return i.beltRecord[s2].speed.mul(R(Y.stack,L.one))}).filter(i6),P;for(let J of F)(P==null||P.lt(J))&&(P=J);P!=null&&!P.isZero()&&(o.time=o.time.div(P))}o.flags.has("technology")&&i.flags.has("researchSpeed")&&(o.time=o.time.div(y));let S=o.effects;if(o.flags.has("mining")&&(S.productivity=S.productivity.add(_)),N.baseEffect){let k=Object.keys(N.baseEffect);for(let F of k)N.baseEffect[F]&&(S[F]=S[F].add(N.baseEffect[F]))}e.productivity&&(S.productivity=S.productivity.add(e.productivity.div(L(100n))));let V={};if(e.modules)for(let{id:k,count:F}of e.modules){if(k==null||F==null)continue;let P=i.moduleRecord[k];if(P==null)continue;let J;if(i.flags.has("somersloop")&&k===w8&&N.modules instanceof t1&&(J=N.modules),P.speed&&(S.speed=S.speed.add(P.speed.mul(F))),P.productivity){let Y=P.productivity.mul(F);J&&(Y=Y.div(J)),S.productivity=S.productivity.add(Y)}if(P.consumption){let Y=P.consumption.mul(F);J&&(Y=Y.div(J).add(L.one),Y=Y.mul(Y).sub(L.one)),S.consumption=S.consumption.add(Y)}if(P.pollution&&(S.pollution=S.pollution.add(P.pollution.mul(F))),P.quality&&(S.quality=S.quality.add(P.quality.mul(F))),P.sprays){let Y=P.sprays,s2=i.moduleRecord[l];s2&&(Y=Y.mul(L.one.add(R(s2.productivity,L.zero))).floor());let g2=P.proliferator;g2&&(V[g2]||(V[g2]=L.zero),V[g2]=V[g2].add(Y))}}if(e.beacons!=null){let k;if(i.flags.has("diminishingBeacons")){let F=e.beacons.reduce((P,J)=>P.add(R(J.count,L.zero)),L.zero);k=Math.round(F.toNumber())-1}for(let F of e.beacons){if(!F.count?.nonzero()||F.id==null||F.modules==null)continue;let P=i.beaconRecord[F.id],J=L.one;P.profile&&k&&k>=0&&k<P.profile.length&&(J=P.profile[k]);let Y=F.count.mul(J),s2={};for(let{id:g2,count:y2}of F.modules){if(!g2||y2==null)continue;let A2=i.moduleRecord[g2];for(let D2 of x8){if(!A2[D2])continue;let V2=A2[D2].mul(y2).mul(P.effectivity).trunc(C4[D2]),E=s2[D2];s2[D2]=E?E.add(V2):V2}}for(let g2 of Object.keys(s2)){let y2=s2[g2];if(y2==null||y2.isZero())continue;let A2=y2.mul(Y).round(C4[g2]);S[g2]=S[g2].add(A2)}}}let W;e.overclock&&!e.overclock.eq(L(100n))&&(W=e.overclock.div(L(100n)),S.speed=S.speed.mul(W)),i.flags.has("minimumFactor")&&(S.speed.lt(this.minFactor)&&(S.speed=this.minFactor),S.consumption.lt(this.minFactor)&&(S.consumption=this.minFactor),S.pollution.lt(this.minFactor)&&(S.pollution=this.minFactor)),i.flags.has("maximumFactor")&&!o.flags.has("mining")&&S.productivity.gt(this.maxFactor)&&(S.productivity=this.maxFactor),o.time=o.time.div(S.speed),o.time.lt(this.minFactorioRecipeTime)&&i.flags.has("minimumRecipeTime")&&(o.time=this.minFactorioRecipeTime);for(let k of Object.keys(o.out))if(o.catalyst?.[k]){let F=o.catalyst[k],P=o.out[k].sub(F);P.gt(L.zero)&&(o.out[k]=F.add(P.mul(S.productivity)))}else o.out[k]=o.out[k].mul(S.productivity);o.drain=N.drain;let B=o.usage??N.usage??L.zero;if(W&&(B?.gt(L.zero)?B=B.mul(W.pow(1.321928)):B=B.mul(W)),B=B.mul(S.consumption),o.consumption=N.type==="electric"?B:L.zero,i.flags.has("consumptionAsDrain")&&o.consumption?.nonzero()&&(o.drain=o.consumption,delete o.consumption),o.pollution=N.pollution&&e.machineId!==b8?N.pollution.div(this.pollutionFactor).mul(S.pollution).mul(S.consumption):L.zero,N.ingredientUsage)for(let k of Object.keys(o.in))o.in[k]=o.in[k].mul(N.ingredientUsage);if(i.flags.has("quality")&&S.quality.gt(L.zero))for(let k of Object.keys(o.out)){let F=i.itemRecord[k];if(!H3(F))continue;let J=o.out[k],Y=Q4(k),s2;for(let g2=o.quality??0;g2<=c.quality;g2++){if(g2===4)continue;let y2=E1(Y,g2);s2==null?(J=J.mul(S.quality),s2=y2):(o.out[s2]=o.out[s2].sub(J),o.out[y2]=J,J=J.mul(L(1n,10n)),s2=y2)}}if(N.consumption){let k=N.consumption;for(let F of Object.keys(k)){let P=o.time.div(L(60n)).mul(k[F]);o.in[F]=(o.in[F]||L.zero).add(P)}}if(e.fuelId){let k=i.fuelRecord[e.fuelId];if(k){let F=o.time.mul(B).div(k.value).div(L(1000n));o.in[e.fuelId]=(o.in[e.fuelId]||L.zero).add(F),k.result&&(o.out[k.result]=(o.out[k.result]||L.zero).add(F))}}if(Object.keys(V).length>0){let k={};for(let P of Object.keys(V)){k[P]=L.zero;for(let J of Object.keys(o.in)){let Y=V[P],s2=o.in[J].div(Y);k[P]=k[P].add(s2)}}let F=i.moduleRecord[l];if(F?.sprays){let P=F.sprays.mul(L.one.add(R(F.productivity,L.zero))).floor().sub(L.one),J=L.zero;for(let s2 of Object.keys(k)){let g2=k[s2].div(P);J=J.add(g2)}let Y=F.proliferator;Y&&(k[Y]||(k[Y]=L.zero),k[Y]=k[Y].add(J))}for(let P of Object.keys(k))o.in[P]?o.in[P]=o.in[P].add(k[P]):o.in[P]=k[P]}}if(v)for(let N of Object.keys(o.out)){let S=o.out[N];if(o.in[N]!=null){let V=o.in[N];V.gt(S)?(o.in[N]=V.sub(S),delete o.out[N]):V.lt(S)?(o.out[N]=S.sub(V),delete o.in[N]):(delete o.in[N],delete o.out[N])}}return o}adjustLaunchRecipeObjective(t,e,r){if(!t.part)return;let c=e[t.part].machineId;if(!c)return;let i=r.machineRecord[c];if(!i?.silo)return;let o=r.adjustedRecipe[t.part],l=Object.keys(o.out)[0],d=i.silo.parts.div(o.out[l]);t.time=o.time.mul(d)}adjustSiloRecipes(t,e,r){for(let c of Object.keys(t)){let i=e[c].machineId;if(!i)continue;let o=r.machineRecord[i],l=t[c];if(!o?.silo||l.part)continue;let d=Object.keys(l.out)[0],m=o.silo.parts.div(l.out[d]);for(let v of Object.keys(t).filter(_=>t[_].part===c&&e[_].machineId===i))t[v].time=l.time.mul(m).add(o.silo.launch);l.time=l.time.mul(m).add(o.silo.launch).div(m)}return t}allowsModules(t,e){return(!e.silo||!t.part)&&!!e.modules}adjustDataset(t,e,r,c){let i=Array.from(r.availableRecipeIds),o=this.adjustRecipes(i,t,e,r,c);return this.adjustCosts(i,o,t,r.costs,c),this.finalizeData(i,o,r,c)}adjustRecipes(t,e,r,c,i){return this.adjustSiloRecipes(t.reduce((o,l)=>(o[l]=this.adjustRecipe(l,e[l],r,c,i),o),{}),e,i)}adjustCosts(t,e,r,c,i){t.map(o=>e[o]).forEach(o=>{let l=r[o.id];if(l.cost)o.cost=l.cost;else if(o.cost){let d=Object.keys(o.out).reduce((m,v)=>m.add(o.out[v]),L.zero).div(o.time);o.cost=d.mul(o.cost).mul(c.factor)}else if(o.cost=c.machine,l.machineId!=null&&c.footprint.nonzero()){let d=i.machineRecord[l.machineId];d.size!=null&&(o.cost=o.cost.mul(L(d.size[0]*d.size[1])))}o.flags.has("recycling")&&(o.cost=o.cost.mul(c.recycling))})}finalizeData(t,e,r,c){let i={},o={},l={};c.itemIds.forEach(v=>{i[v]=[],o[v]=[],l[v]=[]}),t.map(v=>e[v]).forEach(v=>{u6(v),Object.keys(v.out).forEach(_=>i[_].push(v.id)),r.excludedRecipeIds.has(v.id)||(v.produces.forEach(_=>o[_].push(v.id)),Object.keys(v.output).forEach(_=>l[_].push(v.id)))});let d={},m=!1;do m=!1,c.itemIds.forEach(v=>{o[v]=o[v].filter(_=>{let y=e[_],N=Object.keys(y.in).every(S=>{if(r.excludedItemIds.has(S)||o[S].length===0||y.produces.has(S))return!0;let V=o[S].map(W=>e[W]).some(W=>W.output[v]==null||W.output[v].mul(y.output[S]).div(W.output[S]).lte(y.output[v]));return V||(d[S]==null?d[S]=[[v,_]]:d[S].push([v,_])),V});return N||(m=!0),N}),o[v].length===0&&d[v]?.length&&(d[v].forEach(([_,y])=>o[_].push(y)),delete d[v],m=!0)});while(m);return $(c,{adjustedRecipe:e,itemRecipeIds:i,itemAvailableRecipeIds:o,itemAvailableIoRecipeIds:l})}computeRecipeSettings(t,e,r,c,i){t.machineOptions=this.options.machineOptions(e,c,i),t.defaultMachineId=this.options.bestMatch(t.machineOptions,c.machineRankIds),t.machineId=R(t.machineId,t.defaultMachineId);let o=i.machineRecord[t.machineId],l=r[t.machineId];if(e.flags.has("burn")?(t.defaultFuelId=Object.keys(e.in)[0],t.fuelId=t.defaultFuelId):o.type==="burner"?(t.defaultFuelId=l?.fuelId,t.fuelId=R(t.fuelId,t.defaultFuelId),t.fuelOptions=l?.fuelOptions):delete t.fuelId,o!=null&&this.allowsModules(e,o)?(t.moduleOptions=this.options.moduleOptions(o,c,i,e.id),t.modules=this.hydration.hydrateModules(t.modules,t.moduleOptions,c.moduleRankIds,o.modules,l.modules),t.beacons=this.hydration.hydrateBeacons(t.beacons,l.beacons)):(delete t.modules,delete t.beacons),t.beacons)for(let d of t.beacons)d.total!=null&&(d.count==null||d.count.isZero())&&delete d.total;t.defaultOverclock=l?.overclock,t.overclock=R(t.overclock,t.defaultOverclock)}adjustObjective(t,e,r,c,i,o){if(!I1(t))return t;let l=$(t),d=o.recipeRecord[l.targetId];return l.productivity=r[l.targetId].productivity,this.computeRecipeSettings(l,d,c,i,o),l.recipe=this.adjustRecipe(l.targetId,l,e,i,o),this.adjustLaunchRecipeObjective(l.recipe,r,o),u6(l.recipe),l}};Q1.\u0275fac=function(e){return new(e||Q1)},Q1.\u0275prov=a2({token:Q1,factory:Q1.\u0275fac,providedIn:"root"});var x4=Q1;var F1=class F1 extends a1{constructor(){super(...arguments);this.settingsStore=Q(c1);this.settings=r2(()=>this.computeItemsSettings(this.state(),this.settingsStore.settings(),this.settingsStore.dataset()));this.itemsModified=r2(()=>{let e=this.state();return{belts:Object.keys(e).some(r=>e[r].beltId!=null),wagons:Object.keys(e).some(r=>e[r].wagonId!=null)}})}computeItemsSettings(e,r,c){let i={};for(let o of c.itemIds.map(l=>c.itemRecord[l])){let l=e[o.id],d=this.defaultBelt(o,r),m=this.defaultStack(o,r),v=this.defaultWagon(o,r),_=R(l?.beltId,d),y=R(l?.stack,m),N=R(l?.wagonId,v);i[o.id]={beltId:_,defaultBeltId:d,stack:y,defaultStack:m,wagonId:N,defaultWagonId:v}}return i}defaultBelt(e,r){return e.stack?r.beltId:r.pipeId?r.pipeId:U3}defaultStack(e,r){return e.stack==null||r.stack==null?L.one:e.stack.lt(r.stack)?e.stack:r.stack}defaultWagon(e,r){return e.stack?r.cargoWagonId:r.fluidWagonId}};F1.\u0275fac=(()=>{let e;return function(c){return(e||(e=x1(F1)))(c||F1)}})(),F1.\u0275prov=a2({token:F1,factory:F1.\u0275fac,providedIn:"root"});var P1=F1;var B1=class B1 extends a1{constructor(){super(...arguments);this.hydration=Q(T1);this.options=Q(A1);this.settingsStore=Q(c1);this.settings=r2(()=>this.computeMachinesSettings(this.state(),this.settingsStore.settings(),this.settingsStore.dataset()))}computeMachinesSettings(e,r,c){let i={};for(let o of c.machineIds){let l=c.machineRecord[o],d=$(e[o]);l.type==="burner"?(d.fuelOptions=this.options.fuelOptions(l,r,c),d.defaultFuelId=this.options.bestMatch(d.fuelOptions,r.fuelRankIds),d.fuelId=R(d?.fuelId,d.defaultFuelId)):delete d.fuelId,l.modules?(d.moduleOptions=this.options.moduleOptions(l,r,c),d.modules=this.hydration.hydrateModules(d.modules,d.moduleOptions,r.moduleRankIds,l.modules),d.beacons=this.hydration.hydrateBeacons(d.beacons,r.beacons)):(delete d.modules,delete d.beacons),d.defaultOverclock=r.overclock,d.overclock=R(d.overclock,d.defaultOverclock),i[o]=d}return i}};B1.\u0275fac=(()=>{let e;return function(c){return(e||(e=x1(B1)))(c||B1)}})(),B1.\u0275prov=a2({token:B1,factory:B1.\u0275fac,providedIn:"root"});var N4=B1;var O1=class O1 extends a1{constructor(){super(...arguments);this.adjustment=Q(x4);this.itemsStore=Q(P1);this.machinesStore=Q(N4);this.settingsStore=Q(c1);this.settings=r2(()=>this.computeRecipesSettings(this.state(),this.machinesStore.settings(),this.settingsStore.settings(),this.settingsStore.dataset()));this.adjustedDataset=r2(()=>{let e=this.settings(),r=this.itemsStore.settings(),c=this.settingsStore.settings(),i=this.settingsStore.dataset();return this.adjustment.adjustDataset(e,r,c,i)})}computeRecipesSettings(e,r,c,i){let o={};for(let l of i.recipeIds.map(d=>i.recipeRecord[d])){let d=$(e[l.id]);this.adjustment.computeRecipeSettings(d,l,r,c,i),o[l.id]=d}return o}};O1.\u0275fac=(()=>{let e;return function(c){return(e||(e=x1(O1)))(c||O1)}})(),O1.\u0275prov=a2({token:O1,factory:O1.\u0275fac,providedIn:"root"});var D4=O1;function V8(a){a||(a=Q(w3));let t=new C3(e=>{if(a.destroyed){e.next();return}return a.onDestroy(e.next.bind(e))});return e=>e.pipe(Z6(t))}function q8(a,t){let e=t?.injector??Q(f4),r=new W6(1),c=J2(()=>{let i;try{i=a()}catch(o){h4(()=>r.error(o));return}h4(()=>r.next(i))},{injector:e,manualCleanup:!0});return e.get(w3).onDestroy(()=>{c.destroy(),r.complete()}),r.asObservable()}var Z8=G6(K8(),1);var $3=(c=>(c[c.Output=0]="Output",c[c.Input=1]="Input",c[c.Maximize=2]="Maximize",c[c.Limit=3]="Limit",c))($3||{}),$v=[{value:0,label:"options.objectiveType.output",tooltip:"options.objectiveType.outputTooltip"},{value:1,label:"options.objectiveType.input",tooltip:"options.objectiveType.inputTooltip"},{value:2,label:"options.objectiveType.maximize",tooltip:"options.objectiveType.maximizeTooltip"},{value:3,label:"options.objectiveType.limit",tooltip:"options.objectiveType.limitTooltip"}];var J8=L(1n,10n);var Y8=g4()?{}:{msgLevel:"off"};var e4=class e4{solve(t,e,r,c){if(c)return{steps:[],resultType:"paused"};if(t.length===0)return{steps:[],resultType:"skipped"};let i=this.getState(t,e,r),o=this.getSolution(i);return o.resultType==="solved"&&this.updateSteps(o,i),{steps:i.steps,resultType:o.resultType,returnCode:o.returnCode,simplexStatus:o.simplexStatus,unboundedRecipeId:o.unboundedRecipeId,time:o.time,cost:o.cost}}addItemValue(t,e,r=L.zero,c="out"){if(t[e]){let i=t[e][c];i?t[e][c]=i.add(r):t[e][c]=r}else t[e]={out:L.zero,[c]:r}}getState(t,e,r){let c={objectives:t,recipeObjectives:t.filter(i=>I1(i)&&[0,2].includes(i.type)),steps:[],recipes:{},itemValues:{},recipeLimits:{},unproduceableIds:new Set,excludedIds:e.excludedItemIds,itemIds:r.itemIds.filter(i=>!e.excludedItemIds.has(i)),maximizeType:e.maximizeType,requireMachinesOutput:e.requireMachinesOutput,costs:e.costs,data:r,hasSurplusCost:e.costs.surplus.gt(L.zero)};for(let i of t)if(I1(i))switch(i.type){case 0:case 2:{for(let o of Object.keys(i.recipe.out))this.addItemValue(c.itemValues,o),this.parseItemRecursively(o,c);this.parseRecipeRecursively(i.recipe,c);break}case 1:{for(let o of Object.keys(i.recipe.out).filter(l=>i.recipe.produces.has(l))){let l=i.value.mul(i.recipe.output[o]);this.addItemValue(c.itemValues,o,l,"in")}break}case 3:{let o=c.recipeLimits[i.targetId];(o==null||o.gt(i.value))&&(c.recipeLimits[i.targetId]=i.value);break}}else switch(i.type){case 0:{this.addItemValue(c.itemValues,i.targetId,i.value),this.parseItemRecursively(i.targetId,c);break}case 1:{this.addItemValue(c.itemValues,i.targetId,i.value,"in");break}case 2:{this.addItemValue(c.itemValues,i.targetId,i.value,"max"),this.addItemValue(c.itemValues,i.targetId),this.parseItemRecursively(i.targetId,c);break}case 3:{this.addItemValue(c.itemValues,i.targetId),this.parseItemRecursively(i.targetId,c);let o=c.itemValues[i.targetId].lim;(o==null||o.gt(i.value))&&(c.itemValues[i.targetId].lim=i.value);break}}return this.simplifyMaximizeValues(c),this.addSurplusVariables(c),this.parseUnproduceable(c),c}recipeMatches(t,e){let c=(e.hasSurplusCost?e.data.itemAvailableIoRecipeIds:e.data.itemAvailableRecipeIds)[t].filter(i=>!e.recipes[i]).map(i=>e.data.adjustedRecipe[i]);return c.forEach(i=>e.recipes[i.id]=i),c}itemMatches(t,e){let r=new Set;Object.keys(t.in).filter(c=>e.itemValues[c]?.out==null).forEach(c=>r.add(c)),e.hasSurplusCost&&Object.keys(t.out).filter(c=>e.itemValues[c]?.out==null).forEach(c=>r.add(c));for(let c of r)this.addItemValue(e.itemValues,c);return Array.from(r)}parseRecipeRecursively(t,e){let r=this.itemMatches(t,e);for(let c of r.filter(i=>e.itemIds.includes(i)))this.parseItemRecursively(c,e)}parseItemRecursively(t,e){let r=this.recipeMatches(t,e);for(let c of r)this.parseRecipeRecursively(c,e)}simplifyMaximizeValues(t){let e=Object.keys(t.itemValues).map(c=>t.itemValues[c]),r=e.reduce((c,i)=>i.max?c.add(i.max):c,L.zero);e.forEach(c=>{c.max&&(c.max=c.max.div(r))})}addSurplusVariables(t){let e=Object.keys(t.recipes).map(r=>t.recipes[r]);for(let r of e)for(let c of Object.keys(r.out).filter(i=>t.itemValues[i]?.out==null))this.addItemValue(t.itemValues,c)}parseUnproduceable(t){let e=Object.keys(t.itemValues),r=new Set(Object.keys(t.recipes));t.unproduceableIds=new Set(e.filter(c=>t.data.itemAvailableRecipeIds[c].every(i=>!r.has(i))))}getSolution(t){let e=this.glpk(t);if(e.error)return{resultType:"failed",returnCode:e.returnCode,simplexStatus:e.status,unboundedRecipeId:e.unboundedRecipeId,surplus:{},unproduceable:{},excluded:{},recipes:{},time:0,cost:L.zero,itemIds:[],recipeIds:[],unproduceableIds:new Set,excludedIds:new Set};let r=Object.keys(t.itemValues),c=Object.keys(t.recipes),{unproduceableIds:i,excludedIds:o}=t,{surplus:l,unproduceable:d,excluded:m,recipes:v}=e;return{resultType:"solved",surplus:l,recipes:v,unproduceable:d,excluded:m,time:e.time,itemIds:r,recipeIds:c,unproduceableIds:i,excludedIds:o,cost:e.cost}}itemCost(t,e,r){let c=r.data.itemRecord[t]?.stack==null&&r.data.flags.has("fluidCostRatio")?J8:L.one,i=r.costs[e];return c.mul(i).toNumber()}glpk(t){let e=Object.keys(t.itemValues),r=Object.keys(t.recipes),c=new Z8.Model({sense:"min"}),i={},o={},l={},d={},m={},v={},_={},y={},N={},S={},V={},W={obj:t.costs.maximize.toNumber(),lb:0,name:"maximize"},B=c.addVar(W),k=L.zero;for(let E of r){let e2={obj:(t.recipes[E].cost??L.zero).toNumber(),lb:0,name:E};t.recipeLimits[E]&&(e2.ub=t.recipeLimits[E].toNumber()),i[E]=c.addVar(e2)}for(let E of t.recipeObjectives){let e2={lb:0,name:E.id};if(E.type===0&&(e2.ub=E.value.toNumber(),e2.lb=E.value.toNumber()),o[E.id]=c.addVar(e2),E.type===2)switch(t.maximizeType){case 0:{let o2={obj:E.value.mul(t.costs.maximize).toNumber(),lb:0,name:E.id};y[E.id]=c.addVar(o2);let b2={coeffs:[[o[E.id],1],[y[E.id],-1]],lb:0,name:E.id};V[E.id]=c.addConstr(b2);break}case 1:{k=k.add(E.value);let d2={coeffs:[[o[E.id],1],[B,E.value.inverse().toNumber()]],lb:0,name:E.id};V[E.id]=c.addConstr(d2);break}}}for(let E of t.unproduceableIds){let o2={obj:this.itemCost(E,"unproduceable",t),lb:0,name:E};d[E]=c.addVar(o2)}for(let E of t.excludedIds){let o2={obj:this.itemCost(E,"excluded",t),lb:0,name:E};m[E]=c.addVar(o2)}for(let E of e){let o2={obj:this.itemCost(E,"surplus",t),lb:0,name:E};v[E]=c.addVar(o2);let d2=t.itemValues[E];if(d2.in){let b2={lb:0,ub:d2.in.toNumber(),name:E};l[E]=c.addVar(b2)}}let F={};for(let E of e){let e2=t.itemValues[E],o2=[],d2=[];t.data.itemAvailableIoRecipeIds[E].forEach(D=>{let f=t.recipes[D];if(f==null)return;let z=f.output[E];z?.nonzero()&&o2.push([i[D],z.toNumber()]),f.in[E]&&d2.push([i[D],f.in[E].div(f.time).toNumber()])});for(let D of t.recipeObjectives){let f=D.recipe,z=f.output[E];z?.nonzero()&&(z.gt(L.zero)&&t.requireMachinesOutput?(F[E]??={},F[E][D.id]=z):o2.push([o[D.id],z.toNumber()])),f.in[E]&&d2.push([o[D.id],f.in[E].div(f.time).toNumber()])}if(t.unproduceableIds.has(E)&&o2.push([d[E],1]),t.excludedIds.has(E)&&o2.push([m[E],1]),e2.in&&o2.push([l[E],1]),o2.push([v[E],-1]),e2.max!=null)switch(t.maximizeType){case 0:{let D={obj:e2.max.mul(t.costs.maximize).toNumber(),lb:0,name:E};_[E]=c.addVar(D),o2.push([_[E],-1]);break}case 1:{k=k.add(e2.max),o2.push([B,e2.max.inverse().toNumber()]);break}}let b2={coeffs:o2,lb:e2.out.toNumber(),ub:e2.out.toNumber(),name:E};if(N[E]=c.addConstr(b2),e2.lim){let D={coeffs:d2,ub:e2.lim.toNumber(),name:E};S[E]=c.addConstr(D)}}B.obj=B.obj*k.toNumber();let P=Date.now(),[J,Y]=this.glpkSimplex(c),s2=Date.now()-P,g2={},y2={},A2={},D2={},V2=L(c.value);if(J!=="ok"||Y!=="optimal"){let E;try{E=c.ray}catch{}let e2;return E&&L8(i,E)&&(e2=E.name),{returnCode:J,status:Y,unboundedRecipeId:e2,time:s2,surplus:g2,unproduceable:y2,excluded:A2,recipes:D2,cost:V2,error:!0}}for(let E of e){let e2=t.itemValues[E],o2=L(v[E].value);if(o2.nonzero()&&(g2[E]=o2),F[E])for(let d2 of Object.keys(F[E])){let b2=F[E][d2],D=o[d2].value,z=L(D).mul(b2);e2.out=e2.out.add(z)}if(e2.max!=null)switch(t.maximizeType){case 1:{let d2=B.value,D=L(d2).mul(e2.max);e2.out=e2.out.add(D);break}case 0:{let d2=_[E].value,b2=L(d2);e2.out=e2.out.add(b2);break}}}for(let E of r){let e2=L(i[E].value);e2.nonzero()&&(D2[E]=e2)}for(let E of t.unproduceableIds){let e2=L(d[E].value);e2.nonzero()&&(y2[E]=e2)}for(let E of t.excludedIds){let e2=L(m[E].value);e2.nonzero()&&(A2[E]=e2)}return t.recipeObjectives=t.recipeObjectives.map(E=>$(E,{value:L(o[E.id].value)})),{returnCode:J,status:Y,time:s2,surplus:g2,unproduceable:y2,excluded:A2,recipes:D2,cost:V2,error:!1}}glpkSimplex(t){return[t.simplex(Y8),t.status]}updateSteps(t,e){for(let r of Object.keys(e.itemValues))this.addItemStep(r,t,e);this.assignRecipes(t,e);for(let r of Object.keys(t.recipes).map(c=>e.recipes[c]))this.addRecipeStep(r,t,e);for(let r of e.recipeObjectives)this.addRecipeStep(r.recipe,t,e,r);e.steps.sort((r,c)=>(r.output!=null?0:1)-(c.output!=null?0:1))}addItemStep(t,e,r){let c=r.itemValues[t],i=r.steps,o=L.zero;r.data.itemAvailableIoRecipeIds[t].forEach(d=>{if(e.recipes[d]==null)return;let v=r.recipes[d];if(v?.out[t]==null)return;let _=v.out[t].mul(e.recipes[v.id]).div(v.time);o=o.add(_)});let l=r.itemValues[t].in;l&&(o=o.add(l));for(let d of r.recipeObjectives){let m=d.recipe;m.out[t]&&(o=o.add(m.out[t].mul(d.value).div(m.time)))}if(e.unproduceable[t]&&(o=o.add(e.unproduceable[t])),e.excluded[t]&&(o=o.add(e.excluded[t])),o.nonzero()){o=o.simplify();let d={id:i.length.toString(),itemId:t,items:o};if(c.out.gt(L.zero)&&(d.output=c.out,d.parents={"":d.output}),i.push(d),e.surplus[t]?.nonzero()){let m=o.sub(e.surplus[t]).simplify();d.surplus=m.isZero()?d.items:e.surplus[t]}}}assignRecipes(t,e){let r=e.steps,c=Object.keys(t.recipes).map(l=>e.recipes[l]);c.push(...e.recipeObjectives.map(l=>l.recipe));for(let l of r.filter(d=>d.recipeId==null)){let d=c.findIndex(m=>m.id===l.itemId&&m.produces.has(l.itemId));d!==-1&&(l.recipeId=c[d].id,c.splice(d,1))}let i={};for(let l of r.filter(d=>d.recipeId==null))if(l.itemId){let d=l.itemId;i[d]=c.filter(m=>m.output[d]?.gt(L.zero)).sort((m,v)=>v.output[d].sub(m.output[d]).toNumber()).map(m=>m.id)}let o=Object.keys(i).sort((l,d)=>i[l].length-i[d].length);for(let l of o)for(let d of i[l])if(!r.some(m=>m.recipeId===d)){let m=r.find(v=>v.itemId===l);if(m){m.recipeId=d;break}}}addRecipeStep(t,e,r,c){let i=r.steps,o=i.filter(d=>d.machines==null),l=o.find(d=>d.recipeId===t.id);if(l??=o.find(d=>d.recipeId==null&&d.itemId!=null&&t.produces.has(d.itemId)),!l){let d=i.findIndex(m=>m.itemId&&t.produces.has(m.itemId));l={id:i.length.toString()},d!==-1&&d<i.length-1?i.splice(d+1,0,l):i.push(l)}l.recipeId=t.id,l.recipe=t,c?(l.machines=c.value,l.recipeObjectiveId=c.id):l.machines=e.recipes[t.id].add(l.machines??L.zero),this.adjustPowerPollution(l,t,r.data)}adjustPowerPollution(t,e,r){if(t.machines?.nonzero()&&!e.part){if(e.drain?.nonzero()||e.consumption?.nonzero()){if(t.power=L.zero,e.drain?.nonzero()){let c=t.machines.ceil();r.flags.has("inactiveDrain")&&(c=c.sub(t.machines)),t.power=t.power.add(c.mul(e.drain))}e.consumption?.nonzero()&&(t.power=t.power.add(t.machines.mul(e.consumption)))}e.pollution?.nonzero()&&(t.pollution=t.machines.mul(e.pollution))}}};e4.\u0275fac=function(e){return new(e||e4)},e4.\u0275prov=a2({token:e4,factory:e4.\u0275fac,providedIn:"root"});var X3=e4;function K3(a,t){let e;if(t===void 0)for(let r of a)r!=null&&(e<r||e===void 0&&r>=r)&&(e=r);else{let r=-1;for(let c of a)(c=t(c,++r,a))!=null&&(e<c||e===void 0&&c>=c)&&(e=c)}return e}function r3(a,t){let e;if(t===void 0)for(let r of a)r!=null&&(e>r||e===void 0&&r>=r)&&(e=r);else{let r=-1;for(let c of a)(c=t(c,++r,a))!=null&&(e>c||e===void 0&&c>=c)&&(e=c)}return e}function k4(a,t){let e=0;if(t===void 0)for(let r of a)(r=+r)&&(e+=r);else{let r=-1;for(let c of a)(c=+t(c,++r,a))&&(e+=c)}return e}var Sl={value:()=>{}};function e5(){for(var a=0,t=arguments.length,e={},r;a<t;++a){if(!(r=arguments[a]+"")||r in e||/[\s.]/.test(r))throw new Error("illegal type: "+r);e[r]=[]}return new J3(e)}function J3(a){this._=a}function wl(a,t){return a.trim().split(/^|\s+/).map(function(e){var r="",c=e.indexOf(".");if(c>=0&&(r=e.slice(c+1),e=e.slice(0,c)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:r}})}J3.prototype=e5.prototype={constructor:J3,on:function(a,t){var e=this._,r=wl(a+"",e),c,i=-1,o=r.length;if(arguments.length<2){for(;++i<o;)if((c=(a=r[i]).type)&&(c=xl(e[c],a.name)))return c;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++i<o;)if(c=(a=r[i]).type)e[c]=Q8(e[c],a.name,t);else if(t==null)for(c in e)e[c]=Q8(e[c],a.name,null);return this},copy:function(){var a={},t=this._;for(var e in t)a[e]=t[e].slice();return new J3(a)},call:function(a,t){if((c=arguments.length-2)>0)for(var e=new Array(c),r=0,c,i;r<c;++r)e[r]=arguments[r+2];if(!this._.hasOwnProperty(a))throw new Error("unknown type: "+a);for(i=this._[a],r=0,c=i.length;r<c;++r)i[r].value.apply(t,e)},apply:function(a,t,e){if(!this._.hasOwnProperty(a))throw new Error("unknown type: "+a);for(var r=this._[a],c=0,i=r.length;c<i;++c)r[c].value.apply(t,e)}};function xl(a,t){for(var e=0,r=a.length,c;e<r;++e)if((c=a[e]).name===t)return c.value}function Q8(a,t,e){for(var r=0,c=a.length;r<c;++r)if(a[r].name===t){a[r]=Sl,a=a.slice(0,r).concat(a.slice(r+1));break}return e!=null&&a.push({name:t,value:e}),a}var m6=e5;var Y3="http://www.w3.org/1999/xhtml",h6={svg:"http://www.w3.org/2000/svg",xhtml:Y3,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function L1(a){var t=a+="",e=t.indexOf(":");return e>=0&&(t=a.slice(0,e))!=="xmlns"&&(a=a.slice(e+1)),h6.hasOwnProperty(t)?{space:h6[t],local:a}:a}function Nl(a){return function(){var t=this.ownerDocument,e=this.namespaceURI;return e===Y3&&t.documentElement.namespaceURI===Y3?t.createElement(a):t.createElementNS(e,a)}}function Dl(a){return function(){return this.ownerDocument.createElementNS(a.space,a.local)}}function Z3(a){var t=L1(a);return(t.local?Dl:Nl)(t)}function kl(){}function t4(a){return a==null?kl:function(){return this.querySelector(a)}}function t5(a){typeof a!="function"&&(a=t4(a));for(var t=this._groups,e=t.length,r=new Array(e),c=0;c<e;++c)for(var i=t[c],o=i.length,l=r[c]=new Array(o),d,m,v=0;v<o;++v)(d=i[v])&&(m=a.call(d,d.__data__,v,i))&&("__data__"in d&&(m.__data__=d.__data__),l[v]=m);return new T2(r,this._parents)}function g6(a){return a==null?[]:Array.isArray(a)?a:Array.from(a)}function El(){return[]}function c3(a){return a==null?El:function(){return this.querySelectorAll(a)}}function Rl(a){return function(){return g6(a.apply(this,arguments))}}function a5(a){typeof a=="function"?a=Rl(a):a=c3(a);for(var t=this._groups,e=t.length,r=[],c=[],i=0;i<e;++i)for(var o=t[i],l=o.length,d,m=0;m<l;++m)(d=o[m])&&(r.push(a.call(d,d.__data__,m,o)),c.push(d));return new T2(r,c)}function n3(a){return function(){return this.matches(a)}}function Q3(a){return function(t){return t.matches(a)}}var Al=Array.prototype.find;function Tl(a){return function(){return Al.call(this.children,a)}}function Il(){return this.firstElementChild}function r5(a){return this.select(a==null?Il:Tl(typeof a=="function"?a:Q3(a)))}var Fl=Array.prototype.filter;function Pl(){return Array.from(this.children)}function Bl(a){return function(){return Fl.call(this.children,a)}}function c5(a){return this.selectAll(a==null?Pl:Bl(typeof a=="function"?a:Q3(a)))}function n5(a){typeof a!="function"&&(a=n3(a));for(var t=this._groups,e=t.length,r=new Array(e),c=0;c<e;++c)for(var i=t[c],o=i.length,l=r[c]=[],d,m=0;m<o;++m)(d=i[m])&&a.call(d,d.__data__,m,i)&&l.push(d);return new T2(r,this._parents)}function e0(a){return new Array(a.length)}function i5(){return new T2(this._enter||this._groups.map(e0),this._parents)}function i3(a,t){this.ownerDocument=a.ownerDocument,this.namespaceURI=a.namespaceURI,this._next=null,this._parent=a,this.__data__=t}i3.prototype={constructor:i3,appendChild:function(a){return this._parent.insertBefore(a,this._next)},insertBefore:function(a,t){return this._parent.insertBefore(a,t)},querySelector:function(a){return this._parent.querySelector(a)},querySelectorAll:function(a){return this._parent.querySelectorAll(a)}};function l5(a){return function(){return a}}function Ol(a,t,e,r,c,i){for(var o=0,l,d=t.length,m=i.length;o<m;++o)(l=t[o])?(l.__data__=i[o],r[o]=l):e[o]=new i3(a,i[o]);for(;o<d;++o)(l=t[o])&&(c[o]=l)}function Ul(a,t,e,r,c,i,o){var l,d,m=new Map,v=t.length,_=i.length,y=new Array(v),N;for(l=0;l<v;++l)(d=t[l])&&(y[l]=N=o.call(d,d.__data__,l,t)+"",m.has(N)?c[l]=d:m.set(N,d));for(l=0;l<_;++l)N=o.call(a,i[l],l,i)+"",(d=m.get(N))?(r[l]=d,d.__data__=i[l],m.delete(N)):e[l]=new i3(a,i[l]);for(l=0;l<v;++l)(d=t[l])&&m.get(y[l])===d&&(c[l]=d)}function jl(a){return a.__data__}function o5(a,t){if(!arguments.length)return Array.from(this,jl);var e=t?Ul:Ol,r=this._parents,c=this._groups;typeof a!="function"&&(a=l5(a));for(var i=c.length,o=new Array(i),l=new Array(i),d=new Array(i),m=0;m<i;++m){var v=r[m],_=c[m],y=_.length,N=Hl(a.call(v,v&&v.__data__,m,r)),S=N.length,V=l[m]=new Array(S),W=o[m]=new Array(S),B=d[m]=new Array(y);e(v,_,V,W,B,N,t);for(var k=0,F=0,P,J;k<S;++k)if(P=V[k]){for(k>=F&&(F=k+1);!(J=W[F])&&++F<S;);P._next=J||null}}return o=new T2(o,r),o._enter=l,o._exit=d,o}function Hl(a){return typeof a=="object"&&"length"in a?a:Array.from(a)}function s5(){return new T2(this._exit||this._groups.map(e0),this._parents)}function f5(a,t,e){var r=this.enter(),c=this,i=this.exit();return typeof a=="function"?(r=a(r),r&&(r=r.selection())):r=r.append(a+""),t!=null&&(c=t(c),c&&(c=c.selection())),e==null?i.remove():e(i),r&&c?r.merge(c).order():c}function u5(a){for(var t=a.selection?a.selection():a,e=this._groups,r=t._groups,c=e.length,i=r.length,o=Math.min(c,i),l=new Array(c),d=0;d<o;++d)for(var m=e[d],v=r[d],_=m.length,y=l[d]=new Array(_),N,S=0;S<_;++S)(N=m[S]||v[S])&&(y[S]=N);for(;d<c;++d)l[d]=e[d];return new T2(l,this._parents)}function d5(){for(var a=this._groups,t=-1,e=a.length;++t<e;)for(var r=a[t],c=r.length-1,i=r[c],o;--c>=0;)(o=r[c])&&(i&&o.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(o,i),i=o);return this}function p5(a){a||(a=Vl);function t(_,y){return _&&y?a(_.__data__,y.__data__):!_-!y}for(var e=this._groups,r=e.length,c=new Array(r),i=0;i<r;++i){for(var o=e[i],l=o.length,d=c[i]=new Array(l),m,v=0;v<l;++v)(m=o[v])&&(d[v]=m);d.sort(t)}return new T2(c,this._parents).order()}function Vl(a,t){return a<t?-1:a>t?1:a>=t?0:NaN}function m5(){var a=arguments[0];return arguments[0]=this,a.apply(null,arguments),this}function h5(){return Array.from(this)}function g5(){for(var a=this._groups,t=0,e=a.length;t<e;++t)for(var r=a[t],c=0,i=r.length;c<i;++c){var o=r[c];if(o)return o}return null}function v5(){let a=0;for(let t of this)++a;return a}function z5(){return!this.node()}function M5(a){for(var t=this._groups,e=0,r=t.length;e<r;++e)for(var c=t[e],i=0,o=c.length,l;i<o;++i)(l=c[i])&&a.call(l,l.__data__,i,c);return this}function ql(a){return function(){this.removeAttribute(a)}}function Gl(a){return function(){this.removeAttributeNS(a.space,a.local)}}function Wl(a,t){return function(){this.setAttribute(a,t)}}function $l(a,t){return function(){this.setAttributeNS(a.space,a.local,t)}}function Xl(a,t){return function(){var e=t.apply(this,arguments);e==null?this.removeAttribute(a):this.setAttribute(a,e)}}function Kl(a,t){return function(){var e=t.apply(this,arguments);e==null?this.removeAttributeNS(a.space,a.local):this.setAttributeNS(a.space,a.local,e)}}function L5(a,t){var e=L1(a);if(arguments.length<2){var r=this.node();return e.local?r.getAttributeNS(e.space,e.local):r.getAttribute(e)}return this.each((t==null?e.local?Gl:ql:typeof t=="function"?e.local?Kl:Xl:e.local?$l:Wl)(e,t))}function t0(a){return a.ownerDocument&&a.ownerDocument.defaultView||a.document&&a||a.defaultView}function Jl(a){return function(){this.style.removeProperty(a)}}function Yl(a,t,e){return function(){this.style.setProperty(a,t,e)}}function Zl(a,t,e){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(a):this.style.setProperty(a,r,e)}}function _5(a,t,e){return arguments.length>1?this.each((t==null?Jl:typeof t=="function"?Zl:Yl)(a,t,e??"")):U1(this.node(),a)}function U1(a,t){return a.style.getPropertyValue(t)||t0(a).getComputedStyle(a,null).getPropertyValue(t)}function Ql(a){return function(){delete this[a]}}function eo(a,t){return function(){this[a]=t}}function to(a,t){return function(){var e=t.apply(this,arguments);e==null?delete this[a]:this[a]=e}}function y5(a,t){return arguments.length>1?this.each((t==null?Ql:typeof t=="function"?to:eo)(a,t)):this.node()[a]}function b5(a){return a.trim().split(/^|\s+/)}function v6(a){return a.classList||new C5(a)}function C5(a){this._node=a,this._names=b5(a.getAttribute("class")||"")}C5.prototype={add:function(a){var t=this._names.indexOf(a);t<0&&(this._names.push(a),this._node.setAttribute("class",this._names.join(" ")))},remove:function(a){var t=this._names.indexOf(a);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(a){return this._names.indexOf(a)>=0}};function S5(a,t){for(var e=v6(a),r=-1,c=t.length;++r<c;)e.add(t[r])}function w5(a,t){for(var e=v6(a),r=-1,c=t.length;++r<c;)e.remove(t[r])}function ao(a){return function(){S5(this,a)}}function ro(a){return function(){w5(this,a)}}function co(a,t){return function(){(t.apply(this,arguments)?S5:w5)(this,a)}}function x5(a,t){var e=b5(a+"");if(arguments.length<2){for(var r=v6(this.node()),c=-1,i=e.length;++c<i;)if(!r.contains(e[c]))return!1;return!0}return this.each((typeof t=="function"?co:t?ao:ro)(e,t))}function no(){this.textContent=""}function io(a){return function(){this.textContent=a}}function lo(a){return function(){var t=a.apply(this,arguments);this.textContent=t??""}}function N5(a){return arguments.length?this.each(a==null?no:(typeof a=="function"?lo:io)(a)):this.node().textContent}function oo(){this.innerHTML=""}function so(a){return function(){this.innerHTML=a}}function fo(a){return function(){var t=a.apply(this,arguments);this.innerHTML=t??""}}function D5(a){return arguments.length?this.each(a==null?oo:(typeof a=="function"?fo:so)(a)):this.node().innerHTML}function uo(){this.nextSibling&&this.parentNode.appendChild(this)}function k5(){return this.each(uo)}function po(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function E5(){return this.each(po)}function R5(a){var t=typeof a=="function"?a:Z3(a);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function mo(){return null}function A5(a,t){var e=typeof a=="function"?a:Z3(a),r=t==null?mo:typeof t=="function"?t:t4(t);return this.select(function(){return this.insertBefore(e.apply(this,arguments),r.apply(this,arguments)||null)})}function ho(){var a=this.parentNode;a&&a.removeChild(this)}function T5(){return this.each(ho)}function go(){var a=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(a,this.nextSibling):a}function vo(){var a=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(a,this.nextSibling):a}function I5(a){return this.select(a?vo:go)}function F5(a){return arguments.length?this.property("__data__",a):this.node().__data__}function zo(a){return function(t){a.call(this,t,this.__data__)}}function Mo(a){return a.trim().split(/^|\s+/).map(function(t){var e="",r=t.indexOf(".");return r>=0&&(e=t.slice(r+1),t=t.slice(0,r)),{type:t,name:e}})}function Lo(a){return function(){var t=this.__on;if(t){for(var e=0,r=-1,c=t.length,i;e<c;++e)i=t[e],(!a.type||i.type===a.type)&&i.name===a.name?this.removeEventListener(i.type,i.listener,i.options):t[++r]=i;++r?t.length=r:delete this.__on}}}function _o(a,t,e){return function(){var r=this.__on,c,i=zo(t);if(r){for(var o=0,l=r.length;o<l;++o)if((c=r[o]).type===a.type&&c.name===a.name){this.removeEventListener(c.type,c.listener,c.options),this.addEventListener(c.type,c.listener=i,c.options=e),c.value=t;return}}this.addEventListener(a.type,i,e),c={type:a.type,name:a.name,value:t,listener:i,options:e},r?r.push(c):this.__on=[c]}}function P5(a,t,e){var r=Mo(a+""),c,i=r.length,o;if(arguments.length<2){var l=this.node().__on;if(l){for(var d=0,m=l.length,v;d<m;++d)for(c=0,v=l[d];c<i;++c)if((o=r[c]).type===v.type&&o.name===v.name)return v.value}return}for(l=t?_o:Lo,c=0;c<i;++c)this.each(l(r[c],t,e));return this}function B5(a,t,e){var r=t0(a),c=r.CustomEvent;typeof c=="function"?c=new c(t,e):(c=r.document.createEvent("Event"),e?(c.initEvent(t,e.bubbles,e.cancelable),c.detail=e.detail):c.initEvent(t,!1,!1)),a.dispatchEvent(c)}function yo(a,t){return function(){return B5(this,a,t)}}function bo(a,t){return function(){return B5(this,a,t.apply(this,arguments))}}function O5(a,t){return this.each((typeof t=="function"?bo:yo)(a,t))}function*U5(){for(var a=this._groups,t=0,e=a.length;t<e;++t)for(var r=a[t],c=0,i=r.length,o;c<i;++c)(o=r[c])&&(yield o)}var Co=[null];function T2(a,t){this._groups=a,this._parents=t}function j5(){return new T2([[document.documentElement]],Co)}function So(){return this}T2.prototype=j5.prototype={constructor:T2,select:t5,selectAll:a5,selectChild:r5,selectChildren:c5,filter:n5,data:o5,enter:i5,exit:s5,join:f5,merge:u5,selection:So,order:d5,sort:p5,call:m5,nodes:h5,node:g5,size:v5,empty:z5,each:M5,attr:L5,style:_5,property:y5,classed:x5,text:N5,html:D5,raise:k5,lower:E5,append:R5,insert:A5,remove:T5,clone:I5,datum:F5,on:P5,dispatch:O5,[Symbol.iterator]:U5};var _1=j5;function a0(a,t,e){a.prototype=t.prototype=e,e.constructor=a}function z6(a,t){var e=Object.create(a.prototype);for(var r in t)e[r]=t[r];return e}function s3(){}var l3=.7,n0=1/l3,E4="\\s*([+-]?\\d+)\\s*",o3="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",d1="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",wo=/^#([0-9a-f]{3,8})$/,xo=new RegExp(`^rgb\\(${E4},${E4},${E4}\\)$`),No=new RegExp(`^rgb\\(${d1},${d1},${d1}\\)$`),Do=new RegExp(`^rgba\\(${E4},${E4},${E4},${o3}\\)$`),ko=new RegExp(`^rgba\\(${d1},${d1},${d1},${o3}\\)$`),Eo=new RegExp(`^hsl\\(${o3},${d1},${d1}\\)$`),Ro=new RegExp(`^hsla\\(${o3},${d1},${d1},${o3}\\)$`),H5={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};a0(s3,j1,{copy(a){return Object.assign(new this.constructor,this,a)},displayable(){return this.rgb().displayable()},hex:V5,formatHex:V5,formatHex8:Ao,formatHsl:To,formatRgb:q5,toString:q5});function V5(){return this.rgb().formatHex()}function Ao(){return this.rgb().formatHex8()}function To(){return J5(this).formatHsl()}function q5(){return this.rgb().formatRgb()}function j1(a){var t,e;return a=(a+"").trim().toLowerCase(),(t=wo.exec(a))?(e=t[1].length,t=parseInt(t[1],16),e===6?G5(t):e===3?new Q2(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):e===8?r0(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):e===4?r0(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=xo.exec(a))?new Q2(t[1],t[2],t[3],1):(t=No.exec(a))?new Q2(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Do.exec(a))?r0(t[1],t[2],t[3],t[4]):(t=ko.exec(a))?r0(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Eo.exec(a))?X5(t[1],t[2]/100,t[3]/100,1):(t=Ro.exec(a))?X5(t[1],t[2]/100,t[3]/100,t[4]):H5.hasOwnProperty(a)?G5(H5[a]):a==="transparent"?new Q2(NaN,NaN,NaN,0):null}function G5(a){return new Q2(a>>16&255,a>>8&255,a&255,1)}function r0(a,t,e,r){return r<=0&&(a=t=e=NaN),new Q2(a,t,e,r)}function Io(a){return a instanceof s3||(a=j1(a)),a?(a=a.rgb(),new Q2(a.r,a.g,a.b,a.opacity)):new Q2}function R4(a,t,e,r){return arguments.length===1?Io(a):new Q2(a,t,e,r??1)}function Q2(a,t,e,r){this.r=+a,this.g=+t,this.b=+e,this.opacity=+r}a0(Q2,R4,z6(s3,{brighter(a){return a=a==null?n0:Math.pow(n0,a),new Q2(this.r*a,this.g*a,this.b*a,this.opacity)},darker(a){return a=a==null?l3:Math.pow(l3,a),new Q2(this.r*a,this.g*a,this.b*a,this.opacity)},rgb(){return this},clamp(){return new Q2(r4(this.r),r4(this.g),r4(this.b),i0(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:W5,formatHex:W5,formatHex8:Fo,formatRgb:$5,toString:$5}));function W5(){return`#${a4(this.r)}${a4(this.g)}${a4(this.b)}`}function Fo(){return`#${a4(this.r)}${a4(this.g)}${a4(this.b)}${a4((isNaN(this.opacity)?1:this.opacity)*255)}`}function $5(){let a=i0(this.opacity);return`${a===1?"rgb(":"rgba("}${r4(this.r)}, ${r4(this.g)}, ${r4(this.b)}${a===1?")":`, ${a})`}`}function i0(a){return isNaN(a)?1:Math.max(0,Math.min(1,a))}function r4(a){return Math.max(0,Math.min(255,Math.round(a)||0))}function a4(a){return a=r4(a),(a<16?"0":"")+a.toString(16)}function X5(a,t,e,r){return r<=0?a=t=e=NaN:e<=0||e>=1?a=t=NaN:t<=0&&(a=NaN),new s1(a,t,e,r)}function J5(a){if(a instanceof s1)return new s1(a.h,a.s,a.l,a.opacity);if(a instanceof s3||(a=j1(a)),!a)return new s1;if(a instanceof s1)return a;a=a.rgb();var t=a.r/255,e=a.g/255,r=a.b/255,c=Math.min(t,e,r),i=Math.max(t,e,r),o=NaN,l=i-c,d=(i+c)/2;return l?(t===i?o=(e-r)/l+(e<r)*6:e===i?o=(r-t)/l+2:o=(t-e)/l+4,l/=d<.5?i+c:2-i-c,o*=60):l=d>0&&d<1?0:o,new s1(o,l,d,a.opacity)}function Y5(a,t,e,r){return arguments.length===1?J5(a):new s1(a,t,e,r??1)}function s1(a,t,e,r){this.h=+a,this.s=+t,this.l=+e,this.opacity=+r}a0(s1,Y5,z6(s3,{brighter(a){return a=a==null?n0:Math.pow(n0,a),new s1(this.h,this.s,this.l*a,this.opacity)},darker(a){return a=a==null?l3:Math.pow(l3,a),new s1(this.h,this.s,this.l*a,this.opacity)},rgb(){var a=this.h%360+(this.h<0)*360,t=isNaN(a)||isNaN(this.s)?0:this.s,e=this.l,r=e+(e<.5?e:1-e)*t,c=2*e-r;return new Q2(M6(a>=240?a-240:a+120,c,r),M6(a,c,r),M6(a<120?a+240:a-120,c,r),this.opacity)},clamp(){return new s1(K5(this.h),c0(this.s),c0(this.l),i0(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let a=i0(this.opacity);return`${a===1?"hsl(":"hsla("}${K5(this.h)}, ${c0(this.s)*100}%, ${c0(this.l)*100}%${a===1?")":`, ${a})`}`}}));function K5(a){return a=(a||0)%360,a<0?a+360:a}function c0(a){return Math.max(0,Math.min(1,a||0))}function M6(a,t,e){return(a<60?t+(e-t)*a/60:a<180?e:a<240?t+(e-t)*(240-a)/60:t)*255}function L6(a,t,e,r,c){var i=a*a,o=i*a;return((1-3*a+3*i-o)*t+(4-6*i+3*o)*e+(1+3*a+3*i-3*o)*r+o*c)/6}function Z5(a){var t=a.length-1;return function(e){var r=e<=0?e=0:e>=1?(e=1,t-1):Math.floor(e*t),c=a[r],i=a[r+1],o=r>0?a[r-1]:2*c-i,l=r<t-1?a[r+2]:2*i-c;return L6((e-r/t)*t,o,c,i,l)}}function Q5(a){var t=a.length;return function(e){var r=Math.floor(((e%=1)<0?++e:e)*t),c=a[(r+t-1)%t],i=a[r%t],o=a[(r+1)%t],l=a[(r+2)%t];return L6((e-r/t)*t,c,i,o,l)}}var _6=a=>()=>a;function Po(a,t){return function(e){return a+e*t}}function Bo(a,t,e){return a=Math.pow(a,e),t=Math.pow(t,e)-a,e=1/e,function(r){return Math.pow(a+r*t,e)}}function et(a){return(a=+a)==1?l0:function(t,e){return e-t?Bo(t,e,a):_6(isNaN(t)?e:t)}}function l0(a,t){var e=t-a;return e?Po(a,e):_6(isNaN(a)?t:a)}var o0=(function a(t){var e=et(t);function r(c,i){var o=e((c=R4(c)).r,(i=R4(i)).r),l=e(c.g,i.g),d=e(c.b,i.b),m=l0(c.opacity,i.opacity);return function(v){return c.r=o(v),c.g=l(v),c.b=d(v),c.opacity=m(v),c+""}}return r.gamma=a,r})(1);function tt(a){return function(t){var e=t.length,r=new Array(e),c=new Array(e),i=new Array(e),o,l;for(o=0;o<e;++o)l=R4(t[o]),r[o]=l.r||0,c[o]=l.g||0,i[o]=l.b||0;return r=a(r),c=a(c),i=a(i),l.opacity=1,function(d){return l.r=r(d),l.g=c(d),l.b=i(d),l+""}}}var Oo=tt(Z5),Uo=tt(Q5);function n1(a,t){return a=+a,t=+t,function(e){return a*(1-e)+t*e}}var b6=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,y6=new RegExp(b6.source,"g");function jo(a){return function(){return a}}function Ho(a){return function(t){return a(t)+""}}function C6(a,t){var e=b6.lastIndex=y6.lastIndex=0,r,c,i,o=-1,l=[],d=[];for(a=a+"",t=t+"";(r=b6.exec(a))&&(c=y6.exec(t));)(i=c.index)>e&&(i=t.slice(e,i),l[o]?l[o]+=i:l[++o]=i),(r=r[0])===(c=c[0])?l[o]?l[o]+=c:l[++o]=c:(l[++o]=null,d.push({i:o,x:n1(r,c)})),e=y6.lastIndex;return e<t.length&&(i=t.slice(e),l[o]?l[o]+=i:l[++o]=i),l.length<2?d[0]?Ho(d[0].x):jo(t):(t=d.length,function(m){for(var v=0,_;v<t;++v)l[(_=d[v]).i]=_.x(m);return l.join("")})}var at=180/Math.PI,s0={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function S6(a,t,e,r,c,i){var o,l,d;return(o=Math.sqrt(a*a+t*t))&&(a/=o,t/=o),(d=a*e+t*r)&&(e-=a*d,r-=t*d),(l=Math.sqrt(e*e+r*r))&&(e/=l,r/=l,d/=l),a*r<t*e&&(a=-a,t=-t,d=-d,o=-o),{translateX:c,translateY:i,rotate:Math.atan2(t,a)*at,skewX:Math.atan(d)*at,scaleX:o,scaleY:l}}var f0;function rt(a){let t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(a+"");return t.isIdentity?s0:S6(t.a,t.b,t.c,t.d,t.e,t.f)}function ct(a){return a==null?s0:(f0||(f0=document.createElementNS("http://www.w3.org/2000/svg","g")),f0.setAttribute("transform",a),(a=f0.transform.baseVal.consolidate())?(a=a.matrix,S6(a.a,a.b,a.c,a.d,a.e,a.f)):s0)}function nt(a,t,e,r){function c(m){return m.length?m.pop()+" ":""}function i(m,v,_,y,N,S){if(m!==_||v!==y){var V=N.push("translate(",null,t,null,e);S.push({i:V-4,x:n1(m,_)},{i:V-2,x:n1(v,y)})}else(_||y)&&N.push("translate("+_+t+y+e)}function o(m,v,_,y){m!==v?(m-v>180?v+=360:v-m>180&&(m+=360),y.push({i:_.push(c(_)+"rotate(",null,r)-2,x:n1(m,v)})):v&&_.push(c(_)+"rotate("+v+r)}function l(m,v,_,y){m!==v?y.push({i:_.push(c(_)+"skewX(",null,r)-2,x:n1(m,v)}):v&&_.push(c(_)+"skewX("+v+r)}function d(m,v,_,y,N,S){if(m!==_||v!==y){var V=N.push(c(N)+"scale(",null,",",null,")");S.push({i:V-4,x:n1(m,_)},{i:V-2,x:n1(v,y)})}else(_!==1||y!==1)&&N.push(c(N)+"scale("+_+","+y+")")}return function(m,v){var _=[],y=[];return m=a(m),v=a(v),i(m.translateX,m.translateY,v.translateX,v.translateY,_,y),o(m.rotate,v.rotate,_,y),l(m.skewX,v.skewX,_,y),d(m.scaleX,m.scaleY,v.scaleX,v.scaleY,_,y),m=v=null,function(N){for(var S=-1,V=y.length,W;++S<V;)_[(W=y[S]).i]=W.x(N);return _.join("")}}}var w6=nt(rt,"px, ","px)","deg)"),x6=nt(ct,", ",")",")");var A4=0,u3=0,f3=0,lt=1e3,u0,d3,d0=0,c4=0,p0=0,p3=typeof performance=="object"&&performance.now?performance:Date,ot=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(a){setTimeout(a,17)};function h3(){return c4||(ot(Vo),c4=p3.now()+p0)}function Vo(){c4=0}function m3(){this._call=this._time=this._next=null}m3.prototype=m0.prototype={constructor:m3,restart:function(a,t,e){if(typeof a!="function")throw new TypeError("callback is not a function");e=(e==null?h3():+e)+(t==null?0:+t),!this._next&&d3!==this&&(d3?d3._next=this:u0=this,d3=this),this._call=a,this._time=e,N6()},stop:function(){this._call&&(this._call=null,this._time=1/0,N6())}};function m0(a,t,e){var r=new m3;return r.restart(a,t,e),r}function st(){h3(),++A4;for(var a=u0,t;a;)(t=c4-a._time)>=0&&a._call.call(void 0,t),a=a._next;--A4}function it(){c4=(d0=p3.now())+p0,A4=u3=0;try{st()}finally{A4=0,Go(),c4=0}}function qo(){var a=p3.now(),t=a-d0;t>lt&&(p0-=t,d0=a)}function Go(){for(var a,t=u0,e,r=1/0;t;)t._call?(r>t._time&&(r=t._time),a=t,t=t._next):(e=t._next,t._next=null,t=a?a._next=e:u0=e);d3=a,N6(r)}function N6(a){if(!A4){u3&&(u3=clearTimeout(u3));var t=a-c4;t>24?(a<1/0&&(u3=setTimeout(it,a-p3.now()-p0)),f3&&(f3=clearInterval(f3))):(f3||(d0=p3.now(),f3=setInterval(qo,lt)),A4=1,ot(it))}}function h0(a,t,e){var r=new m3;return t=t==null?0:+t,r.restart(c=>{r.stop(),a(c+t)},t,e),r}var Wo=m6("start","end","cancel","interrupt"),$o=[],dt=0,ft=1,v0=2,g0=3,ut=4,z0=5,g3=6;function H1(a,t,e,r,c,i){var o=a.__transition;if(!o)a.__transition={};else if(e in o)return;Xo(a,e,{name:t,index:r,group:c,on:Wo,tween:$o,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:dt})}function v3(a,t){var e=I2(a,t);if(e.state>dt)throw new Error("too late; already scheduled");return e}function H2(a,t){var e=I2(a,t);if(e.state>g0)throw new Error("too late; already running");return e}function I2(a,t){var e=a.__transition;if(!e||!(e=e[t]))throw new Error("transition not found");return e}function Xo(a,t,e){var r=a.__transition,c;r[t]=e,e.timer=m0(i,0,e.time);function i(m){e.state=ft,e.timer.restart(o,e.delay,e.time),e.delay<=m&&o(m-e.delay)}function o(m){var v,_,y,N;if(e.state!==ft)return d();for(v in r)if(N=r[v],N.name===e.name){if(N.state===g0)return h0(o);N.state===ut?(N.state=g3,N.timer.stop(),N.on.call("interrupt",a,a.__data__,N.index,N.group),delete r[v]):+v<t&&(N.state=g3,N.timer.stop(),N.on.call("cancel",a,a.__data__,N.index,N.group),delete r[v])}if(h0(function(){e.state===g0&&(e.state=ut,e.timer.restart(l,e.delay,e.time),l(m))}),e.state=v0,e.on.call("start",a,a.__data__,e.index,e.group),e.state===v0){for(e.state=g0,c=new Array(y=e.tween.length),v=0,_=-1;v<y;++v)(N=e.tween[v].value.call(a,a.__data__,e.index,e.group))&&(c[++_]=N);c.length=_+1}}function l(m){for(var v=m<e.duration?e.ease.call(null,m/e.duration):(e.timer.restart(d),e.state=z0,1),_=-1,y=c.length;++_<y;)c[_].call(a,v);e.state===z0&&(e.on.call("end",a,a.__data__,e.index,e.group),d())}function d(){e.state=g3,e.timer.stop(),delete r[t];for(var m in r)return;delete a.__transition}}function M0(a,t){var e=a.__transition,r,c,i=!0,o;if(e){t=t==null?null:t+"";for(o in e){if((r=e[o]).name!==t){i=!1;continue}c=r.state>v0&&r.state<z0,r.state=g3,r.timer.stop(),r.on.call(c?"interrupt":"cancel",a,a.__data__,r.index,r.group),delete e[o]}i&&delete a.__transition}}function pt(a){return this.each(function(){M0(this,a)})}function Ko(a,t){var e,r;return function(){var c=H2(this,a),i=c.tween;if(i!==e){r=e=i;for(var o=0,l=r.length;o<l;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}c.tween=r}}function Jo(a,t,e){var r,c;if(typeof e!="function")throw new Error;return function(){var i=H2(this,a),o=i.tween;if(o!==r){c=(r=o).slice();for(var l={name:t,value:e},d=0,m=c.length;d<m;++d)if(c[d].name===t){c[d]=l;break}d===m&&c.push(l)}i.tween=c}}function mt(a,t){var e=this._id;if(a+="",arguments.length<2){for(var r=I2(this.node(),e).tween,c=0,i=r.length,o;c<i;++c)if((o=r[c]).name===a)return o.value;return null}return this.each((t==null?Ko:Jo)(e,a,t))}function T4(a,t,e){var r=a._id;return a.each(function(){var c=H2(this,r);(c.value||(c.value={}))[t]=e.apply(this,arguments)}),function(c){return I2(c,r).value[t]}}function L0(a,t){var e;return(typeof t=="number"?n1:t instanceof j1?o0:(e=j1(t))?(t=e,o0):C6)(a,t)}function Yo(a){return function(){this.removeAttribute(a)}}function Zo(a){return function(){this.removeAttributeNS(a.space,a.local)}}function Qo(a,t,e){var r,c=e+"",i;return function(){var o=this.getAttribute(a);return o===c?null:o===r?i:i=t(r=o,e)}}function es(a,t,e){var r,c=e+"",i;return function(){var o=this.getAttributeNS(a.space,a.local);return o===c?null:o===r?i:i=t(r=o,e)}}function ts(a,t,e){var r,c,i;return function(){var o,l=e(this),d;return l==null?void this.removeAttribute(a):(o=this.getAttribute(a),d=l+"",o===d?null:o===r&&d===c?i:(c=d,i=t(r=o,l)))}}function as(a,t,e){var r,c,i;return function(){var o,l=e(this),d;return l==null?void this.removeAttributeNS(a.space,a.local):(o=this.getAttributeNS(a.space,a.local),d=l+"",o===d?null:o===r&&d===c?i:(c=d,i=t(r=o,l)))}}function ht(a,t){var e=L1(a),r=e==="transform"?x6:L0;return this.attrTween(a,typeof t=="function"?(e.local?as:ts)(e,r,T4(this,"attr."+a,t)):t==null?(e.local?Zo:Yo)(e):(e.local?es:Qo)(e,r,t))}function rs(a,t){return function(e){this.setAttribute(a,t.call(this,e))}}function cs(a,t){return function(e){this.setAttributeNS(a.space,a.local,t.call(this,e))}}function ns(a,t){var e,r;function c(){var i=t.apply(this,arguments);return i!==r&&(e=(r=i)&&cs(a,i)),e}return c._value=t,c}function is(a,t){var e,r;function c(){var i=t.apply(this,arguments);return i!==r&&(e=(r=i)&&rs(a,i)),e}return c._value=t,c}function gt(a,t){var e="attr."+a;if(arguments.length<2)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;var r=L1(a);return this.tween(e,(r.local?ns:is)(r,t))}function ls(a,t){return function(){v3(this,a).delay=+t.apply(this,arguments)}}function os(a,t){return t=+t,function(){v3(this,a).delay=t}}function vt(a){var t=this._id;return arguments.length?this.each((typeof a=="function"?ls:os)(t,a)):I2(this.node(),t).delay}function ss(a,t){return function(){H2(this,a).duration=+t.apply(this,arguments)}}function fs(a,t){return t=+t,function(){H2(this,a).duration=t}}function zt(a){var t=this._id;return arguments.length?this.each((typeof a=="function"?ss:fs)(t,a)):I2(this.node(),t).duration}function us(a,t){if(typeof t!="function")throw new Error;return function(){H2(this,a).ease=t}}function Mt(a){var t=this._id;return arguments.length?this.each(us(t,a)):I2(this.node(),t).ease}function ds(a,t){return function(){var e=t.apply(this,arguments);if(typeof e!="function")throw new Error;H2(this,a).ease=e}}function Lt(a){if(typeof a!="function")throw new Error;return this.each(ds(this._id,a))}function _t(a){typeof a!="function"&&(a=n3(a));for(var t=this._groups,e=t.length,r=new Array(e),c=0;c<e;++c)for(var i=t[c],o=i.length,l=r[c]=[],d,m=0;m<o;++m)(d=i[m])&&a.call(d,d.__data__,m,i)&&l.push(d);return new Y2(r,this._parents,this._name,this._id)}function yt(a){if(a._id!==this._id)throw new Error;for(var t=this._groups,e=a._groups,r=t.length,c=e.length,i=Math.min(r,c),o=new Array(r),l=0;l<i;++l)for(var d=t[l],m=e[l],v=d.length,_=o[l]=new Array(v),y,N=0;N<v;++N)(y=d[N]||m[N])&&(_[N]=y);for(;l<r;++l)o[l]=t[l];return new Y2(o,this._parents,this._name,this._id)}function ps(a){return(a+"").trim().split(/^|\s+/).every(function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||t==="start"})}function ms(a,t,e){var r,c,i=ps(t)?v3:H2;return function(){var o=i(this,a),l=o.on;l!==r&&(c=(r=l).copy()).on(t,e),o.on=c}}function bt(a,t){var e=this._id;return arguments.length<2?I2(this.node(),e).on.on(a):this.each(ms(e,a,t))}function hs(a){return function(){var t=this.parentNode;for(var e in this.__transition)if(+e!==a)return;t&&t.removeChild(this)}}function Ct(){return this.on("end.remove",hs(this._id))}function St(a){var t=this._name,e=this._id;typeof a!="function"&&(a=t4(a));for(var r=this._groups,c=r.length,i=new Array(c),o=0;o<c;++o)for(var l=r[o],d=l.length,m=i[o]=new Array(d),v,_,y=0;y<d;++y)(v=l[y])&&(_=a.call(v,v.__data__,y,l))&&("__data__"in v&&(_.__data__=v.__data__),m[y]=_,H1(m[y],t,e,y,m,I2(v,e)));return new Y2(i,this._parents,t,e)}function wt(a){var t=this._name,e=this._id;typeof a!="function"&&(a=c3(a));for(var r=this._groups,c=r.length,i=[],o=[],l=0;l<c;++l)for(var d=r[l],m=d.length,v,_=0;_<m;++_)if(v=d[_]){for(var y=a.call(v,v.__data__,_,d),N,S=I2(v,e),V=0,W=y.length;V<W;++V)(N=y[V])&&H1(N,t,e,V,y,S);i.push(y),o.push(v)}return new Y2(i,o,t,e)}var gs=_1.prototype.constructor;function xt(){return new gs(this._groups,this._parents)}function vs(a,t){var e,r,c;return function(){var i=U1(this,a),o=(this.style.removeProperty(a),U1(this,a));return i===o?null:i===e&&o===r?c:c=t(e=i,r=o)}}function Nt(a){return function(){this.style.removeProperty(a)}}function zs(a,t,e){var r,c=e+"",i;return function(){var o=U1(this,a);return o===c?null:o===r?i:i=t(r=o,e)}}function Ms(a,t,e){var r,c,i;return function(){var o=U1(this,a),l=e(this),d=l+"";return l==null&&(d=l=(this.style.removeProperty(a),U1(this,a))),o===d?null:o===r&&d===c?i:(c=d,i=t(r=o,l))}}function Ls(a,t){var e,r,c,i="style."+t,o="end."+i,l;return function(){var d=H2(this,a),m=d.on,v=d.value[i]==null?l||(l=Nt(t)):void 0;(m!==e||c!==v)&&(r=(e=m).copy()).on(o,c=v),d.on=r}}function Dt(a,t,e){var r=(a+="")=="transform"?w6:L0;return t==null?this.styleTween(a,vs(a,r)).on("end.style."+a,Nt(a)):typeof t=="function"?this.styleTween(a,Ms(a,r,T4(this,"style."+a,t))).each(Ls(this._id,a)):this.styleTween(a,zs(a,r,t),e).on("end.style."+a,null)}function _s(a,t,e){return function(r){this.style.setProperty(a,t.call(this,r),e)}}function ys(a,t,e){var r,c;function i(){var o=t.apply(this,arguments);return o!==c&&(r=(c=o)&&_s(a,o,e)),r}return i._value=t,i}function kt(a,t,e){var r="style."+(a+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,ys(a,t,e??""))}function bs(a){return function(){this.textContent=a}}function Cs(a){return function(){var t=a(this);this.textContent=t??""}}function Et(a){return this.tween("text",typeof a=="function"?Cs(T4(this,"text",a)):bs(a==null?"":a+""))}function Ss(a){return function(t){this.textContent=a.call(this,t)}}function ws(a){var t,e;function r(){var c=a.apply(this,arguments);return c!==e&&(t=(e=c)&&Ss(c)),t}return r._value=a,r}function Rt(a){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(a==null)return this.tween(t,null);if(typeof a!="function")throw new Error;return this.tween(t,ws(a))}function At(){for(var a=this._name,t=this._id,e=_0(),r=this._groups,c=r.length,i=0;i<c;++i)for(var o=r[i],l=o.length,d,m=0;m<l;++m)if(d=o[m]){var v=I2(d,t);H1(d,a,e,m,o,{time:v.time+v.delay+v.duration,delay:0,duration:v.duration,ease:v.ease})}return new Y2(r,this._parents,a,e)}function Tt(){var a,t,e=this,r=e._id,c=e.size();return new Promise(function(i,o){var l={value:o},d={value:function(){--c===0&&i()}};e.each(function(){var m=H2(this,r),v=m.on;v!==a&&(t=(a=v).copy(),t._.cancel.push(l),t._.interrupt.push(l),t._.end.push(d)),m.on=t}),c===0&&i()})}var xs=0;function Y2(a,t,e,r){this._groups=a,this._parents=t,this._name=e,this._id=r}function It(a){return _1().transition(a)}function _0(){return++xs}var y1=_1.prototype;Y2.prototype=It.prototype={constructor:Y2,select:St,selectAll:wt,selectChild:y1.selectChild,selectChildren:y1.selectChildren,filter:_t,merge:yt,selection:xt,transition:At,call:y1.call,nodes:y1.nodes,node:y1.node,size:y1.size,empty:y1.empty,each:y1.each,on:bt,attr:ht,attrTween:gt,style:Dt,styleTween:kt,text:Et,textTween:Rt,remove:Ct,tween:mt,delay:vt,duration:zt,ease:Mt,easeVarying:Lt,end:Tt,[Symbol.iterator]:y1[Symbol.iterator]};function y0(a){return((a*=2)<=1?a*a*a:(a-=2)*a*a+2)/2}var Ns={time:null,delay:0,duration:250,ease:y0};function Ds(a,t){for(var e;!(e=a.__transition)||!(e=e[t]);)if(!(a=a.parentNode))throw new Error(`transition ${t} not found`);return e}function Ft(a){var t,e;a instanceof Y2?(t=a._id,a=a._name):(t=_0(),(e=Ns).time=h3(),a=a==null?null:a+"");for(var r=this._groups,c=r.length,i=0;i<c;++i)for(var o=r[i],l=o.length,d,m=0;m<l;++m)(d=o[m])&&H1(d,a,t,m,o,e||Ds(d,t));return new Y2(r,this._parents,a,t)}_1.prototype.interrupt=pt;_1.prototype.transition=Ft;var{abs:gb,max:vb,min:zb}=Math;function Pt(a){return[+a[0],+a[1]]}function ks(a){return[Pt(a[0]),Pt(a[1])]}var Mb={name:"x",handles:["w","e"].map(D6),input:function(a,t){return a==null?null:[[+a[0],t[0][1]],[+a[1],t[1][1]]]},output:function(a){return a&&[a[0][0],a[1][0]]}},Lb={name:"y",handles:["n","s"].map(D6),input:function(a,t){return a==null?null:[[t[0][0],+a[0]],[t[1][0],+a[1]]]},output:function(a){return a&&[a[0][1],a[1][1]]}},_b={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(D6),input:function(a){return a==null?null:ks(a)},output:function(a){return a}};function D6(a){return{type:a}}function V1(a,t,e){this.k=a,this.x=t,this.y=e}V1.prototype={constructor:V1,scale:function(a){return a===1?this:new V1(this.k*a,this.x,this.y)},translate:function(a,t){return a===0&t===0?this:new V1(this.k,this.x+this.k*a,this.y+this.k*t)},apply:function(a){return[a[0]*this.k+this.x,a[1]*this.k+this.y]},applyX:function(a){return a*this.k+this.x},applyY:function(a){return a*this.k+this.y},invert:function(a){return[(a[0]-this.x)/this.k,(a[1]-this.y)/this.k]},invertX:function(a){return(a-this.x)/this.k},invertY:function(a){return(a-this.y)/this.k},rescaleX:function(a){return a.copy().domain(a.range().map(this.invertX,this).map(a.invert,a))},rescaleY:function(a){return a.copy().domain(a.range().map(this.invertY,this).map(a.invert,a))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var k6=new V1(1,0,0);E6.prototype=V1.prototype;function E6(a){for(;!a.__zoom;)if(!(a=a.parentNode))return k6;return a.__zoom}function Bt(a,t){return a.sourceLinks?.length?R(a.depth,0):t-1}function R6(a){return()=>a}function Ot(a){let t=new Set,e=new Map,r=new Map;for(let m of a.nodes){t.add(m);let v=0,_=0;for(let y of R(m.targetLinks,[]))y.source!==m&&v++;for(let y of R(m.sourceLinks,[]))y.target!==m&&_++;e.set(m,v),r.set(m,_)}function c(m){t.delete(m);for(let v of R(m.targetLinks,[])){let _=v.source;if(t.has(_)){let y=R(r.get(_),0);r.set(_,y-1)}}for(let v of R(m.sourceLinks,[])){let _=v.target;if(t.has(_)){let y=R(e.get(_),0);e.set(_,y-1)}}}let i=[],o=[];for(;t.size>0;){for(;;){let _=!1;for(let y of t)r.get(y)===0&&(_=!0,o.push(y),c(y));if(!_)break}for(;;){let _=!1;for(let y of t)e.get(y)===0&&(_=!0,i.push(y),c(y));if(!_)break}if(t.size===0)break;let m=null,v=null;for(let _ of t){let y=R(r.get(_),0)-R(e.get(_),0);(m===null||y>m)&&(m=y,v=_)}v!=null&&(i.push(v),c(v))}o.reverse();let l=i.concat(o),d=new Map;for(let[m,v]of l.entries())d.set(v,m);for(let m of a.links){let v=R(d.get(m.source),0),_=R(d.get(m.target),0);v===_?m.direction="self":v<_?m.direction="forward":m.direction="backward"}}function Ut(a,t){return b0(a.source,t.source)||a.index-t.index}function jt(a,t){return b0(a.target,t.target)||a.index-t.index}function b0(a,t){return a.y0-t.y0}function A6(a){return a.value}function Es(a){return a.index}function Rs(a){return a.nodes}function As(a){return a.links}function Ht(a,t){let e=a.get(t);if(!e)throw new Error("missing: "+t.toString());return e}function Vt({nodes:a}){for(let t of a){let e=t.y0,r=e;for(let c of t.sourceLinks)c.y0=e+c.width/2,e+=c.width;for(let c of t.targetLinks)c.y1=r+c.width/2,r+=c.width}}function z3(a){return R(a,0)}function qt(){let a=0,t=0,e=1,r=1,c=24,i=8,o=Es,l=Bt,d,m,v=Rs,_=As,y=6;function N(x){let U={nodes:[...x.nodes],links:[...x.links]};return A2(U),D2(U),V2(U),E(U),e2(U),b2(U),Vt(U),U}let S=N;S.update=function(x){return Vt(x),x};function V(x){return x==null?o:(o=x,S)}S.nodeId=V;function W(x){return x==null?l:(l=x,S)}S.nodeAlign=W;function B(x){return x==null?d:(d=x,S)}S.nodeSort=B;function k(x){return x==null?c:(c=x,S)}S.nodeWidth=k;function F(x){return x==null?i:(i=x,S)}S.nodePadding=F;function P(x){return x==null?v:(v=typeof x=="function"?x:R6(x),S)}S.nodes=P;function J(x){return x==null?_:(_=typeof x=="function"?x:R6(x),S)}S.links=J;function Y(x){return x==null?m:(m=x,S)}S.linkSort=Y;function s2(x){return x==null?[e-a,r-t]:(a=t=0,[e,r]=x,S)}S.size=s2;function g2(x){return x==null?[[a,t],[e,r]]:([[a,t],[e,r]]=x,S)}S.extent=g2;function y2(x){return x==null?y:(y=x,S)}S.iterations=y2;function A2({nodes:x,links:U}){for(let[K,q]of x.entries())q.index=K,q.sourceLinks=[],q.targetLinks=[];let X=new Map(x.map(K=>[o(K),K]));for(let[K,q]of U.entries()){q.index=K;let{source:n2,target:x2}=q;typeof n2!="object"&&(n2=q.source=Ht(X,n2)),typeof x2!="object"&&(x2=q.target=Ht(X,x2)),n2.sourceLinks.push(q),x2.targetLinks.push(q)}}function D2({nodes:x}){for(let U of x)U.value=Math.max(k4(U.sourceLinks,A6),k4(U.targetLinks,A6))}function V2(x){Ot(x)}function E({nodes:x}){let U=x.length,X=new Set(x),K=new Set,q=0;for(;X.size;){for(let n2 of X){n2.depth=q;for(let{target:x2,direction:w2}of n2.sourceLinks)w2==="forward"&&K.add(x2)}if(++q>U)throw new Error("circular link");X=K,K=new Set}}function e2({nodes:x}){let U=x.length,X=new Set(x),K=new Set,q=0;for(;X.size;){for(let n2 of X){n2.height=q;for(let{source:x2,direction:w2}of n2.targetLinks)w2==="forward"&&K.add(x2)}if(++q>U)throw new Error("circular link");X=K,K=new Set}}function o2({nodes:x}){let U=z3(K3(x,q=>q.depth))+1,X=(e-a-c)/(U-1),K=new Array(U);for(let q of x){let n2=Math.max(0,Math.min(U-1,Math.floor(l.call(null,q,U))));q.layer=n2,q.x0=a+n2*X,q.x1=q.x0+c,K[n2]?K[n2].push(q):K[n2]=[q]}if(d)for(let q of K)q.sort(d);return K}function d2(x){let U=r3(x,X=>(r-t-(X.length-1)*i)/k4(X,A6));U=R(U,0);for(let X of x){let K=t;for(let q of X){q.y0=K,q.y1=K+q.value*U,K=q.y1+i;for(let n2 of q.sourceLinks)n2.width=n2.value*U}K=(r-K+i)/(X.length+1);for(let q=0;q<X.length;++q){let n2=X[q];n2.y0+=K*(q+1),n2.y1+=K*(q+1)}H(X)}return r}function b2(x){let U=o2(x),X=d2(U);for(let K=0;K<y;++K){let q=Math.pow(.99,K),n2=Math.max(1-q,(K+1)/y);f(U,q,n2,X),D(U,q,n2,X)}}function D(x,U,X,K){for(let q=1,n2=x.length;q<n2;++q){let x2=x[q];for(let w2 of x2){let p1=0,I=0;for(let{source:C2,value:i2}of w2.targetLinks){let m2=i2*(z3(w2.layer)-z3(C2.layer));p1+=A(C2,w2)*m2,I+=m2}if(!(I>0))continue;let O=(p1/I-w2.y0)*U;w2.y0+=O,w2.y1+=O,Z(w2)}d===void 0&&x2.sort(b0),z(x2,X,K)}}function f(x,U,X,K){for(let q=x.length,n2=q-2;n2>=0;--n2){let x2=x[n2];for(let w2 of x2){let p1=0,I=0;for(let{target:C2,value:i2}of w2.sourceLinks){let m2=i2*(z3(C2.layer)-z3(w2.layer));p1+=T(w2,C2)*m2,I+=m2}if(!(I>0))continue;let O=(p1/I-w2.y0)*U;w2.y0+=O,w2.y1+=O,Z(w2)}d===void 0&&x2.sort(b0),z(x2,X,K)}}function z(x,U,X){let K=x.length>>1,q=x[K];j(x,q.y0-i,K-1,U),C(x,q.y1+i,K+1,U),j(x,X,x.length-1,U),C(x,t,0,U)}function C(x,U,X,K){for(;X<x.length;++X){let q=x[X],n2=(U-q.y0)*K;n2>1e-6&&(q.y0+=n2,q.y1+=n2),U=q.y1+i}}function j(x,U,X,K){for(;X>=0;--X){let q=x[X],n2=(q.y1-U)*K;n2>1e-6&&(q.y0-=n2,q.y1-=n2),U=q.y0-i}}function Z({sourceLinks:x,targetLinks:U}){if(m===void 0){for(let X of U)X.source.sourceLinks.sort(jt);for(let X of x)X.target.targetLinks.sort(Ut)}}function H(x){if(m===void 0)for(let{sourceLinks:U,targetLinks:X}of x)U.sort(jt),X.sort(Ut)}function A(x,U){let X=x.y0-(x.sourceLinks.length-1)*i/2;for(let{target:K,width:q}of x.sourceLinks){if(K===U)break;X+=q+i}for(let{source:K,width:q}of U.targetLinks){if(K===x)break;X-=q}return X}function T(x,U){let X=U.y0-(U.targetLinks.length-1)*i/2;for(let{source:K,width:q}of U.targetLinks){if(K===x)break;X+=q+i}for(let{target:K,width:q}of x.sourceLinks){if(K===U)break;X-=q}return X}return S}var C0="",n4=class n4{constructor(){this.itemsStore=Q(P1);this.recipesStore=Q(D4);this.settingsStore=Q(c1)}normalizeRate(t){if(t.unit===3||t.type===2)return t.value;let e=this.settingsStore.displayRateInfo().value,r=this.recipesStore.adjustedDataset(),c=t.value,i=L.one;switch(t.unit){case 0:{i=e.reciprocal();break}case 1:{let l=this.itemsStore.settings()[t.targetId];l.beltId&&(i=this.settingsStore.beltSpeed()[l.beltId].mul(R(l.stack,L.one)));break}case 2:{let l=this.itemsStore.settings()[t.targetId].wagonId;if(l){let d=r.itemRecord[t.targetId],m=r.itemRecord[l];d.stack&&m.cargoWagon?i=d.stack.mul(m.cargoWagon.size).div(e):m.fluidWagon&&(i=m.fluidWagon.capacity.div(e))}break}}let o=r.adjustedRecipe[r.itemRecipeIds[t.targetId][0]];return o?.flags.has("technology")&&(i=i.mul(o.effects.productivity)),c.mul(i)}normalizeSteps(t,e){let r=this.copy(t);for(let i of r)this.calculateParentsOutputs(i,r);let c=r1(e);for(let i of r)this.calculateSettings(i,c),this.calculateBelts(i),this.calculateBeacons(i),this.calculateDisplayRate(i),this.calculateChecked(i);return this.sortBySankey(r),this.calculateHierarchy(r)}calculateParentsOutputs(t,e){if(t.recipe&&t.machines?.nonzero()){let r=t.recipe,c=t.machines.div(r.time);for(let i of Object.keys(r.in))if(r.in[i].nonzero()){let o=r.in[i].mul(c),l=e.find(d=>d.itemId===i);l!=null&&this.addEntityValue(l,"parents",t.id,o.simplify())}for(let i of Object.keys(r.out))if(r.out[i].nonzero()){let o=r.out[i].mul(c),l=e.find(d=>d.itemId===i);l?.items?.nonzero()&&this.addEntityValue(t,"outputs",i,o.div(l.items).simplify())}}}calculateSettings(t,e){t.recipeId&&(t.recipeObjectiveId?t.recipeSettings=e[t.recipeObjectiveId]:t.recipeSettings=this.recipesStore.settings()[t.recipeId])}calculateBelts(t){let e=this.settingsStore.dataset(),r=this.itemsStore.settings(),c=this.settingsStore.beltSpeed(),i=!1;if(t.recipeId!=null&&t.recipeSettings!=null){let o=t.recipeSettings.machineId;if(o!=null){let l=e.machineRecord[o],d=e.recipeRecord[t.recipeId];i=!!(d.flags.has("technology")||l.silo&&!d.part)}}if(i)delete t.belts,delete t.wagons,delete t.rockets;else if(t.itemId!=null){let o=r[t.itemId],l=o.beltId;t.items!=null&&l!=null&&(t.belts=t.items.div(c[l]),o.stack?.nonzero()&&(t.belts=t.belts.div(o.stack)));let d=o.wagonId;if(t.items!=null&&d!=null){let m=e.itemRecord[t.itemId];m.stack?t.wagons=t.items.div(e.cargoWagonRecord[d].size.mul(m.stack)):t.wagons=t.items.div(e.fluidWagonRecord[d].capacity)}if(t.items!=null){let m=e.itemRecord[t.itemId];m.rocketCapacity&&(t.rockets=t.items.div(m.rocketCapacity))}}}calculateBeacons(t){let e=this.settingsStore.settings().beaconReceivers,r=this.settingsStore.dataset();if(!e?.nonzero()||t.recipeId==null||!t.machines?.nonzero()||r.recipeRecord[t.recipeId].part||t.recipeSettings==null)return;let c=t.machines,i=t.recipeSettings;i.beacons!=null&&(t.recipeSettings=$(t.recipeSettings,{beacons:i.beacons.map(o=>{let l=o.total;if(o.id!=null){o.count!=null&&l==null&&(l=c.ceil().mul(o.count).div(e),l.lt(o.count)&&(l=o.count));let d=r.beaconRecord[o.id];d.type==="electric"&&d.usage!=null&&l!=null&&(t.power=(t.power??L.zero).add(l.mul(d.usage)))}return g1(U2({},o),{total:l})})}))}calculateDisplayRate(t){let e=this.settingsStore.displayRateInfo().value;if(t.items){if(t.parents&&t.items.nonzero())for(let r of Object.keys(t.parents))t.parents[r]=t.parents[r].div(t.items);t.items=t.items.mul(e)}t.surplus&&(t.surplus=t.surplus.mul(e)),t.wagons&&(t.wagons=t.wagons.mul(e)),t.rockets&&(t.rockets=t.rockets.mul(e)),t.pollution&&(t.pollution=t.pollution.mul(e)),t.output&&(t.output=t.output.mul(e))}calculateChecked(t){let e=this.settingsStore.settings();t.itemId!=null?t.checked=e.checkedItemIds.has(t.itemId):t.recipeObjectiveId!=null?t.checked=e.checkedObjectiveIds.has(t.recipeObjectiveId):t.recipeId!=null&&(t.checked=e.checkedRecipeIds.has(t.recipeId))}sortBySankey(t){let e=t.reduce((l,d)=>(l[d.id]=d,l),{}),r=[],c=[];for(let l of t){if(l.itemId){let d=`i|${l.itemId}`;if(r.push({id:d,stepId:l.id}),l.parents)for(let m of Object.keys(l.parents)){if(m==="")continue;let v=e[m].recipeId;v!=null&&c.push({source:d,target:`r|${v}`,value:1})}}if(l.recipeId){let d=`r|${l.recipeId}`;if(r.push({id:d,stepId:l.id}),l.outputs)for(let m of Object.keys(l.outputs))c.push({source:d,target:`i|${m}`,value:1})}}if(!r.length||!c.length)return;let i=qt().nodeId(l=>l.id)({nodes:r,links:c});for(let l of t)l.depth=i.nodes.find(d=>d.stepId===l.id)?.depth;function o(l){return l.output?1e5:R(l.depth,0)}t.sort((l,d)=>o(d)-o(l))}calculateHierarchy(t){let e={};for(let i of t)if(i.parents==null||i.parents[C0]||Object.keys(i.parents).length>1)e[i.id]=C0;else{let o=Object.keys(i.parents)[0],l=t.find(d=>d.id===o);l&&(i.id===l.id?e[i.id]=C0:e[i.id]=l.id)}let r={};for(let i of t){let o=e[i.id];r[o]||(r[o]=[]),r[o].push(i)}let c=new Set;for(this.sortRecursive(r,C0,c);c.size<t.length;){let i=t.find(o=>!c.has(o));if(i==null)break;c.add(i),this.sortRecursive(r,i.id,c)}return Array.from(c)}sortRecursive(t,e,r){if(!t[e])return;let c=t[e];delete t[e];for(let i of c)r.add(i),this.sortRecursive(t,i.id,r)}addEntityValue(t,e,r,c){let i=t[e];i?i[r]?i[r]=i[r].add(c):i[r]=c:t[e]={[r]:c}}copy(t){return t.map(e=>e.parents?$(e,{parents:$(e.parents)}):$(e))}};n4.\u0275fac=function(e){return new(e||n4)},n4.\u0275prov=a2({token:n4,factory:n4.\u0275fac,providedIn:"root"});var S0=n4;var i4=class i4 extends a1{constructor(){super();this.title=Q(Qe);this.adjustment=Q(x4);this.itemsStore=Q(P1);this.machinesStore=Q(N4);this.normalization=Q(S0);this.preferencesStore=Q(k1);this.recipesStore=Q(D4);this.settingsStore=Q(c1);this.solver=Q(X3);this.baseObjectives=r2(()=>{let e=this.state(),r=this.settingsStore.dataset();return Object.keys(e).map(c=>e[c]).filter(c=>I1(c)?r.recipeRecord[c.targetId]!=null:r.itemRecord[c.targetId]!=null)});this.objectives=r2(()=>{let e=this.baseObjectives(),r=this.itemsStore.settings(),c=this.recipesStore.settings(),i=this.machinesStore.settings(),o=this.settingsStore.settings(),l=this.recipesStore.adjustedDataset();return e.map(d=>this.adjustment.adjustObjective(d,r,c,i,o,l))});this.normalizedObjectives=r2(()=>this.objectives().map(e=>$(e,{value:this.normalization.normalizeRate(e)})));this.matrixResult=r2(()=>{let e=this.normalizedObjectives(),r=this.settingsStore.settings(),c=this.recipesStore.adjustedDataset(),i=this.preferencesStore.paused();return this.solver.solve(e,r,c,i)});this.steps=r2(()=>{let e=this.matrixResult(),r=this.objectives();return this.normalization.normalizeSteps(e.steps,r)});this.stepsModified=r2(()=>{let e=this.steps(),r=this.baseObjectives(),c=this.itemsStore.state(),i=this.recipesStore.state();return{objectives:r.reduce((o,l)=>(o[l.id]=l.machineId!=null||l.modules!=null||l.beacons!=null||l.overclock!=null,o),{}),items:e.reduce((o,l)=>(l.itemId&&(o[l.itemId]=c[l.itemId]!=null),o),{}),recipes:e.reduce((o,l)=>(l.recipeId&&(o[l.recipeId]=i[l.recipeId]!=null),o),{})}});this.totals=r2(()=>{let e=this.steps(),r=this.itemsStore.settings(),c=this.recipesStore.adjustedDataset(),i={},o={},l={},d={},m={},v={},_=L.zero,y=L.zero;for(let N of e){if(N.itemId!=null){if(N.belts?.nonzero()){let S=r[N.itemId].beltId;S!=null&&(i[S]||(i[S]=L.zero),i[S]=i[S].add(N.belts.ceil()))}if(N.wagons?.nonzero()){let S=r[N.itemId].wagonId;S!=null&&(o[S]||(o[S]=L.zero),o[S]=o[S].add(N.wagons.ceil()))}}if(N.recipeId!=null&&N.recipe!=null&&N.recipeSettings!=null){if(N.machines?.nonzero()){let V=N.recipe;if(!V.part&&!V.flags.has("hideProducer")){let W=N.recipeSettings,B=W.machineId;if(B&&c.machineRecord[B].totalRecipe&&(B=N.recipeId),B!=null){l[B]||(l[B]=L.zero);let k=N.machines.ceil();l[B]=l[B].add(k),W.modules!=null&&W.modules.forEach(F=>{!F.id||F.count==null||f6(d,[F.id],k.mul(F.count))})}}}let S=N.recipeSettings?.beacons;if(S!=null)for(let V of S){let W=V.id,B=V.total;if(W==null||!B?.nonzero())continue;m[W]||(m[W]=L.zero);let k=B.ceil();m[W]=m[W].add(k),V.modules!=null&&V.modules.forEach(F=>{!F.id||F.count==null||f6(v,[F.id],k.mul(F.count))})}}N.power!=null&&(_=_.add(N.power)),N.pollution!=null&&(y=y.add(N.pollution))}return{belts:i,wagons:o,machines:l,modules:d,beacons:m,beaconModules:v,power:_,pollution:y}});this.stepDetails=r2(()=>{let e=this.steps(),r=this.settingsStore.settings(),c=this.recipesStore.adjustedDataset();return e.reduce((i,o)=>{let l=[],d=[],m=[],v=[],_=[];if(o.itemId!=null&&o.items!=null){let y=o.itemId;l.push("item"),d.push(...e.filter(j2("outputs","recipeId","machines")).filter(S=>S.outputs[y]!=null).map(S=>({step:S,value:S.outputs[y]})));let N=d.reduce((S,V)=>S.sub(V.value),L.one);N.nonzero()&&d.push({inputs:!0,value:N}),d.sort((S,V)=>V.value.sub(S.value).toNumber())}return o.recipeId!=null&&l.push("recipe"),o.machines?.nonzero()&&l.push("machine"),o.itemId!=null?(m=c.itemRecipeIds[o.itemId],m.length&&l.push("recipes"),v=m.filter(y=>!r.excludedRecipeIds.has(y)),_=m.map(y=>({value:y,label:c.recipeRecord[y].name}))):o.recipeId!=null&&(m=[o.recipeId],v=[o.recipeId],_=[{label:c.recipeRecord[o.recipeId].name,value:o.recipeId}]),i[o.id]={tabs:l.map(y=>{let N=`step_${o.id}_${y}_tab`;return{id:N,label:y,command:()=>{history.replaceState({},"",`${window.location.href.replace(/#(.*)$/,"")}#${N}`)}}}),outputs:d,recipeIds:m,recipesEnabled:v,recipeOptions:_},i},{})});this.stepById=r2(()=>{let e=this.steps();return r1(e)});this.stepByItemRecord=r2(()=>this.steps().reduce((r,c)=>(c.itemId!=null&&(r[c.itemId]=c),r),{}));this.stepTree=r2(()=>{let e=this.steps(),r={},c={};for(let i of e){let o=[];if(i.parents){let l=Object.keys(i.parents);l.length===1&&c[l[0]]!=null&&(o=new Array(c[l[0]]+1).fill(!1))}c[i.id]=o.length,r[i.id]=o}for(let i=0;i<e.length;i++){let o=e[i];if(r[o.id].length)for(let l=i+1;l<e.length;l++){let d=e[l];if(r[d.id]){if(r[d.id].length===r[o.id].length){for(let m=i;m<l;m++){let v=e[m];r[v.id]&&(r[v.id][r[o.id].length-1]=!0)}break}else if(r[d.id].length<r[o.id].length)break}}}return r});this.effectivePowerUnit=r2(()=>{let e=this.preferencesStore.powerUnit();if(e!==0)return e;let r=this.steps(),c;for(let i of r)i.power!=null&&(c==null||i.power.lt(c))&&(c=i.power);return c=c??L.zero,c.lt(L(1000n))?1:c.lt(L(1000000n))?2:3});this.recipesModified=r2(()=>{let e=this.recipesStore.state(),r=this.baseObjectives();return{machines:Object.keys(e).some(c=>e[c].fuelId!=null||e[c].machineId!=null||e[c].modules!=null||e[c].overclock!=null)||r.some(c=>c.fuelId!=null||c.machineId!=null||c.modules!=null||c.overclock!=null),beacons:Object.keys(e).some(c=>e[c].beacons!=null)||r.some(c=>c.beacons!=null),cost:Object.keys(e).some(c=>e[c].cost)}});this.message=r2(()=>{let e=this.objectives(),r=this.matrixResult(),c=this.settingsStore.settings();if(r.resultType==="paused")return{icon:e8,detail:"objectives.pausedMessage"};if(r.resultType!=="failed")return;let i=t8,o="objectives.error",l="objectives.errorDetail",d,m="objectives.errorSimplexInfo",v={returnCode:R(r.returnCode,"unknown"),simplexStatus:R(r.simplexStatus,"unknown")};if(r.simplexStatus==="unbounded"){let _=e.filter(y=>y.type===2);o="objectives.errorUnbounded",l="objectives.errorUnboundedDetail",r.unboundedRecipeId?(l="objectives.errorSimplexUnboundedRecipe",d=r.unboundedRecipeId):_.length&&e.every(y=>y.type!==3)?l="objectives.errorNoLimits":_.some(y=>y.unit===3?c.excludedRecipeIds.has(y.targetId):c.excludedItemIds.has(y.targetId))&&(l="objectives.errorMaximizeExcluded")}else r.simplexStatus==="no_feasible"&&(o="objectives.errorInfeasible",l="objectives.errorInfeasibleDetail");return{icon:i,summary:o,detail:l,info:m,params:v,recipeId:d}});let e=Q(f4);this.settingsStore.load$.pipe(w1(()=>q8(this.settingsStore.displayRate,{injector:e}).pipe(J6(),s4(([r,c])=>r!==c))),V8()).subscribe(([r,c])=>{let i=a3[c].value.div(a3[r].value);this.adjustDisplayRate(i)}),J2(()=>{let r=this.baseObjectives(),c=this.settingsStore.dataset(),i=r.map(o=>I1(o)?c.recipeRecord[o.targetId]?.name:c.itemRecord[o.targetId]?.name).find(o=>o!=null);i==null?this.title.setTitle("FactorioLab"):this.title.setTitle(`${i} | FactorioLab`)})}add(e){this.reduce(r=>{let c=1;for(;r[c.toString()]!=null;)c++;let i=c.toString(),o={id:i,type:0};return $(r,{[i]:$(o,e)})})}create(e){this.set({1:$(e,{id:"1"})})}remove(e){this.reduce(r=>{r=this._removeEntry(r,e);let c=Object.keys(r).map(i=>r[i]);return this.reduceObjectives(c)})}setOrder(e){this.set(this.reduceObjectives(e))}adjustDisplayRate(e){this.reduce(r=>{let c=$(r),i=Object.keys(c);for(let o of i.map(l=>r[l]).filter(l=>l.type!==2&&(l.unit===0||l.unit===2))){let l=o.value.mul(e);c[o.id]=$(o,{value:l})}return c})}reduceObjectives(e){return e.reduce((r,c,i)=>{let o=(i+1).toString();return r[o]=$(c,{id:o}),r},{})}};i4.\u0275fac=function(r){return new(r||i4)},i4.\u0275prov=a2({token:i4,factory:i4.\u0275fac,providedIn:"root"});var Gt=i4;var l4=class l4{constructor(){this.http=Q(F3);this.preferences=Q(k1);this.templateMatcher=/{{\s?([^{}\s]*)\s?}}/g;this.langDataCache={};this.defaultLang$=new D0("en");this.currentLang$=new D0(this.preferences.language());this.defaultLangData$=this.defaultLang$.pipe(E0(),w1(t=>this.getLangData(t)));this.currentLangData$=this.currentLang$.pipe(E0(),w1(t=>this.getLangData(t)));this.lang$=this.currentLang$.asObservable();J2(()=>{let t=this.preferences.language();this.currentLang$.value!==t&&(this.currentLang$.next(t),e3("set_lang",t))})}getLangData(t){return this.langDataCache[t]??=this.http.get(`i18n/${t}.json`).pipe(Y6(1)),this.langDataCache[t]}get currentLang(){return this.currentLang$.value}load(){k0([this.defaultLangData$,this.currentLangData$]).pipe(K6()).subscribe()}getValue(t,e){let r=t,c=e.split(".");e="";do e+=R(c.shift(),""),typeof r=="object"&&r[e]!=null&&(typeof r[e]=="object"||!c.length)?(r=r[e],e=""):c.length?e+=".":r=void 0;while(c.length);return r}interpolate(t,e){return e==null?t:t.replace(this.templateMatcher,(r,c)=>e[c]?.toString()??r)}get(t,e){return this.currentLangData$.pipe(w1(r=>{let c=this.getValue(r,t);return typeof c=="string"?B4(c):this.defaultLangData$.pipe(S1(i=>{let o=this.getValue(i,t);return typeof o=="string"?o:t}))}),S1(r=>this.interpolate(r,e)))}multi(t){return k0([...t].map(e=>this.get(e)))}};l4.\u0275fac=function(e){return new(e||l4)},l4.\u0275prov=a2({token:l4,factory:l4.\u0275fac,providedIn:"root"});var Wt=l4;export{v1 as a,x3 as b,De as c,si as d,ui as e,Sf as f,xi as g,F3 as h,el as i,Qe as j,tl as k,V8 as l,id as m,ld as n,od as o,sd as p,fd as q,ud as r,dd as s,pd as t,md as u,hd as v,gd as w,vd as x,zd as y,Md as z,Ld as A,_d as B,yd as C,bd as D,Cd as E,Sd as F,wd as G,xd as H,Nd as I,Dd as J,kd as K,Ed as L,Rd as M,Ad as N,Td as O,Id as P,Fd as Q,t1 as R,L as S,$ as T,o8 as U,f8 as V,O3 as W,B3 as X,ep as Y,k1 as Z,e3 as _,R as $,xp as aa,j2 as ba,i6 as ca,Wt as da,Y4 as ea,o6 as fa,l6 as ga,r1 as ha,Tm as ia,V3 as ja,q3 as ka,bh as la,U8 as ma,c1 as na,K8 as oa,$3 as pa,$v as qa,P1 as ra,N4 as sa,I1 as ta,x4 as ua,D4 as va,S0 as wa,Gt as xa};
