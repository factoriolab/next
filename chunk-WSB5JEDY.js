import{A as mt,B as gt,C as yt,Ca as ri,D as Te,E as _t,F as vt,H as Kt,I as Qt,K as Zt,N as $e,O as Jt,P as ei,T as ti,U as ii,V as ni,a as ht,aa as ze,ba as ue,c as Xt,ia as Oe,ka as N,la as pe,m as Yt,ma as Ne,ra as oi,ua as fe,va as he,wa as Xe}from"./chunk-KFAZB2GZ.js";import{$a as ut,$b as R,Ab as jt,Bb as Bt,Cb as I,Db as Lt,Eb as y,F as Ot,Fb as l,Gb as Gt,Hb as Ht,Lb as Ut,Mb as Se,Nb as de,Ob as z,Qa as s,Qb as X,Rb as Wt,Sb as Y,Tb as w,Ua as ct,Ub as A,Va as S,Vb as Fe,Wb as K,Xb as Q,Y as Ee,Yb as Z,Z as st,Zb as Ie,_ as lt,_a as x,_b as ce,aa as j,ab as L,ac as H,ca as f,cb as F,cc as _,db as kt,dc as v,eb as Rt,f as Ge,gb as He,ha as D,hc as oe,ia as V,ib as ne,ic as b,ja as $,k as St,kb as Pt,kc as Ue,l as Ft,la as dt,mc as p,nc as qt,oc as We,pa as C,pb as k,pc as $t,q as Ae,qb as h,qc as U,rb as m,sa as Nt,sb as pt,sc as qe,ta as B,tb as ft,ub as T,v as It,va as ie,vb as O,vc as zt,w as Tt,wb as u,xb as d,yb as c,zb as g}from"./chunk-B3EHFQVT.js";import{a as M,b as P}from"./chunk-HZ6M6AS2.js";var fi=(()=>{class i{_renderer;_elementRef;onChange=e=>{};onTouched=()=>{};constructor(e,n){this._renderer=e,this._elementRef=n}setProperty(e,n){this._renderer.setProperty(this._elementRef.nativeElement,e,n)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static \u0275fac=function(n){return new(n||i)(S(ct),S(ie))};static \u0275dir=L({type:i})}return i})(),wt=(()=>{class i extends fi{static \u0275fac=(()=>{let e;return function(o){return(e||(e=B(i)))(o||i)}})();static \u0275dir=L({type:i,features:[F]})}return i})(),J=new j(""),Si={provide:J,useExisting:Ee(()=>Fi),multi:!0},Fi=(()=>{class i extends wt{writeValue(e){this.setProperty("checked",e)}static \u0275fac=(()=>{let e;return function(o){return(e||(e=B(i)))(o||i)}})();static \u0275dir=L({type:i,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(n,o){n&1&&y("change",function(a){return o.onChange(a.target.checked)})("blur",function(){return o.onTouched()})},standalone:!1,features:[H([Si]),F]})}return i})(),Ii={provide:J,useExisting:Ee(()=>ee),multi:!0};function Ti(){let i=ht()?ht().getUserAgent():"";return/android (\d+)/.test(i.toLowerCase())}var Oi=new j(""),ee=(()=>{class i extends fi{_compositionMode;_composing=!1;constructor(e,n,o){super(e,n),this._compositionMode=o,this._compositionMode==null&&(this._compositionMode=!Ti())}writeValue(e){let n=e??"";this.setProperty("value",n)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static \u0275fac=function(n){return new(n||i)(S(ct),S(ie),S(Oi,8))};static \u0275dir=L({type:i,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(n,o){n&1&&y("input",function(a){return o._handleInput(a.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(a){return o._compositionEnd(a.target.value)})},standalone:!1,features:[H([Ii]),F]})}return i})();var Mt=new j(""),Ni=new j("");function hi(i){return i!=null}function mi(i){return Pt(i)?St(i):i}function gi(i){let t={};return i.forEach(e=>{t=e!=null?M(M({},t),e):t}),Object.keys(t).length===0?null:t}function yi(i,t){return t.map(e=>e(i))}function ki(i){return!i.validate}function _i(i){return i.map(t=>ki(t)?t:e=>t.validate(e))}function Ri(i){if(!i)return null;let t=i.filter(hi);return t.length==0?null:function(e){return gi(yi(e,t))}}function vi(i){return i!=null?Ri(_i(i)):null}function Pi(i){if(!i)return null;let t=i.filter(hi);return t.length==0?null:function(e){let n=yi(e,t).map(mi);return It(n).pipe(Ae(gi))}}function bi(i){return i!=null?Pi(_i(i)):null}function ai(i,t){return i===null?[t]:Array.isArray(i)?[...i,t]:[i,t]}function ji(i){return i._rawValidators}function Bi(i){return i._rawAsyncValidators}function bt(i){return i?Array.isArray(i)?i:[i]:[]}function Ke(i,t){return Array.isArray(i)?i.includes(t):i===t}function si(i,t){let e=bt(t);return bt(i).forEach(o=>{Ke(e,o)||e.push(o)}),e}function li(i,t){return bt(t).filter(e=>!Ke(i,e))}var Qe=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=vi(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=bi(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,e){return this.control?this.control.hasError(t,e):!1}getError(t,e){return this.control?this.control.getError(t,e):null}},Ct=class extends Qe{name;get formDirective(){return null}get path(){return null}},Be=class extends Qe{_parent=null;name=null;valueAccessor=null},Dt=class{_cd;constructor(t){this._cd=t}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},Li={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Co=P(M({},Li),{"[class.ng-submitted]":"isSubmitted"}),_e=(()=>{class i extends Dt{constructor(e){super(e)}static \u0275fac=function(n){return new(n||i)(S(Be,2))};static \u0275dir=L({type:i,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(n,o){n&2&&X("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},standalone:!1,features:[F]})}return i})();var ke="VALID",Ye="INVALID",me="PENDING",Re="DISABLED",ye=class{},Ze=class extends ye{value;source;constructor(t,e){super(),this.value=t,this.source=e}},Pe=class extends ye{pristine;source;constructor(t,e){super(),this.pristine=t,this.source=e}},je=class extends ye{touched;source;constructor(t,e){super(),this.touched=t,this.source=e}},ge=class extends ye{status;source;constructor(t,e){super(),this.status=t,this.source=e}};function Gi(i){return(Je(i)?i.validators:i)||null}function Hi(i){return Array.isArray(i)?vi(i):i||null}function Ui(i,t){return(Je(t)?t.asyncValidators:i)||null}function Wi(i){return Array.isArray(i)?bi(i):i||null}function Je(i){return i!=null&&!Array.isArray(i)&&typeof i=="object"}var Vt=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(t,e){this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get status(){return oe(this.statusReactive)}set status(t){oe(()=>this.statusReactive.set(t))}_status=b(()=>this.statusReactive());statusReactive=C(void 0);get valid(){return this.status===ke}get invalid(){return this.status===Ye}get pending(){return this.status==me}get disabled(){return this.status===Re}get enabled(){return this.status!==Re}errors;get pristine(){return oe(this.pristineReactive)}set pristine(t){oe(()=>this.pristineReactive.set(t))}_pristine=b(()=>this.pristineReactive());pristineReactive=C(!0);get dirty(){return!this.pristine}get touched(){return oe(this.touchedReactive)}set touched(t){oe(()=>this.touchedReactive.set(t))}_touched=b(()=>this.touchedReactive());touchedReactive=C(!1);get untouched(){return!this.touched}_events=new Ge;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(si(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(si(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(li(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(li(t,this._rawAsyncValidators))}hasValidator(t){return Ke(this._rawValidators,t)}hasAsyncValidator(t){return Ke(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){let e=this.touched===!1;this.touched=!0;let n=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsTouched(P(M({},t),{sourceControl:n})),e&&t.emitEvent!==!1&&this._events.next(new je(!0,n))}markAllAsDirty(t={}){this.markAsDirty({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsDirty(t))}markAllAsTouched(t={}){this.markAsTouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsTouched(t))}markAsUntouched(t={}){let e=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let n=t.sourceControl??this;this._forEachChild(o=>{o.markAsUntouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:n})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,n),e&&t.emitEvent!==!1&&this._events.next(new je(!1,n))}markAsDirty(t={}){let e=this.pristine===!0;this.pristine=!1;let n=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsDirty(P(M({},t),{sourceControl:n})),e&&t.emitEvent!==!1&&this._events.next(new Pe(!1,n))}markAsPristine(t={}){let e=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let n=t.sourceControl??this;this._forEachChild(o=>{o.markAsPristine({onlySelf:!0,emitEvent:t.emitEvent})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t,n),e&&t.emitEvent!==!1&&this._events.next(new Pe(!0,n))}markAsPending(t={}){this.status=me;let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new ge(this.status,e)),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.markAsPending(P(M({},t),{sourceControl:e}))}disable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=Re,this.errors=null,this._forEachChild(o=>{o.disable(P(M({},t),{onlySelf:!0}))}),this._updateValue();let n=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Ze(this.value,n)),this._events.next(new ge(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(P(M({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(o=>o(!0))}enable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=ke,this._forEachChild(n=>{n.enable(P(M({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(P(M({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(n=>n(!1))}_updateAncestors(t,e){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine({},e),this._parent._updateTouched({},e))}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let n=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ke||this.status===me)&&this._runAsyncValidator(n,t.emitEvent)}let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Ze(this.value,e)),this._events.next(new ge(this.status,e)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(P(M({},t),{sourceControl:e}))}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Re:ke}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t,e){if(this.asyncValidator){this.status=me,this._hasOwnPendingAsyncValidator={emitEvent:e!==!1,shouldHaveEmitted:t!==!1};let n=mi(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(o=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(o,{emitEvent:e,shouldHaveEmitted:t})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let t=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,t}return!1}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(e.emitEvent!==!1,this,e.shouldHaveEmitted)}get(t){let e=t;return e==null||(Array.isArray(e)||(e=e.split(".")),e.length===0)?null:e.reduce((n,o)=>n&&n._find(o),this)}getError(t,e){let n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t,e,n){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),(t||n)&&this._events.next(new ge(this.status,e)),this._parent&&this._parent._updateControlsErrors(t,e,n)}_initObservables(){this.valueChanges=new He,this.statusChanges=new He}_calculateStatus(){return this._allControlsDisabled()?Re:this.errors?Ye:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(me)?me:this._anyControlsHaveStatus(Ye)?Ye:ke}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t,e){let n=!this._anyControlsDirty(),o=this.pristine!==n;this.pristine=n,this._parent&&!t.onlySelf&&this._parent._updatePristine(t,e),o&&this._events.next(new Pe(this.pristine,e))}_updateTouched(t={},e){this.touched=this._anyControlsTouched(),this._events.next(new je(this.touched,e)),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,e)}_onDisabledChange=[];_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Je(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let e=this._parent&&this._parent.dirty;return!t&&!!e&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=Hi(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=Wi(this._rawAsyncValidators)}};var Ci=new j("",{providedIn:"root",factory:()=>xt}),xt="always";function qi(i,t){return[...t.path,i]}function $i(i,t,e=xt){Xi(i,t),t.valueAccessor.writeValue(i.value),(i.disabled||e==="always")&&t.valueAccessor.setDisabledState?.(i.disabled),Yi(i,t),Qi(i,t),Ki(i,t),zi(i,t)}function di(i,t){i.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function zi(i,t){if(t.valueAccessor.setDisabledState){let e=n=>{t.valueAccessor.setDisabledState(n)};i.registerOnDisabledChange(e),t._registerOnDestroy(()=>{i._unregisterOnDisabledChange(e)})}}function Xi(i,t){let e=ji(i);t.validator!==null?i.setValidators(ai(e,t.validator)):typeof e=="function"&&i.setValidators([e]);let n=Bi(i);t.asyncValidator!==null?i.setAsyncValidators(ai(n,t.asyncValidator)):typeof n=="function"&&i.setAsyncValidators([n]);let o=()=>i.updateValueAndValidity();di(t._rawValidators,o),di(t._rawAsyncValidators,o)}function Yi(i,t){t.valueAccessor.registerOnChange(e=>{i._pendingValue=e,i._pendingChange=!0,i._pendingDirty=!0,i.updateOn==="change"&&Di(i,t)})}function Ki(i,t){t.valueAccessor.registerOnTouched(()=>{i._pendingTouched=!0,i.updateOn==="blur"&&i._pendingChange&&Di(i,t),i.updateOn!=="submit"&&i.markAsTouched()})}function Di(i,t){i._pendingDirty&&i.markAsDirty(),i.setValue(i._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1}function Qi(i,t){let e=(n,o)=>{t.valueAccessor.writeValue(n),o&&t.viewToModelUpdate(n)};i.registerOnChange(e),t._registerOnDestroy(()=>{i._unregisterOnChange(e)})}function Zi(i,t){if(!i.hasOwnProperty("model"))return!1;let e=i.model;return e.isFirstChange()?!0:!Object.is(t,e.currentValue)}function Ji(i){return Object.getPrototypeOf(i.constructor)===wt}function en(i,t){if(!t)return null;Array.isArray(t);let e,n,o;return t.forEach(r=>{r.constructor===ee?e=r:Ji(r)?n=r:o=r}),o||n||e||null}function ci(i,t){let e=i.indexOf(t);e>-1&&i.splice(e,1)}function ui(i){return typeof i=="object"&&i!==null&&Object.keys(i).length===2&&"value"in i&&"disabled"in i}var tn=class extends Vt{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(t=null,e,n){super(Gi(e),Ui(n,e)),this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Je(e)&&(e.nonNullable||e.initialValueIsDefault)&&(ui(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&e.emitModelToViewChange!==!1&&this._onChange.forEach(n=>n(this.value,e.emitViewToModelChange!==!1)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){ci(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){ci(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){ui(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var nn={provide:Be,useExisting:Ee(()=>re)},pi=Promise.resolve(),re=(()=>{class i extends Be{_changeDetectorRef;callSetDisabledState;control=new tn;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new He;constructor(e,n,o,r,a,E){super(),this._changeDetectorRef=a,this.callSetDisabledState=E,this._parent=e,this._setValidators(n),this._setAsyncValidators(o),this.valueAccessor=en(this,r)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){let n=e.name.previousValue;this.formDirective.removeControl({name:n,path:this._getPath(n)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),Zi(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){$i(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(e){pi.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){let n=e.isDisabled.currentValue,o=n!==0&&zt(n);pi.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?qi(e,this._parent):[e]}static \u0275fac=function(n){return new(n||i)(S(Ct,9),S(Mt,10),S(Ni,10),S(J,10),S(qe,8),S(Ci,8))};static \u0275dir=L({type:i,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[H([nn]),F,Nt]})}return i})();var on={provide:J,useExisting:Ee(()=>rn),multi:!0},rn=(()=>{class i extends wt{writeValue(e){this.setProperty("value",parseFloat(e))}registerOnChange(e){this.onChange=n=>{e(n==""?null:parseFloat(n))}}static \u0275fac=(()=>{let e;return function(o){return(e||(e=B(i)))(o||i)}})();static \u0275dir=L({type:i,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(n,o){n&1&&y("change",function(a){return o.onChange(a.target.value)})("input",function(a){return o.onChange(a.target.value)})("blur",function(){return o.onTouched()})},standalone:!1,features:[H([on]),F]})}return i})();var an=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275mod=ut({type:i});static \u0275inj=lt({})}return i})();var ve=(()=>{class i{static withConfig(e){return{ngModule:i,providers:[{provide:Ci,useValue:e.callSetDisabledState??xt}]}}static \u0275fac=function(n){return new(n||i)};static \u0275mod=ut({type:i});static \u0275inj=lt({imports:[an]})}return i})();var ae=new j("LAB_CONTROL"),te=class{constructor(){this.touched=C(!1)}setValue(t){this.markAsTouched(),t!==this.value()&&(this.writeValue(t),this.onFormChange?.(t))}markAsTouched(){this.touched()||(this.touched.set(!0),this.onFormTouched?.())}writeValue(t){this.value.set(t)}registerOnChange(t){this.onFormChange=t}registerOnTouched(t){this.onFormTouched=t}setDisabledState(t){this.disabled.set(t)}};var sn=["*"],ln=0,be=class be{constructor(){this.control=$t.required(ae);this.uniqueId=(ln++).toString();this.labelId=`lab-form-field-label-${this.uniqueId}`;this.id=p(`lab-form-field-${this.uniqueId}`);this.label=p.required()}};be.\u0275fac=function(e){return new(e||be)},be.\u0275cmp=x({type:be,selectors:[["lab-form-field"]],contentQueries:function(e,n,o){e&1&&Ut(o,n.control,ae,5),e&2&&de()},hostAttrs:[1,"inline-flex","flex-col"],hostVars:1,hostBindings:function(e,n){e&2&&k("id",n.id())},inputs:{id:[1,"id"],label:[1,"label"]},ngContentSelectors:sn,decls:4,vars:5,consts:[[1,"mx-1","text-sm","text-gray-300",3,"id","for"]],template:function(e,n){e&1&&(Gt(),jt(0,"label",0),w(1),_(2,"translate"),Bt(),Ht(3)),e&2&&(Lt("id",n.labelId)("htmlFor",n.control().id()),s(),A(v(2,3,n.label())))},dependencies:[N],encapsulation:2,changeDetection:0});var et=be;var dn=0,G=class G extends te{constructor(){super(...arguments);this.uniqueId=(dn++).toString();this.id=p(`lab-input-number-${this.uniqueId}`);this.value=U();this.disabled=U(!1);this.minimum=p(ue.zero);this.maximum=p(void 0);this.integer=p(!1);this.value$=new Ge;this.emit$=this.value$.pipe(ze(),Ot(e=>e.type==="input"?Tt(300):Ft({})),Ae(e=>e.value),Oe(),Ae(e=>this.integer()?e.round():e));this.text=Ue({source:this.value,computation:(e,n)=>e==null?"0":n!=null&&ue(n.value).eq(e)?n.value:e.toString()})}ngOnInit(){this.emit$.subscribe(e=>{this.setValue(e)})}validate(e){let n=e.value;if(n==null)return null;try{let o=this.minimum(),r=this.maximum();if((o==null||n.gte(o))&&(r==null||n.lte(r)))return null}catch{}return{rational:{valid:!1}}}onChange(e){try{let n=this.text(),o=ue(n);this.value$.next({type:e.type,value:o}),o&&e.type==="keydown"&&this.text.set(o.toString())}catch{}}};G.\u0275fac=(()=>{let e;return function(o){return(e||(e=B(G)))(o||G)}})(),G.\u0275cmp=x({type:G,selectors:[["lab-input-number"]],hostAttrs:[1,"inline-flex","group"],inputs:{id:[1,"id"],value:[1,"value"],disabled:[1,"disabled"],minimum:[1,"minimum"],maximum:[1,"maximum"],integer:[1,"integer"]},outputs:{value:"valueChange",disabled:"disabledChange"},features:[H([{provide:J,useExisting:G,multi:!0},{provide:Mt,useExisting:G,multi:!0},{provide:ae,useExisting:G}]),F],decls:1,vars:2,consts:[["type","text",1,"input","text-right","group-[.ng-invalid]:border-red-500","group-[.ng-invalid]:outline-red-500",3,"ngModelChange","input","blur","keydown.enter","ngModel","disabled"]],template:function(n,o){n&1&&(d(0,"input",0),Z("ngModelChange",function(a){return Q(o.text,a)||(o.text=a),a}),y("input",function(a){return o.onChange(a)})("blur",function(a){return o.onChange(a)})("keydown.enter",function(a){return o.onChange(a)}),c()),n&2&&(K("ngModel",o.text),u("disabled",o.disabled()))},dependencies:[ve,ee,_e,re],encapsulation:2,changeDetection:0});var Vi=G;var tt=new j("TOOLTIP_DATA");var wi=(i,t)=>t.key;function un(i,t){if(i&1&&g(0,"lab-icon",2),i&2){let e=t.$implicit;u("value",e.key)("quantity",e.value)}}function pn(i,t){if(i&1&&g(0,"lab-icon",2),i&2){let e=t.$implicit;u("value",e.key)("quantity",e.value)}}function fn(i,t){if(i&1&&g(0,"lab-icon",7),i&2){let e=l().$implicit;u("value",e)}}function hn(i,t){if(i&1&&h(0,fn,1,1,"lab-icon",7),i&2){let e=t.$implicit,n=l(2);m(n.data().itemRecord[e].quality==null?0:-1)}}function mn(i,t){if(i&1&&(d(0,"div")(1,"div",6),w(2),_(3,"translate"),c(),d(4,"div"),T(5,hn,1,1,null,null,ft),c()()),i&2){l();let e=R(0);s(2),A(v(3,1,"data.producers")),s(3),O(e.producers)}}function gn(i,t){if(i&1&&g(0,"lab-icon",8),i&2){let e=t.$implicit;u("value",e)}}function yn(i,t){if(i&1&&(d(0,"div")(1,"div",6),w(2),_(3,"translate"),c(),d(4,"div"),T(5,gn,1,1,"lab-icon",8,ft),c()()),i&2){l();let e=R(0);X("text-end",!e.flags.has("hideProducer")),s(2),A(v(3,3,"data.locations")),s(3),O(t)}}var De=class De{constructor(){this.settingsStore=f(fe);this.value=p.required();this.data=this.settingsStore.dataset;this.recipe=b(()=>this.data().recipeRecord[this.value()]);this.faArrowRightLong=Jt}};De.\u0275fac=function(e){return new(e||De)},De.\u0275cmp=x({type:De,selectors:[["lab-recipe"]],hostAttrs:[1,"inline-flex","flex-col"],inputs:{value:[1,"value"]},decls:13,vars:9,consts:[[1,"flex","flex-wrap","items-center","justify-center"],["value","time","type","system",3,"quantity"],["type","item",3,"value","quantity"],[3,"icon"],[1,"flex","flex-wrap","justify-between","gap-2"],[3,"text-end"],[1,"mt-1","text-sm"],["type","item",3,"value"],["type","location",3,"value"]],template:function(e,n){if(e&1&&(Ie(0),d(1,"div",0),g(2,"lab-icon",1),T(3,un,1,2,"lab-icon",2,wi),_(5,"keyvalue"),g(6,"fa-icon",3),T(7,pn,1,2,"lab-icon",2,wi),_(9,"keyvalue"),c(),d(10,"div",4),h(11,mn,7,3,"div"),h(12,yn,7,5,"div",5),c()),e&2){let o,r=ce(n.recipe());s(2),u("quantity",r.time),s(),O(v(5,5,r.in)),s(3),u("icon",n.faArrowRightLong),s(),O(v(9,7,r.out)),s(4),m(r.flags.has("hideProducer")?-1:11),s(),m((o=r.locations)?12:-1,o)}},dependencies:[pe,he,Xt,N],encapsulation:2,changeDetection:0});var it=De;function _n(i,t){if(i&1&&(d(0,"div"),w(1),c(),g(2,"lab-recipe",1)),i&2){let e=t;s(),A(e.name),s(),u("value",e.id)}}function vn(i,t){if(i&1&&h(0,_n,3,2),i&2){let e,n=l();m((e=n.data().recipeRecord[n.tooltipData.value])?0:-1,e)}}function bn(i,t){i&1&&g(0,"lab-recipe",1),i&2&&u("value",t)}function Cn(i,t){if(i&1&&(d(0,"div"),w(1),c(),h(2,bn,1,1,"lab-recipe",1)),i&2){let e,n=l(2);s(),A(t.name),s(),m((e=n.recipeId())?2:-1,e)}}function Dn(i,t){if(i&1&&h(0,Cn,3,2),i&2){let e,n=l();m((e=n.data().itemRecord[n.tooltipData.value])?0:-1,e)}}function Vn(i,t){if(i&1&&(w(0),_(1,"translate")),i&2){let e=l();Fe(" ",v(1,1,e.tooltipData.value),`
`)}}function wn(i,t){if(i&1&&(d(0,"div",0),w(1),_(2,"translate"),c()),i&2){let e=l();s(),A(v(2,1,e.tooltipData.action))}}var Mi={originX:{start:null,center:null,end:null},originY:{top:null,center:null,bottom:null},overlayX:{start:null,center:null,end:null},overlayY:{top:null,center:null,bottom:null}},Mn=Ne("bg-gray-950 border rounded-xs border-gray-700 p-2 animate-fade-in relative max-w-53",{variants:Mi,compoundVariants:[{originY:"bottom",overlayY:"top",class:"mt-1.5"},{originX:"end",overlayX:"start",class:"ml-1.5"},{originY:"top",overlayY:"bottom",class:"mb-1.5"},{originX:"start",overlayX:"end",class:"mr-1.5"}]}),xn=Ne("absolute size-1.75 border-gray-700 bg-gray-950 m-auto border-t border-l",{variants:Mi,compoundVariants:[{originY:"bottom",overlayY:"top",class:"-top-1 rotate-45"},{originX:"end",overlayX:"start",class:"-left-1 rotate-315"},{originY:"top",overlayY:"bottom",class:"-bottom-1 rotate-225"},{originX:"start",overlayX:"end",class:"-right-1 rotate-135"},{originX:"start",originY:["top","bottom"],overlayX:"start",overlayY:["top","bottom"],class:"left-3"},{originX:"end",originY:["top","bottom"],overlayX:"end",overlayY:["top","bottom"],class:"right-3"},{originX:["start","end"],originY:"top",overlayX:["start","end"],overlayY:"top",class:"top-3"},{originX:["start","end"],originY:"bottom",overlayX:["start","end"],overlayY:"bottom",class:"bottom-3"}]}),Ve=class Ve{constructor(){this.destroyRef=f(dt);this.recipesStore=f(ri);this.tooltipData=f(tt);this.data=this.recipesStore.adjustedDataset;this.position=C(this.tooltipData.defaultPosition);this.hostClass=b(()=>Mn(this.position()));this.nubClass=b(()=>xn(this.position()));this.recipeId=b(()=>{let t=this.tooltipData.type;if(t!=="item"&&t!=="technology")return;let e=this.tooltipData.value,n=this.data(),r=n.itemRecipeIds[e].map(a=>n.adjustedRecipe[a]).filter(a=>!a.flags.has("recycling")&&a.quality==null&&a.produces.has(e));if(r.length===1)return r[0].id})}ngOnInit(){this.tooltipData.positionChanges.pipe(ze(this.destroyRef)).subscribe(t=>{this.position.set(t.connectionPair)})}};Ve.\u0275fac=function(e){return new(e||Ve)},Ve.\u0275cmp=x({type:Ve,selectors:[["lab-tooltip-overlay"]],hostVars:2,hostBindings:function(e,n){e&2&&Y(n.hostClass())},decls:5,vars:4,consts:[[1,"text-sm","italic"],[3,"value"]],template:function(e,n){e&1&&(h(0,vn,1,1)(1,Dn,1,1)(2,Vn,2,3),h(3,wn,3,3,"div",0),g(4,"span")),e&2&&(m(n.tooltipData.type==="recipe"?0:n.tooltipData.type?1:2),s(3),m(n.tooltipData.action?3:-1),s(),Y(n.nubClass()))},dependencies:[it,N],encapsulation:2,changeDetection:0});var nt=Ve;var we=class we{constructor(){this.elementRef=f(ie);this.overlay=f(yt);this.injector=f($);this.labTooltip=p();this.labTooltipType=p();this.labTooltipPosition=p("below");this.labTooltipAction=p();this.labTooltipAdjustedRecipe=p()}show(){let t=this.labTooltip();if(this.overlayRef||!t)return;let e=this.labTooltipPosition()==="adjacent"?gt:mt,n=this.overlay.position().flexibleConnectedTo(this.elementRef).withFlexibleDimensions(!1).withPositions(e),o={value:t,type:this.labTooltipType(),action:this.labTooltipAction(),adjustedRecipe:this.labTooltipAdjustedRecipe(),defaultPosition:e[0],positionChanges:n.positionChanges},r=$.create({parent:this.injector,providers:[{provide:tt,useValue:o}]}),a=this.overlay.create({positionStrategy:n});a.attach(new Yt(nt,void 0,r)),this.overlayRef=a,ne(()=>{a.updatePosition()},{injector:this.injector})}hide(){this.overlayRef&&(this.overlayRef.dispose(),delete this.overlayRef)}ngOnDestroy(){this.hide()}};we.\u0275fac=function(e){return new(e||we)},we.\u0275dir=L({type:we,selectors:[["","labTooltip",""]],hostBindings:function(e,n){e&1&&y("mouseenter",function(){return n.show()})("touchstart",function(){return n.show()})("mouseleave",function(){return n.hide()})("touchend",function(){return n.hide()})},inputs:{labTooltip:[1,"labTooltip"],labTooltipType:[1,"labTooltipType"],labTooltipPosition:[1,"labTooltipPosition"],labTooltipAction:[1,"labTooltipAction"],labTooltipAdjustedRecipe:[1,"labTooltipAdjustedRecipe"]}});var Me=we;var An=["overlay"],En=["option"],Sn=(i,t)=>t.value;function Fn(i,t){if(i&1&&g(0,"lab-icon",2),i&2){let e=l(),n=R(0),o=R(1);u("value",e.iconLocator()(o.value))("type",n)}}function In(i,t){if(i&1&&g(0,"fa-icon",5),i&2){let e=l();X("-scale-y-100",e.opened()&&!e.hiding()),u("icon",e.faChevronDown)}}function Tn(i,t){if(i&1&&(w(0),_(1,"translate")),i&2){l(2);let e=R(1);Fe(" ",v(1,1,e.label)," ")}}function On(i,t){if(i&1&&(d(0,"span",7),w(1),_(2,"translate"),c()),i&2){let e=l(2);s(),A(v(2,1,e.placeholder()))}}function Nn(i,t){if(i&1&&(d(0,"div",6),h(1,Tn,2,3)(2,On,3,3,"span",7),c(),g(3,"fa-icon",8)),i&2){let e=l(),n=R(1);s(),m(n?1:e.placeholder()?2:-1),s(2),X("-scale-y-100",e.opened()&&!e.hiding()),u("icon",e.faChevronDown)}}function kn(i,t){if(i&1){let e=I();d(0,"div",10)(1,"input",13),_(2,"translate"),Z("ngModelChange",function(o){D(e);let r=l(2);return Q(r.filterText,o)||(r.filterText=o),V(o)}),c(),g(3,"fa-icon",14),c()}if(i&2){let e=l(2);s(),u("placeholder",v(2,3,"filter")),K("ngModel",e.filterText),s(2),u("icon",e.faMagnifyingGlass)}}function Rn(i,t){if(i&1&&g(0,"lab-icon",2),i&2){let e=l(2).$implicit,n=l(2),o=R(0);u("value",n.iconLocator()(e.value))("type",o)}}function Pn(i,t){if(i&1){let e=I();d(0,"li",16,1),y("click",function(){D(e);let o=l().$implicit,r=l(2);return V(r.select(o.value))})("keydown.enter",function(){D(e);let o=l().$implicit,r=l(2);return V(r.select(o.value))})("keydown.arrowup",function(o){D(e);let r=z(1),a=l(3);return V(a.focusMove(r,-1,o))})("keydown.arrowdown",function(o){D(e);let r=z(1),a=l(3);return V(a.focusMove(r,1,o))})("keydown.home",function(o){D(e);let r=l(3);return V(r.focusFirst(o))})("keydown.end",function(o){D(e);let r=l(3);return V(r.focusLast(o))}),h(2,Rn,1,2,"lab-icon",2),d(3,"span",17),w(4),c()()}if(i&2){let e=l().$implicit,n=R(0),o=l(2),r=R(0);Y(e.value===o.value()?"bg-brand-950 hover:bg-brand-800 focus-visible:bg-brand-800":"hover:bg-gray-800 focus-visible:bg-gray-800"),u("labTooltip",e.tooltip),k("tabindex",e.disabled?-1:0)("aria-disabled",e.disabled?"true":"false")("aria-selected",e.value===o.value()),s(2),m(r?2:-1),s(2),A(n)}}function jn(i,t){if(i&1&&(Ie(0),_(1,"translate"),h(2,Pn,5,8,"li",15)),i&2){let e=t.$implicit,n=l(2),o=ce(v(1,1,e.label));s(2),m(o.toLowerCase().includes(n.filterLower())?2:-1)}}function Bn(i,t){i&1&&(d(0,"li",12),w(1),_(2,"translate"),c()),i&2&&(s(),Fe(" ",v(2,1,"select.noMatches")," "))}function Ln(i,t){if(i&1&&(d(0,"div",9,0),h(2,kn,4,5,"div",10),d(3,"ul",11),T(4,jn,3,4,null,null,Sn),h(6,Bn,3,3,"li",12),c()()),i&2){let e=l();X("opacity-0",e.hiding()),s(2),m(e.filter()?2:-1),s(),u("id",e.id()+"-listbox"),s(),O(e.options()),s(2),m(e.filterText()&&!e.listItems().length?6:-1)}}var Gn=0,Hn=new Set(["Enter","ArrowDown","ArrowUp","Home","End"]),Un=Ne("inline-flex overflow-hidden grow cursor-pointer min-h-9 items-center select-none px-1 focus-visible:border-brand-700 focus-visible:outline rounded-xs",{variants:{opened:{true:"border-brand-700 outline",false:"border-gray-700"},iconOnly:{true:"min-w-9 justify-center hover:bg-brand-950 outline-gray-300",false:"border outline-brand-700"}}}),q=class q extends te{constructor(){super(...arguments);this.elementRef=f(ie);this.overlayOrigin=f(Te);this.formField=f(et,{optional:!0});this.injector=f($);this.overlay=qt.required("overlay");this.listItems=We("option");this.uniqueId=(Gn++).toString();this.id=p(`lab-select-${this.uniqueId}`);this.value=U();this.options=p.required();this.disabled=U(!1);this.placeholder=p();this.type=p();this.filter=p(!1);this.iconOnly=p(!1);this.iconLocator=p(e=>e);this.hostClass=b(()=>Un({opened:this.opened()&&!this.hiding(),iconOnly:this.iconOnly()}));this.opened=C(!1);this.selectedOption=b(()=>this.options()?.find(e=>e.value===this.value()));this.faChevronDown=ni;this.faMagnifyingGlass=$e;this.hiding=C(!1);this.filterText=C("");this.filterLower=b(()=>this.filterText().toLowerCase())}toggle(e){this.disabled()||e instanceof KeyboardEvent&&!Hn.has(e.key)||(this.opened()?(this.hiding.set(!0),this.overlay().nativeElement.addEventListener("transitionend",()=>{this.opened.set(!1),this.hiding.set(!1)})):(this.opened.set(!0),this.filterText.set(""),this.focusAfterOpen(e)),e?.preventDefault())}select(e){this.toggle(),this.setValue(e)}focusFirst(e){let n=this.listItems()[0]?.nativeElement;n!=null&&(n.focus(),e.preventDefault())}focusLast(e){let n=this.listItems(),o=n[n.length-1]?.nativeElement;o!=null&&(o.focus(),e.preventDefault())}focusMove(e,n,o){let r=this.listItems().findIndex(E=>E.nativeElement===e),a=this.listItems()[r+n]?.nativeElement;a!=null&&(a.focus(),o.preventDefault())}focusAfterOpen(e){let n=this.options(),o=n.findIndex(r=>r.value===this.value());if(e instanceof KeyboardEvent)switch(e.key){case"ArrowUp":o>0&&o--;break;case"ArrowDown":o!==-1&&o<n.length-1&&o++;break;case"Home":o=0;break;case"End":o=n.length-1;break}o!==-1&&ne(()=>{let r=this.listItems().at(o)?.nativeElement;r!=null&&(r.scrollIntoView(),r.focus())},{injector:this.injector})}};q.\u0275fac=(()=>{let e;return function(o){return(e||(e=B(q)))(o||q)}})(),q.\u0275cmp=x({type:q,selectors:[["lab-select"]],viewQuery:function(n,o){n&1&&(Se(o.overlay,An,5),Se(o.listItems,En,5)),n&2&&de(2)},hostAttrs:["role","combobox"],hostVars:8,hostBindings:function(n,o){n&1&&y("keydown",function(a){return o.toggle(a)})("click",function(){return o.toggle()}),n&2&&(k("id",o.id())("tabindex",o.disabled()?-1:0)("aria-disabled",o.disabled()?"true":null)("aria-controls",o.opened()?o.id()+"-listbox":null)("aria-expanded",o.opened())("aria-labelledby",(o.formField==null?null:o.formField.labelId)??null),Y(o.hostClass()))},inputs:{id:[1,"id"],value:[1,"value"],options:[1,"options"],disabled:[1,"disabled"],placeholder:[1,"placeholder"],type:[1,"type"],filter:[1,"filter"],iconOnly:[1,"iconOnly"],iconLocator:[1,"iconLocator"]},outputs:{value:"valueChange",disabled:"disabledChange"},features:[H([{provide:J,multi:!0,useExisting:q},{provide:ae,useExisting:q}]),kt([Te]),F],decls:6,vars:7,consts:[["overlay",""],["option",""],[3,"value","type"],[1,"absolute","text-gray-500","transition-transform",3,"-scale-y-100","icon"],["cdkConnectedOverlay","",3,"overlayOutsideClick","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayMinWidth"],[1,"absolute","text-gray-500","transition-transform",3,"icon"],[1,"ms-1","me-2","line-clamp-1","grow"],[1,"text-gray-500"],[1,"text-gray-500","transition-transform",3,"icon"],[1,"mt-1","flex","max-h-96","min-w-full","origin-top","flex-col","overflow-hidden","rounded-xs","border","border-gray-700","bg-gray-950","transition-all","starting:scale-y-75","starting:opacity-0"],[1,"relative","m-2","flex"],["role","listbox","tabindex","-1",1,"overflow-y-scroll",3,"id"],[1,"flex","min-h-9","items-center","px-2"],[1,"input",3,"ngModelChange","placeholder","ngModel"],[1,"pointer-events-none","absolute","top-1.5","right-1.5","text-gray-500",3,"icon"],["role","option","labTooltipPosition","adjacent",1,"flex","min-h-9","cursor-pointer","items-center","px-1","outline-none","select-none",3,"class","labTooltip"],["role","option","labTooltipPosition","adjacent",1,"flex","min-h-9","cursor-pointer","items-center","px-1","outline-none","select-none",3,"click","keydown.enter","keydown.arrowup","keydown.arrowdown","keydown.home","keydown.end","labTooltip"],[1,"ms-1"]],template:function(n,o){if(n&1){let r=I();Ie(0)(1),h(2,Fn,1,2,"lab-icon",2)(3,In,1,3,"fa-icon",3),h(4,Nn,4,4),Rt(5,Ln,7,5,"ng-template",4),y("overlayOutsideClick",function(){return D(r),V(o.toggle())})}if(n&2){let r=ce(o.type());s();let a=ce(o.selectedOption());s(),m(r&&a?2:o.iconOnly()?3:-1),s(2),m(o.iconOnly()?-1:4),s(),u("cdkConnectedOverlayOrigin",o.overlayOrigin)("cdkConnectedOverlayOpen",o.opened())("cdkConnectedOverlayMinWidth",o.elementRef.nativeElement.offsetWidth)}},dependencies:[ve,ee,_e,re,vt,_t,pe,he,Me,N],encapsulation:2,changeDetection:0});var ot=q;var Wn=["tab"],qn=(i,t)=>t.value;function $n(i,t){if(i&1){let e=I();d(0,"button",8),y("click",function(){D(e);let o=l(),r=z(2);return V(o.scrollNext(r,-1))}),c()}if(i&2){let e=l();u("faIcon",e.faAngleLeft)("border",!1)}}function zn(i,t){if(i&1&&g(0,"lab-icon",10),i&2){let e=l().$implicit,n=l();u("type",t)("value",n.iconLocator()(e.value))}}function Xn(i,t){if(i&1){let e=I();d(0,"a",9,1),y("click",function(){let o=D(e).$implicit,r=l();return V(r.setValue(o.value))}),h(2,zn,1,2,"lab-icon",10),d(3,"span",11),w(4),_(5,"translate"),c()()}if(i&2){let e,n=t.$implicit,o=l(),r=z(2);Y(n.value===o.value()?"text-brand-500 group-focus-visible:outline-brand-500 -outline-offset-1 group-focus-visible:outline":""),u("title",r.scrollWidth+" "+r.clientWidth),s(2),m((e=o.type())?2:-1,e),s(2),A(v(5,5,n.label))}}function Yn(i,t){if(i&1){let e=I();d(0,"button",12),y("click",function(){D(e);let o=l(),r=z(2);return V(o.scrollNext(r,1))}),c()}if(i&2){let e=l();u("faIcon",e.faAngleRight)("border",!1)}}var Kn=0,se=class se extends te{constructor(){super(...arguments);this.ref=f(qe);this.injector=f($);this.tabs=We("tab");this.uniqueId=(Kn++).toString();this.id=p(`lab-tabs-${this.uniqueId}`);this.value=U();this.options=p.required();this.disabled=U(!1);this.type=p();this.iconLocator=p(e=>e);this.faAngleLeft=ei;this.faAngleRight=ti;this.indicatorStyle=b(()=>{let n=this.options().findIndex(r=>r.value===this.value()),o=this.tabs()[n]?.nativeElement;if(o!=null)return()=>({left:`${o.offsetLeft}px`,width:`${o.offsetWidth}px`})})}scrollNext(e,n){e.scrollLeft+=e.offsetWidth*.8*n}onScrollEnd(){ne(()=>{this.ref.markForCheck()},{injector:this.injector})}ngAfterViewInit(){this.ref.markForCheck()}onKeydown(e){switch(e.key){case"ArrowLeft":this.focusMove(-1,e);break;case"ArrowRight":this.focusMove(1,e);break;case"Home":this.focusFirst(e);break;case"End":this.focusLast(e);break}}focusFirst(e){let n=this.tabs()[0]?.nativeElement;n!=null&&(n.click(),n.scrollIntoView({block:"nearest"}),e.preventDefault())}focusLast(e){let n=this.tabs(),o=n[n.length-1]?.nativeElement;o!=null&&(o.click(),o.scrollIntoView({block:"nearest"}),e.preventDefault())}focusMove(e,n){let o=this.options().findIndex(a=>a.value===this.value()),r=this.tabs()[o+e]?.nativeElement;r!=null&&(r.click(),r.scrollIntoView({block:"nearest"}),n.preventDefault())}};se.\u0275fac=(()=>{let e;return function(o){return(e||(e=B(se)))(o||se)}})(),se.\u0275cmp=x({type:se,selectors:[["lab-tabs"]],viewQuery:function(n,o){n&1&&Se(o.tabs,Wn,5),n&2&&de()},hostAttrs:["role","tablist",1,"flex","items-center","relative","group","overflow-hidden","outline-none","shrink-0"],hostVars:2,hostBindings:function(n,o){n&1&&y("keydown",function(a){return o.onKeydown(a)}),n&2&&k("tabindex",o.disabled()?-1:0)("aria-disabled",!!o.disabled())},inputs:{id:[1,"id"],value:[1,"value"],options:[1,"options"],disabled:[1,"disabled"],type:[1,"type"],iconLocator:[1,"iconLocator"]},outputs:{value:"valueChange",disabled:"disabledChange"},features:[F],decls:8,vars:4,consts:[["scroll",""],["tab",""],["type","button","labButton","","tabindex","-1","aria-hidden","true",1,"absolute","left-0","z-1","h-full","rounded-l-none","bg-gray-950","shadow-sm","shadow-gray-700",3,"faIcon","border"],[1,"relative","inline-flex","grow","overflow-hidden","scroll-smooth",3,"scrollend"],["role","tab","aria-hidden","true",1,"flex","cursor-pointer","items-center","gap-1","border-b-2","border-gray-700","p-2",3,"title","class"],[1,"grow","border-b-2","border-gray-700"],[1,"bg-brand-500","absolute","bottom-0","h-0.5","transition-all","duration-300"],["type","button","labButton","","tabindex","-1","aria-hidden","true",1,"absolute","right-0","z-1","h-full","rounded-r-none","bg-gray-950","shadow-sm","shadow-gray-700",3,"faIcon","border"],["type","button","labButton","","tabindex","-1","aria-hidden","true",1,"absolute","left-0","z-1","h-full","rounded-l-none","bg-gray-950","shadow-sm","shadow-gray-700",3,"click","faIcon","border"],["role","tab","aria-hidden","true",1,"flex","cursor-pointer","items-center","gap-1","border-b-2","border-gray-700","p-2",3,"click","title"],[3,"type","value"],[1,"hidden","font-semibold","lg:line-clamp-1"],["type","button","labButton","","tabindex","-1","aria-hidden","true",1,"absolute","right-0","z-1","h-full","rounded-r-none","bg-gray-950","shadow-sm","shadow-gray-700",3,"click","faIcon","border"]],template:function(n,o){if(n&1){let r=I();h(0,$n,1,2,"button",2),d(1,"div",3,0),y("scrollend",function(){return D(r),V(o.onScrollEnd())}),T(3,Xn,6,7,"a",4,qn),g(5,"span",5)(6,"div",6),c(),h(7,Yn,1,2,"button",7)}if(n&2){let r,a=z(2);m(a.scrollWidth>a.clientWidth+4&&a.scrollLeft!==0?0:-1),s(3),O(o.options()),s(3),Wt((r=o.indicatorStyle())==null?null:r()),s(),m(a.scrollWidth>a.clientWidth+4&&a.scrollLeft<=a.scrollWidth-a.clientWidth-2?7:-1)}},dependencies:[Xe,he,N],encapsulation:2,changeDetection:0});var rt=se;function Qn(i,t){if(i&1){let e=I();d(0,"button",9),y("click",function(){D(e);let o=l();return V(o.filter.set(""))}),c()}if(i&2){let e=l();u("faIcon",e.faXmark)}}function Zn(i,t){if(i&1&&g(0,"fa-icon",4),i&2){let e=l();u("icon",e.faMagnifyingGlass)}}function Jn(i,t){if(i&1){let e=I();d(0,"lab-select",10),_(1,"translate"),Z("ngModelChange",function(o){D(e);let r=l();return Q(r.quality,o)||(r.quality=o),V(o)}),c()}if(i&2){let e=l();u("options",e.qualityOptions),K("ngModel",e.quality),u("iconLocator",e.qualityIconLocator),k("aria-label",v(1,4,"picker.qualityFilter"))}}function eo(i,t){if(i&1){let e=I();d(0,"button",12),y("click",function(){let o=D(e).$implicit,r=l(2);return V(r.selectId(o))}),c()}if(i&2){let e=t.$implicit,n=l(2);u("iconType",n.dialogData.type)("icon",e)("border",!1)("labTooltip",e)("labTooltipType",n.dialogData.type),k("aria-label",n.data()[n.recordKey][e].name)}}function to(i,t){if(i&1&&(d(0,"div",8),T(1,eo,1,6,"button",11,pt),c()),i&2){let e=t.$implicit;s(),O(e)}}var xe=class xe{constructor(){this.settingsStore=f(fe);this.dialogData=f(Qt);this.dialogRef=f(Kt);this.data=this.settingsStore.dataset;this.defaults=this.settingsStore.defaults;this.faMagnifyingGlass=$e;this.faXmark=ii;this.qualityOptions=oi;this.qualityIconLocator=t=>`q${t}`;this.isMultiselect=!1;this.filter=C("");this.quality=C(0);this.allSelected=C(!1);this.rowsKey=`${this.dialogData.type}CategoryRows`;this.recordKey=`${this.dialogData.type}Record`;this.allSelectItems=[];this.allCategoryRows={};this.activeIndex=0;this.categoryRows=b(()=>{let t=this.filter(),e=this.quality();if(!t&&e===-1)return this.allCategoryRows;let n=Array.from(this.dialogData.allIds);if(e!==-1){let a=e===0?void 0:e;n=n.filter(E=>this.data()[this.recordKey][E].quality===a)}if(t){let a=t.toLocaleLowerCase();n=n.filter(E=>this.data()[this.recordKey][E].name.toLocaleLowerCase().includes(a))}let o={},r=Object.keys(this.allCategoryRows);for(let a of r){let E=[];for(let Ai of this.allCategoryRows[a]){let Et=Ai.filter(Ei=>n.includes(Ei));Et.length&&E.push(Et)}E.length&&(o[a]=E)}return o});this.categoryOptions=b(()=>Object.keys(this.categoryRows()).map(t=>({label:this.data().categoryRecord[t].name,value:t})));this.selectedCategory=Ue({source:this.categoryRows,computation:(t,e)=>{let n=Object.keys(t);return e&&n.includes(e.value)?e.value:n[0]}});let{selection:t,allIds:e}=M({},this.dialogData);e=Array.from(e),t instanceof Set&&(t=Array.from(t)),Array.isArray(t)?(this.isMultiselect=!0,this.selection=[...t]):(this.isMultiselect=!1,this.selection=t);let n=this.data();if(n.categoryIds.forEach(o=>{n[this.rowsKey][o]&&(this.allCategoryRows[o]=[],n[this.rowsKey][o].forEach(r=>{let a=r.filter(E=>e.includes(E));a.length&&this.allCategoryRows[o].push(a)}))}),this.allSelectItems=Array.from(e).map(o=>({label:n[this.recordKey][o].name,value:o})),Array.isArray(t))this.allSelected.set(t.length===0);else if(t!=null){let o=n.categoryIds.indexOf(n[this.recordKey][t].category);this.activeIndex=o}}selectId(t){Array.isArray(this.selection)||this.dialogRef.close(t)}};xe.\u0275fac=function(e){return new(e||xe)},xe.\u0275cmp=x({type:xe,selectors:[["lab-picker-dialog"]],hostAttrs:[1,"flex","flex-col","gap-2","w-dvw","sm:w-[96dvw]","lg:w-[50rem]","p-2","pt-0","min-h-[30rem]","max-h-[50rem]","h-[80dvh]"],decls:11,vars:8,consts:[[1,"flex","gap-2"],[1,"relative","flex","grow","basis-2/3"],[1,"input",3,"ngModelChange","placeholder","ngModel"],["type","button","aria-hidden","true","labButton","",1,"absolute","right-0",3,"faIcon"],[1,"pointer-events-none","absolute","top-1.5","right-1.5","text-gray-500",3,"icon"],["type","system",1,"basis-1/3",3,"options","ngModel","iconLocator"],["type","category",3,"valueChange","value","options"],[1,"flex","flex-col","overflow-y-auto"],[1,"flex","flex-wrap"],["type","button","aria-hidden","true","labButton","",1,"absolute","right-0",3,"click","faIcon"],["type","system",1,"basis-1/3",3,"ngModelChange","options","ngModel","iconLocator"],["type","button","labButton","",3,"iconType","icon","border","labTooltip","labTooltipType"],["type","button","labButton","",3,"click","iconType","icon","border","labTooltip","labTooltipType"]],template:function(e,n){e&1&&(d(0,"div",0)(1,"div",1)(2,"input",2),_(3,"translate"),Z("ngModelChange",function(r){return Q(n.filter,r)||(n.filter=r),r}),c(),h(4,Qn,1,1,"button",3)(5,Zn,1,1,"fa-icon",4),c(),h(6,Jn,2,6,"lab-select",5),c(),d(7,"lab-tabs",6),Z("valueChange",function(r){return Q(n.selectedCategory,r)||(n.selectedCategory=r),r}),c(),d(8,"div",7),T(9,to,3,0,"div",8,pt),c()),e&2&&(s(2),u("placeholder",v(3,6,"filter")),K("ngModel",n.filter),s(2),m(n.filter()?4:5),s(2),m(n.data().flags.has("quality")?6:-1),s(),K("value",n.selectedCategory),u("options",n.categoryOptions()),s(2),O(n.categoryRows()[n.selectedCategory()]))},dependencies:[ve,ee,_e,re,pe,Xe,ot,rt,Me,N],encapsulation:2,changeDetection:0});var Le=xe;var le=class le{constructor(){this.dialog=f(Zt);this.settingsStore=f(fe)}pickItem(t){return t??=this.settingsStore.settings().availableItemIds,this.dialog.open(Le,{data:{header:"picker.selectItem",type:"item",allIds:t}}).closed.pipe(Oe())}pickRecipe(t){return t??=this.settingsStore.settings().availableRecipeIds,this.dialog.open(Le,{data:{header:"picker.selectRecipe",type:"recipe",allIds:t}}).closed.pipe(Oe())}};le.\u0275fac=function(e){return new(e||le)},le.\u0275prov=st({token:le,factory:le.\u0275fac,providedIn:"root"});var at=le;var xi=class{constructor(){this.picker=f(at);this.value=C(ue(1));this.unit=C(0);this.type=C(0);this.isRecipe=b(()=>this.unit()===3)}openPicker(){(this.isRecipe()?this.picker.pickRecipe():this.picker.pickItem()).subscribe(e=>{this.addObjective({targetId:e,value:this.value(),unit:this.unit(),type:this.type()})})}};var is=[{value:"captain-of-industry",label:"options.game.captainOfIndustry"},{value:"dyson-sphere-program",label:"options.game.dysonSphereProgram"},{value:"factor-y",label:"options.game.factorY"},{value:"factorio",label:"options.game.factorio"},{value:"final-factory",label:"options.game.finalFactory"},{value:"foundry",label:"options.game.foundry"},{value:"mindustry",label:"options.game.mindustry"},{value:"outworld-station",label:"options.game.outworldStation"},{value:"satisfactory",label:"options.game.satisfactory"},{value:"techtonica",label:"options.game.techtonica"}];export{Fi as a,ee as b,_e as c,re as d,rn as e,ve as f,et as g,Vi as h,Me as i,ot as j,at as k,xi as l,is as m};
