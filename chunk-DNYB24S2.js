import{e as it,f as nt}from"./chunk-VWNUCSOM.js";import{a as ve,c as Y,d as gt,e as J,f as Z,i as ee,j as he}from"./chunk-TRFGNSVE.js";import{A,B as mt,C as be,D as _e,r as ge,s as st,t as dt,v as ct,w as ut,y as pt,z}from"./chunk-4LDEAX52.js";import{C as at,E as lt,S as X,aa as re,ia as ft,l as tt,na as ye,p as fe,s as ot,y as rt}from"./chunk-W2XVHOKV.js";import{$b as W,Ab as B,Bb as P,Bc as et,Cb as d,Db as c,Eb as u,Fb as T,G as Ae,Gb as $e,Hb as He,Ib as h,Jb as Ke,Kb as _,Lb as l,Mb as Ge,Nb as Qe,Sa as s,Sb as Ue,Tb as ne,Ub as U,Vb as q,Xb as j,Yb as ze,Zb as oe,_ as Re,_b as M,ab as S,ac as Me,ba as Be,bc as N,cc as L,da as g,dc as F,eb as Q,ec as Ee,f as Le,fb as qe,fc as ce,gb as je,gc as V,hc as ue,ia as m,ic as Xe,ja as f,kb as de,l as Fe,la as se,lc as C,mc as x,q as Se,ra as v,rb as w,rc as D,sc as Ye,tc as pe,va as G,vb as We,vc as p,wb as y,wc as Je,x as Ve,xa as Pe,xb as b,xc as me,yb as Ie,yc as Ze,zc as E}from"./chunk-VPP3P5XC.js";import{a as Ne}from"./chunk-HZ6M6AS2.js";var $=new Be("LAB_CONTROL"),R=class{constructor(){this.touched=v(!1)}setValue(n){this.markAsTouched(),n!==this.value()&&(this.writeValue(n),this.onFormChange?.(n))}markAsTouched(){this.touched()||(this.touched.set(!0),this.onFormTouched?.())}writeValue(n){this.value.set(n)}registerOnChange(n){this.onFormChange=n}registerOnTouched(n){this.onFormTouched=n}setDisabledState(n){this.disabled.set(n)}};var Ct=["*"],xt=0,te=class te{constructor(){this.control=Ze.required($);this.uniqueId=(xt++).toString();this.labelId=`lab-form-field-label-${this.uniqueId}`;this.id=p(`lab-form-field-${this.uniqueId}`);this.label=p.required()}};te.\u0275fac=function(e){return new(e||te)},te.\u0275cmp=S({type:te,selectors:[["lab-form-field"]],contentQueries:function(e,i,t){e&1&&Ue(t,i.control,$,5),e&2&&U()},hostAttrs:[1,"inline-flex","flex-col"],hostVars:1,hostBindings:function(e,i){e&2&&w("id",i.id())},inputs:{id:[1,"id"],label:[1,"label"]},ngContentSelectors:Ct,decls:4,vars:5,consts:[[1,"mx-1","text-sm","text-gray-300",3,"id","for"]],template:function(e,i){e&1&&(Ge(),$e(0,"label",0),M(1),C(2,"translate"),He(),Qe(3)),e&2&&(Ke("id",i.labelId)("htmlFor",i.control().id()),s(),W(x(2,3,i.label())))},dependencies:[A],encapsulation:2,changeDetection:0});var Ce=te;var wt=0,I=class I extends R{constructor(){super(...arguments);this.uniqueId=(wt++).toString();this.id=p(`lab-input-number-${this.uniqueId}`);this.value=E();this.disabled=E(!1);this.minimum=p(X.zero);this.maximum=p(void 0);this.integer=p(!1);this.rounded=p(!0);this.labelledBy=p();this.value$=new Le;this.emit$=this.value$.pipe(tt(),Ae(e=>e.type==="input"?Ve(300):Fe({})),Se(e=>e.value),re(),Se(e=>this.integer()?e.round():e));this.text=pe({source:this.value,computation:(e,i)=>e==null?"0":i!=null&&X(i.value).eq(e)?i.value:e.toString()})}ngOnInit(){this.emit$.subscribe(e=>{this.setValue(e)})}validate(e){let i=e.value;if(i==null)return null;try{let t=this.minimum(),o=this.maximum();if((t==null||i.gte(t))&&(o==null||i.lte(o)))return null}catch{}return{rational:{valid:!1}}}onChange(e){try{let i=this.text(),t=X(i);this.value$.next({type:e.type,value:t}),t&&e.type==="keydown"&&this.text.set(t.toString())}catch{}}};I.\u0275fac=(()=>{let e;return function(t){return(e||(e=G(I)))(t||I)}})(),I.\u0275cmp=S({type:I,selectors:[["lab-input-number"]],hostAttrs:[1,"inline-flex","group"],inputs:{id:[1,"id"],value:[1,"value"],disabled:[1,"disabled"],minimum:[1,"minimum"],maximum:[1,"maximum"],integer:[1,"integer"],rounded:[1,"rounded"],labelledBy:[1,"labelledBy"]},outputs:{value:"valueChange",disabled:"disabledChange"},features:[ue([{provide:ve,useExisting:I,multi:!0},{provide:gt,useExisting:I,multi:!0},{provide:$,useExisting:I}]),Q],decls:1,vars:5,consts:[["type","text",1,"input","group-[.ng-invalid]:border-red-500","group-[.ng-invalid]:outline-red-500",3,"ngModelChange","input","blur","keydown.enter","ngModel","disabled"]],template:function(i,t){i&1&&(c(0,"input",0),F("ngModelChange",function(a){return L(t.text,a)||(t.text=a),a}),_("input",function(a){return t.onChange(a)})("blur",function(a){return t.onChange(a)})("keydown.enter",function(a){return t.onChange(a)}),u()),i&2&&(j("rounded-none",!t.rounded()),N("ngModel",t.text),d("disabled",t.disabled()),w("aria-labelledby",t.labelledBy()))},dependencies:[ee,Y,J,Z],encapsulation:2,changeDetection:0});var yt=I;var Tt=["overlay"],kt=["option"],Dt=(r,n)=>n.value;function St(r,n){if(r&1&&T(0,"lab-icon",2),r&2){let e=l(),i=V(0),t=V(1);d("value",e.iconLocator()(t.value))("type",i)}}function It(r,n){if(r&1&&T(0,"fa-icon",5),r&2){let e=l();j("-scale-y-100",e.opened()),d("icon",e.faChevronDown)}}function Mt(r,n){if(r&1&&(M(0),C(1,"translate")),r&2){l(2);let e=V(1);Me(" ",x(1,1,e.label)," ")}}function Et(r,n){if(r&1&&(c(0,"span",7),M(1),C(2,"translate"),u()),r&2){let e=l(2);s(),W(x(2,1,e.placeholder()))}}function Ot(r,n){if(r&1&&(c(0,"div",6),y(1,Mt,2,3)(2,Et,3,3,"span",7),u(),T(3,"fa-icon",8)),r&2){let e=l(),i=V(1);s(),b(i?1:e.placeholder()?2:-1),s(2),j("-scale-y-100",e.opened()),d("icon",e.faChevronDown)}}function Nt(r,n){if(r&1){let e=h();c(0,"div",10)(1,"input",13),C(2,"translate"),F("ngModelChange",function(t){m(e);let o=l(2);return L(o.filterText,t)||(o.filterText=t),f(t)}),u(),T(3,"fa-icon",14),u()}if(r&2){let e=l(2);s(),d("placeholder",x(2,3,"filter")),N("ngModel",e.filterText),s(2),d("icon",e.faMagnifyingGlass)}}function Lt(r,n){if(r&1&&T(0,"lab-icon",2),r&2){let e=l(2).$implicit,i=l(2),t=V(0);d("value",i.iconLocator()(e.value))("type",t)}}function Ft(r,n){if(r&1){let e=h();c(0,"li",16,1),_("click",function(){m(e);let t=l().$implicit,o=l(2);return f(o.select(t.value))})("keydown.enter",function(){m(e);let t=l().$implicit,o=l(2);return f(o.select(t.value))})("keydown.arrowup",function(t){m(e);let o=q(1),a=l(3);return f(a.focusMove(o,-1,t))})("keydown.arrowdown",function(t){m(e);let o=q(1),a=l(3);return f(a.focusMove(o,1,t))})("keydown.home",function(t){m(e);let o=l(3);return f(o.focusFirst(t))})("keydown.end",function(t){m(e);let o=l(3);return f(o.focusLast(t))}),y(2,Lt,1,2,"lab-icon",2),c(3,"span",17),M(4),u()()}if(r&2){let e=l().$implicit,i=V(0),t=l(2),o=V(0);oe(e.value===t.value()?"text-brand-50 bg-brand-950 hover:bg-brand-800 focus-visible:bg-brand-800":"hover:bg-gray-800 focus-visible:bg-gray-800"),d("labTooltip",e.tooltip),w("tabindex",e.disabled?-1:0)("aria-disabled",e.disabled?"true":"false")("aria-selected",e.value===t.value()),s(2),b(o?2:-1),s(2),W(i)}}function Vt(r,n){if(r&1&&(Ee(0),C(1,"translate"),y(2,Ft,5,8,"li",15)),r&2){let e=n.$implicit,i=l(2),t=ce(x(1,1,e.label));s(2),b(t.toLowerCase().includes(i.filterLower())?2:-1)}}function At(r,n){r&1&&(c(0,"li",12),M(1),C(2,"translate"),u()),r&2&&(s(),Me(" ",x(2,1,"select.noMatches")," "))}function Rt(r,n){if(r&1&&(c(0,"div",9,0),We("animate-fade-out"),y(2,Nt,4,5,"div",10),c(3,"ul",11),B(4,Vt,3,4,null,null,Dt),y(6,At,3,3,"li",12),u()()),r&2){let e=l();s(2),b(e.filter()?2:-1),s(),d("id",e.id()+"-listbox"),s(),P(e.options()),s(2),b(e.filterText()&&!e.listItems().length?6:-1)}}var Bt=0,Pt=new Set(["Enter","ArrowDown","ArrowUp","Home","End"]),qt=mt("inline-flex overflow-hidden grow cursor-pointer min-h-9 items-center select-none px-1 hover:border-brand-700 hover:z-2 focus-visible:border-brand-700 focus-visible:outline focus:z-2",{variants:{opened:{true:"border-brand-700 outline z-2",false:"border-gray-700"},rounded:{true:"rounded-xs"},iconOnly:{true:"min-w-9 justify-center hover:bg-gray-800 outline-brand-700",false:"border outline-brand-700"}}}),O=class O extends R{constructor(){super(...arguments);this.elementRef=g(Pe);this.overlayOrigin=g(ge);this.formField=g(Ce,{optional:!0});this.injector=g(se);this.overlay=Je.required("overlay");this.listItems=me("option");this.uniqueId=(Bt++).toString();this.id=p(`lab-select-${this.uniqueId}`);this.value=E();this.options=p.required();this.disabled=E(!1);this.placeholder=p();this.rounded=p(!0);this.type=p();this.filter=p(!1);this.iconOnly=p(!1);this.iconLocator=p(e=>e);this.labelledBy=p();this.hostClass=D(()=>qt({opened:this.opened(),rounded:this.rounded(),iconOnly:this.iconOnly()}));this.opened=v(!1);this.selectedOption=D(()=>this.options()?.find(e=>e.value===this.value()));this.faChevronDown=lt;this.faMagnifyingGlass=fe;this.filterText=v("");this.filterLower=D(()=>this.filterText().toLowerCase())}toggle(e){this.disabled()||e instanceof KeyboardEvent&&!Pt.has(e.key)||(this.opened()?this.opened.set(!1):(this.opened.set(!0),this.filterText.set(""),this.focusAfterOpen(e)),e?.preventDefault())}select(e){this.toggle(),this.setValue(e)}focusFirst(e){let i=this.listItems()[0]?.nativeElement;i!=null&&(i.focus(),e.preventDefault())}focusLast(e){let i=this.listItems(),t=i[i.length-1]?.nativeElement;t!=null&&(t.focus(),e.preventDefault())}focusMove(e,i,t){let o=this.listItems().findIndex(k=>k.nativeElement===e),a=this.listItems()[o+i]?.nativeElement;a!=null&&(a.focus(),t.preventDefault())}focusAfterOpen(e){let i=this.options(),t=i.findIndex(o=>o.value===this.value());if(e instanceof KeyboardEvent)switch(e.key){case"ArrowUp":t>0&&t--;break;case"ArrowDown":t!==-1&&t<i.length-1&&t++;break;case"Home":t=0;break;case"End":t=i.length-1;break}t!==-1&&de(()=>{let o=this.listItems().at(t)?.nativeElement;o!=null&&(o.scrollIntoView(),o.focus())},{injector:this.injector})}};O.\u0275fac=(()=>{let e;return function(t){return(e||(e=G(O)))(t||O)}})(),O.\u0275cmp=S({type:O,selectors:[["lab-select"]],viewQuery:function(i,t){i&1&&(ne(t.overlay,Tt,5),ne(t.listItems,kt,5)),i&2&&U(2)},hostAttrs:["role","combobox"],hostVars:8,hostBindings:function(i,t){i&1&&_("keydown",function(a){return t.toggle(a)})("click",function(){return t.toggle()}),i&2&&(w("id",t.id())("tabindex",t.disabled()?-1:0)("aria-disabled",t.disabled()?"true":null)("aria-controls",t.opened()?t.id()+"-listbox":null)("aria-expanded",t.opened())("aria-labelledby",t.labelledBy()??(t.formField==null?null:t.formField.labelId)??null),oe(t.hostClass()))},inputs:{id:[1,"id"],value:[1,"value"],options:[1,"options"],disabled:[1,"disabled"],placeholder:[1,"placeholder"],rounded:[1,"rounded"],type:[1,"type"],filter:[1,"filter"],iconOnly:[1,"iconOnly"],iconLocator:[1,"iconLocator"],labelledBy:[1,"labelledBy"]},outputs:{value:"valueChange",disabled:"disabledChange"},features:[ue([{provide:ve,multi:!0,useExisting:O},{provide:$,useExisting:O}]),qe([ge]),Q,Xe()],decls:6,vars:7,consts:[["overlay",""],["option",""],[3,"value","type"],[1,"absolute","text-gray-500","transition-transform",3,"-scale-y-100","icon"],["cdkConnectedOverlay","",3,"overlayOutsideClick","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayMinWidth"],[1,"absolute","text-gray-500","transition-transform",3,"icon"],[1,"ms-1","me-2","line-clamp-1","grow"],[1,"text-gray-500"],[1,"text-gray-500","transition-transform",3,"icon"],[1,"mt-1","flex","max-h-96","min-w-full","origin-top","flex-col","overflow-hidden","rounded-xs","border","border-gray-700","bg-gray-950","transition-all","starting:scale-y-75","starting:opacity-0"],[1,"relative","m-2","flex"],["role","listbox","tabindex","-1",1,"overflow-y-auto",3,"id"],[1,"flex","min-h-9","items-center","px-2"],[1,"input",3,"ngModelChange","placeholder","ngModel"],[1,"pointer-events-none","absolute","top-1.5","right-1.5","text-gray-500",3,"icon"],["role","option","labTooltipPosition","adjacent",1,"flex","min-h-9","cursor-pointer","items-center","px-1","outline-none","select-none",3,"class","labTooltip"],["role","option","labTooltipPosition","adjacent",1,"flex","min-h-9","cursor-pointer","items-center","px-1","outline-none","select-none",3,"click","keydown.enter","keydown.arrowup","keydown.arrowdown","keydown.home","keydown.end","labTooltip"],[1,"ms-1"]],template:function(i,t){if(i&1){let o=h();Ee(0)(1),y(2,St,1,2,"lab-icon",2)(3,It,1,3,"fa-icon",3),y(4,Ot,4,4),je(5,Rt,7,3,"ng-template",4),_("overlayOutsideClick",function(){return m(o),f(t.toggle())})}if(i&2){let o=ce(t.type());s();let a=ce(t.selectedOption());s(),b(o&&a?2:t.iconOnly()?3:-1),s(2),b(t.iconOnly()?-1:4),s(),d("cdkConnectedOverlayOrigin",t.overlayOrigin)("cdkConnectedOverlayOpen",t.opened())("cdkConnectedOverlayMinWidth",t.elementRef.nativeElement.offsetWidth)}},dependencies:[ee,Y,J,Z,dt,st,z,be,he,A],encapsulation:2,changeDetection:0});var we=O;var jt=["tab"],Wt=(r,n)=>n.value;function $t(r,n){if(r&1){let e=h();c(0,"button",8),_("click",function(){m(e);let t=l(),o=q(2);return f(t.scrollNext(o,-1))}),u()}if(r&2){let e=l();d("faIcon",e.faAngleLeft)}}function Ht(r,n){if(r&1&&T(0,"fa-icon",10),r&2){let e=l().$implicit;d("icon",e.faIcon)}}function Kt(r,n){if(r&1&&T(0,"lab-icon",11),r&2){let e=l().$implicit;d("type",n)("value",e.icon??e.value)}}function Gt(r,n){if(r&1){let e=h();c(0,"a",9,1),_("isActiveChange",function(t){let o=m(e).$implicit,a=l();return f(t?a.value.set(o.value):null)})("click",function(){let t=m(e).$implicit,o=l();return f(o.value.set(t.value))}),y(2,Ht,1,1,"fa-icon",10),y(3,Kt,1,2,"lab-icon",11),c(4,"span",12),M(5),C(6,"translate"),u()()}if(r&2){let e,i=n.$implicit,t=l();oe(i.value===t.value()?"text-brand-400 group-focus-visible:outline-brand-400 -outline-offset-1 group-focus-visible:outline":"hover:text-brand-400"),d("routerLink",i.routerLink),s(2),b(i.faIcon?2:-1),s(),b((e=t.type())?3:-1,e),s(),j("hidden",!!t.type()),s(),W(x(6,8,i.label))}}function Qt(r,n){if(r&1){let e=h();c(0,"button",13),_("click",function(){m(e);let t=l(),o=q(2);return f(t.scrollNext(o,1))}),u()}if(r&2){let e=l();d("faIcon",e.faAngleRight)}}var Ut=0,H=class H extends R{constructor(){super(...arguments);this.ref=g(et);this.injector=g(se);this.tabElements=me("tab");this.uniqueId=(Ut++).toString();this.id=p(`lab-tabs-${this.uniqueId}`);this.value=E();this.tabs=p.required();this.disabled=E(!1);this.type=p();this.faAngleLeft=ot;this.faAngleRight=rt;this.indicatorStyle=D(()=>{let i=this.tabs().findIndex(o=>o.value===this.value()),t=this.tabElements()[i]?.nativeElement;if(t!=null)return()=>({left:`${t.offsetLeft}px`,width:`${t.offsetWidth}px`})})}scrollNext(e,i){e.scrollLeft+=e.offsetWidth*.8*i}onScrollEnd(){de(()=>{this.ref.markForCheck()},{injector:this.injector})}ngAfterViewInit(){this.ref.markForCheck()}onKeydown(e){switch(e.key){case"ArrowLeft":this.focusMove(-1,e);break;case"ArrowRight":this.focusMove(1,e);break;case"Home":this.focusFirst(e);break;case"End":this.focusLast(e);break}}focusFirst(e){let i=this.tabElements()[0]?.nativeElement;i!=null&&(i.click(),i.scrollIntoView({block:"nearest"}),e.preventDefault())}focusLast(e){let i=this.tabElements(),t=i[i.length-1]?.nativeElement;t!=null&&(t.click(),t.scrollIntoView({block:"nearest"}),e.preventDefault())}focusMove(e,i){let t=this.tabs().findIndex(a=>a.value===this.value()),o=this.tabElements()[t+e]?.nativeElement;o!=null&&(o.click(),o.scrollIntoView({block:"nearest"}),i.preventDefault())}};H.\u0275fac=(()=>{let e;return function(t){return(e||(e=G(H)))(t||H)}})(),H.\u0275cmp=S({type:H,selectors:[["lab-tabs"]],viewQuery:function(i,t){i&1&&ne(t.tabElements,jt,5),i&2&&U()},hostAttrs:["role","tablist",1,"flex","items-center","relative","group","overflow-hidden","outline-none","shrink-0"],hostVars:2,hostBindings:function(i,t){i&1&&_("keydown",function(a){return t.onKeydown(a)}),i&2&&w("tabindex",t.disabled()?-1:0)("aria-disabled",!!t.disabled())},inputs:{id:[1,"id"],value:[1,"value"],tabs:[1,"tabs"],disabled:[1,"disabled"],type:[1,"type"]},outputs:{value:"valueChange",disabled:"disabledChange"},features:[Q],decls:8,vars:4,consts:[["scroll",""],["tab",""],["type","button","labButton","","tabindex","-1","aria-hidden","true",1,"absolute","left-0","z-1","h-full","rounded-l-none","bg-gray-950","shadow-sm","shadow-gray-700",3,"faIcon"],[1,"relative","inline-flex","grow","overflow-hidden","scroll-smooth",3,"scrollend"],["role","tab","routerLinkActive","","queryParamsHandling","preserve",1,"flex","cursor-pointer","items-center","gap-2","border-b-2","border-gray-700","px-3","py-2",3,"routerLink","class"],[1,"grow","border-b-2","border-gray-700"],[1,"bg-brand-400","absolute","bottom-0","h-0.5","transition-all","duration-300"],["type","button","labButton","","tabindex","-1","aria-hidden","true",1,"absolute","right-0","z-1","h-full","rounded-r-none","bg-gray-950","shadow-sm","shadow-gray-700",3,"faIcon"],["type","button","labButton","","tabindex","-1","aria-hidden","true",1,"absolute","left-0","z-1","h-full","rounded-l-none","bg-gray-950","shadow-sm","shadow-gray-700",3,"click","faIcon"],["role","tab","routerLinkActive","","queryParamsHandling","preserve",1,"flex","cursor-pointer","items-center","gap-2","border-b-2","border-gray-700","px-3","py-2",3,"isActiveChange","click","routerLink"],[3,"icon"],[3,"type","value"],[1,"font-semibold","lg:line-clamp-1"],["type","button","labButton","","tabindex","-1","aria-hidden","true",1,"absolute","right-0","z-1","h-full","rounded-r-none","bg-gray-950","shadow-sm","shadow-gray-700",3,"click","faIcon"]],template:function(i,t){if(i&1){let o=h();y(0,$t,1,1,"button",2),c(1,"div",3,0),_("scrollend",function(){return m(o),f(t.onScrollEnd())}),B(3,Gt,7,10,"a",4,Wt),T(5,"span",5)(6,"div",6),u(),y(7,Qt,1,1,"button",7)}if(i&2){let o,a=q(2);b(a.scrollWidth>a.clientWidth+4&&a.scrollLeft!==0?0:-1),s(3),P(t.tabs()),s(3),ze((o=t.indicatorStyle())==null?null:o()),s(),b(a.scrollWidth>a.clientWidth+4&&a.scrollLeft<=a.scrollWidth-a.clientWidth-2?7:-1)}},dependencies:[it,nt,z,_e,be,A],encapsulation:2,changeDetection:0});var Te=H;function zt(r,n){if(r&1){let e=h();c(0,"button",9),_("click",function(){m(e);let t=l();return f(t.filter.set(""))}),u()}if(r&2){let e=l();d("faIcon",e.faXmark)}}function Xt(r,n){if(r&1&&T(0,"fa-icon",4),r&2){let e=l();d("icon",e.faMagnifyingGlass)}}function Yt(r,n){if(r&1){let e=h();c(0,"lab-select",10),C(1,"translate"),F("ngModelChange",function(t){m(e);let o=l();return L(o.quality,t)||(o.quality=t),f(t)}),u()}if(r&2){let e=l();d("options",e.qualityOptions),N("ngModel",e.quality),d("iconLocator",e.qualityIconLocator),w("aria-label",x(1,4,"picker.qualityFilter"))}}function Jt(r,n){if(r&1){let e=h();c(0,"button",12),_("click",function(){let t=m(e).$implicit,o=l(2);return f(o.selectId(t))}),u()}if(r&2){let e=n.$implicit,i=l(2);d("iconType",i.dialogData.type)("icon",e)("border",e===i.selection)("color",e===i.selection?"brand":"gray")("labTooltip",e)("labTooltipType",i.dialogData.type),w("aria-label",i.data()[i.recordKey][e].name)}}function Zt(r,n){if(r&1&&(c(0,"div",8),B(1,Jt,1,7,"button",11,Ie),u()),r&2){let e=n.$implicit;s(),P(e)}}var ke=null,ie=class ie{constructor(){this.settingsStore=g(ye);this.dialogData=g(ut);this.dialogRef=g(ct);this.data=this.settingsStore.dataset;this.defaults=this.settingsStore.defaults;this.faMagnifyingGlass=fe;this.faXmark=at;this.qualityOptions=ft;this.qualityIconLocator=n=>`q${n}`;this.isMultiselect=!1;this.filter=v("");this.quality=v(0);this.allSelected=v(!1);this.rowsKey=`${this.dialogData.type}CategoryRows`;this.recordKey=`${this.dialogData.type}Record`;this.allSelectItems=[];this.allCategoryRows={};this.categoryRows=D(()=>{let n=this.filter(),e=this.quality();if(!n&&e===-1)return this.allCategoryRows;let i=Array.from(this.dialogData.allIds);if(e!==-1){let a=e===0?void 0:e;i=i.filter(k=>this.data()[this.recordKey][k].quality===a)}if(n){let a=n.toLocaleLowerCase();i=i.filter(k=>this.data()[this.recordKey][k].name.toLocaleLowerCase().includes(a))}let t={},o=Object.keys(this.allCategoryRows);for(let a of o){let k=[];for(let vt of this.allCategoryRows[a]){let Oe=vt.filter(ht=>i.includes(ht));Oe.length&&k.push(Oe)}k.length&&(t[a]=k)}return t});this.categoryTabs=D(()=>Object.keys(this.categoryRows()).map(n=>({label:this.data().categoryRecord[n].name,value:n})));this.selectedCategory=pe({source:this.categoryRows,computation:(n,e)=>{let i=Object.keys(n);return e&&i.includes(e.value)?e.value:ke&&i.includes(ke)?ke:i[0]}});let{selection:n,allIds:e}=Ne({},this.dialogData);e=Array.from(e),n instanceof Set&&(n=Array.from(n)),Array.isArray(n)?(this.isMultiselect=!0,this.selection=[...n]):(this.isMultiselect=!1,this.selection=n);let i=this.data();i.categoryIds.forEach(t=>{i[this.rowsKey][t]&&(this.allCategoryRows[t]=[],i[this.rowsKey][t].forEach(o=>{let a=o.filter(k=>e.includes(k));a.length&&this.allCategoryRows[t].push(a)}))}),this.allSelectItems=Array.from(e).map(t=>({label:i[this.recordKey][t].name,value:t})),Array.isArray(n)?this.allSelected.set(n.length===0):n!=null&&this.selectedCategory.set(i[this.recordKey][n].category),Ye(()=>ke=this.selectedCategory())}selectId(n){Array.isArray(this.selection)||this.dialogRef.close(n)}};ie.\u0275fac=function(e){return new(e||ie)},ie.\u0275cmp=S({type:ie,selectors:[["lab-picker-dialog"]],hostAttrs:[1,"flex","flex-col","gap-2","lg:w-3xl","p-2","pt-0","max-h-[50rem]","h-[90dvh]","sm:h-[80dvh]"],decls:11,vars:8,consts:[[1,"flex","gap-2"],[1,"relative","flex","grow","basis-2/3"],[1,"input","pe-9",3,"ngModelChange","placeholder","ngModel"],["type","button","aria-hidden","true","labButton","",1,"absolute","right-0",3,"faIcon"],[1,"pointer-events-none","absolute","top-2.5","right-2","text-gray-500",3,"icon"],["type","system",1,"basis-1/3",3,"options","ngModel","iconLocator"],["type","category",3,"valueChange","value","tabs"],[1,"flex","flex-col","overflow-y-auto"],[1,"flex","flex-wrap"],["type","button","aria-hidden","true","labButton","",1,"absolute","right-0",3,"click","faIcon"],["type","system",1,"basis-1/3",3,"ngModelChange","options","ngModel","iconLocator"],["type","button","labButton","",3,"iconType","icon","border","color","labTooltip","labTooltipType"],["type","button","labButton","",3,"click","iconType","icon","border","color","labTooltip","labTooltipType"]],template:function(e,i){e&1&&(c(0,"div",0)(1,"div",1)(2,"input",2),C(3,"translate"),F("ngModelChange",function(o){return L(i.filter,o)||(i.filter=o),o}),u(),y(4,zt,1,1,"button",3)(5,Xt,1,1,"fa-icon",4),u(),y(6,Yt,2,6,"lab-select",5),u(),c(7,"lab-tabs",6),F("valueChange",function(o){return L(i.selectedCategory,o)||(i.selectedCategory=o),o}),u(),c(8,"div",7),B(9,Zt,3,0,"div",8,Ie),u()),e&2&&(s(2),d("placeholder",x(3,6,"filter")),N("ngModel",i.filter),s(2),b(i.filter()?4:5),s(2),b(i.data().flags.has("quality")?6:-1),s(),N("value",i.selectedCategory),d("tabs",i.categoryTabs()),s(2),P(i.categoryRows()[i.selectedCategory()]))},dependencies:[ee,Y,J,Z,z,_e,we,Te,he,A],encapsulation:2,changeDetection:0});var le=ie;var K=class K{constructor(){this.dialog=g(pt);this.settingsStore=g(ye)}pickItem(n,e){return e??=this.settingsStore.settings().availableItemIds,this.dialog.open(le,{data:{header:"picker.selectItem",type:"item",allIds:e,selection:n}}).closed.pipe(re())}pickRecipe(n,e){return e??=this.settingsStore.settings().availableRecipeIds,this.dialog.open(le,{data:{header:"picker.selectRecipe",type:"recipe",allIds:e,selection:n}}).closed.pipe(re())}};K.\u0275fac=function(e){return new(e||K)},K.\u0275prov=Re({token:K,factory:K.\u0275fac,providedIn:"root"});var De=K;var _t=class{constructor(){this.picker=g(De);this.value=v(X(1));this.unit=v(0);this.type=v(0);this.isRecipe=D(()=>this.unit()===3)}openPicker(){(this.isRecipe()?this.picker.pickRecipe():this.picker.pickItem()).subscribe(e=>{this.addObjective({targetId:e,value:this.value(),unit:this.unit(),type:this.type()})})}};var Nn=[{value:"captain-of-industry",label:"options.game.captainOfIndustry"},{value:"dyson-sphere-program",label:"options.game.dysonSphereProgram"},{value:"factor-y",label:"options.game.factorY"},{value:"factorio",label:"options.game.factorio"},{value:"final-factory",label:"options.game.finalFactory"},{value:"foundry",label:"options.game.foundry"},{value:"mindustry",label:"options.game.mindustry"},{value:"outworld-station",label:"options.game.outworldStation"},{value:"satisfactory",label:"options.game.satisfactory"},{value:"techtonica",label:"options.game.techtonica"}];export{Ce as a,yt as b,we as c,Te as d,De as e,_t as f,Nn as g};
