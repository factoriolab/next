import{a as Ee,b as S}from"./chunk-N3GE4R2T.js";import{G as fe,H as ge,J as me,L as Ae,U as he,d as ae,e as ce,fa as ve,h as pe,ha as be,i as M,ja as ye,k as le,ka as we,l as ue,n as de,na as y,wa as De}from"./chunk-KFAZB2GZ.js";import{A as k,Eb as ee,H as m,Qa as _,S as d,Tb as te,Ub as re,W as f,X as G,Z as R,_a as T,aa as V,ba as A,c as E,ca as a,cb as Z,cc as j,da as q,dc as ne,eb as X,ec as ie,f as C,gc as oe,hb as $,ja as z,k as B,mb as O,oa as H,ob as U,pb as Q,q as p,rc as se,ta as K,wb as Y,xb as N,yb as F,z as l,zb as J}from"./chunk-B3EHFQVT.js";import{a as W,f as Re}from"./chunk-HZ6M6AS2.js";var h=class h{};h.\u0275fac=function(r){return new(r||h)},h.\u0275cmp=T({type:h,selectors:[["lab-root"]],hostAttrs:[1,"block","h-full"],decls:1,vars:0,template:function(r,t){r&1&&J(0,"router-outlet")},dependencies:[pe],encapsulation:2});var P=h;var x="Service workers are disabled or not supported by this browser",v=class{serviceWorker;worker;registration;events;constructor(n,r){if(this.serviceWorker=n,!n)this.worker=this.events=this.registration=new E(t=>t.error(new f(5601,!1)));else{let t=null,e=new C;this.worker=new E(c=>(t!==null&&c.next(t),e.subscribe(D=>c.next(D))));let s=()=>{let{controller:c}=n;c!==null&&(t=c,e.next(t))};n.addEventListener("controllerchange",s),s(),this.registration=this.worker.pipe(d(()=>n.getRegistration().then(c=>{if(!c)throw new f(5601,!1);return c})));let o=new C;this.events=o.asObservable();let u=c=>{let{data:D}=c;D?.type&&o.next(D)};n.addEventListener("message",u),r?.get(U,null,{optional:!0})?.onDestroy(()=>{n.removeEventListener("controllerchange",s),n.removeEventListener("message",u)})}}postMessage(n,r){return new Promise(t=>{this.worker.pipe(m(1)).subscribe(e=>{e.postMessage(W({action:n},r)),t()})})}postMessageWithOperation(n,r,t){let e=this.waitForOperationCompleted(t),s=this.postMessage(n,r);return Promise.all([s,e]).then(([,o])=>o)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(n){let r;return typeof n=="string"?r=t=>t.type===n:r=t=>n.includes(t.type),this.events.pipe(k(r))}nextEventOfType(n){return this.eventsOfType(n).pipe(m(1))}waitForOperationCompleted(n){return new Promise((r,t)=>{this.eventsOfType("OPERATION_COMPLETED").pipe(k(e=>e.nonce===n),m(1),p(e=>{if(e.result!==void 0)return e.result;throw new Error(e.error)})).subscribe({next:r,error:t})})}get isEnabled(){return!!this.serviceWorker}},Ue=(()=>{class i{sw;messages;notificationClicks;notificationCloses;pushSubscriptionChanges;subscription;get isEnabled(){return this.sw.isEnabled}pushManager=null;subscriptionChanges=new C;constructor(r){if(this.sw=r,!r.isEnabled){this.messages=l,this.notificationClicks=l,this.notificationCloses=l,this.pushSubscriptionChanges=l,this.subscription=l;return}this.messages=this.sw.eventsOfType("PUSH").pipe(p(e=>e.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(p(e=>e.data)),this.notificationCloses=this.sw.eventsOfType("NOTIFICATION_CLOSE").pipe(p(e=>e.data)),this.pushSubscriptionChanges=this.sw.eventsOfType("PUSH_SUBSCRIPTION_CHANGE").pipe(p(e=>e.data)),this.pushManager=this.sw.registration.pipe(p(e=>e.pushManager));let t=this.pushManager.pipe(d(e=>e.getSubscription()));this.subscription=new E(e=>{let s=t.subscribe(e),o=this.subscriptionChanges.subscribe(e);return()=>{s.unsubscribe(),o.unsubscribe()}})}requestSubscription(r){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(x));let t={userVisibleOnly:!0},e=this.decodeBase64(r.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),s=new Uint8Array(new ArrayBuffer(e.length));for(let o=0;o<e.length;o++)s[o]=e.charCodeAt(o);return t.applicationServerKey=s,new Promise((o,u)=>{this.pushManager.pipe(d(b=>b.subscribe(t)),m(1)).subscribe({next:b=>{this.subscriptionChanges.next(b),o(b)},error:u})})}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(x));let r=t=>{if(t===null)throw new f(5602,!1);return t.unsubscribe().then(e=>{if(!e)throw new f(5603,!1);this.subscriptionChanges.next(null)})};return new Promise((t,e)=>{this.subscription.pipe(m(1),d(r)).subscribe({next:t,error:e})})}decodeBase64(r){return atob(r)}static \u0275fac=function(t){return new(t||i)(A(v))};static \u0275prov=R({token:i,factory:i.\u0275fac})}return i})(),Ne=(()=>{class i{sw;versionUpdates;unrecoverable;get isEnabled(){return this.sw.isEnabled}ongoingCheckForUpdate=null;constructor(r){if(this.sw=r,!r.isEnabled){this.versionUpdates=l,this.unrecoverable=l;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(x));if(this.ongoingCheckForUpdate)return this.ongoingCheckForUpdate;let r=this.sw.generateNonce();return this.ongoingCheckForUpdate=this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:r},r).finally(()=>{this.ongoingCheckForUpdate=null}),this.ongoingCheckForUpdate}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new f(5601,!1));let r=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:r},r)}static \u0275fac=function(t){return new(t||i)(A(v))};static \u0275prov=R({token:i,factory:i.\u0275fac})}return i})();var Oe=new V("");function Fe(){let i=a(w);if(!("serviceWorker"in navigator&&i.enabled!==!1))return;let n=a(Oe),r=a($),t=a(U);r.runOutsideAngular(()=>{let e=navigator.serviceWorker,s=()=>e.controller?.postMessage({action:"INITIALIZE"});e.addEventListener("controllerchange",s),t.onDestroy(()=>{e.removeEventListener("controllerchange",s)})}),r.runOutsideAngular(()=>{let e,{registrationStrategy:s}=i;if(typeof s=="function")e=new Promise(o=>s().subscribe(()=>o()));else{let[o,...u]=(s||"registerWhenStable:30000").split(":");switch(o){case"registerImmediately":e=Promise.resolve();break;case"registerWithDelay":e=Te(+u[0]||0);break;case"registerWhenStable":e=Promise.race([t.whenStable(),Te(+u[0])]);break;default:throw new f(5600,!1)}}e.then(()=>{t.destroyed||navigator.serviceWorker.register(n,{scope:i.scope}).catch(o=>console.error(G(5604,!1)))})})}function Te(i){return new Promise(n=>setTimeout(n,i))}function je(i,n){return new v(i.enabled!==!1?navigator.serviceWorker:void 0,n)}var w=class{enabled;scope;registrationStrategy};function Me(i,n={}){return q([Ue,Ne,{provide:Oe,useValue:i},{provide:w,useValue:n},{provide:v,useFactory:je,deps:[w,z]},O(Fe)])}var Ie=Re(Ae(),1);function xe(i,n){}var g=class g extends fe{constructor(){super(...arguments);this.dialogRef=a(ge);this.faXmark=he}ngOnInit(){this.parseData()}parseData(){let r=this.dialogRef.config.data;if(r==null||typeof r!="object")return;let t=r.header;typeof t=="string"?this.header=t:typeof t=="object"&&([this.header,this.headerParams]=[...t])}};g.\u0275fac=(()=>{let r;return function(e){return(r||(r=K(g)))(e||g)}})(),g.\u0275cmp=T({type:g,selectors:[["lab-dialog"]],hostAttrs:[1,"flex","flex-col","bg-gray-950","border","border-gray-700"],features:[Z],decls:7,vars:9,consts:[[1,"flex","justify-between","p-3"],[1,"text-lg","font-semibold"],["type","button","labButton","",3,"click","faIcon","border"],["cdkPortalOutlet",""]],template:function(t,e){t&1&&(N(0,"div",0)(1,"h2",1),te(2),j(3,"translate"),F(),N(4,"button",2),j(5,"translate"),ee("click",function(){return e.dialogRef.close()}),F()(),X(6,xe,0,0,"ng-template",3)),t&2&&(_(2),re(ie(3,4,e.header,e.headerParams)),_(2),Y("faIcon",e.faXmark)("border",!1),Q("aria-label",ne(5,7,"close")))},dependencies:[de,De,we],encapsulation:2,changeDetection:0});var I=g;var Se=i=>{let n=a(M),r=a(Ee),t=a(S),e=i.params.id;switch(e){case"list":case"wizard":case"flow":case"data":return B(t.unzipQueryParams(i.queryParams)).pipe(p(s=>r.migrate(void 0,s)),d(async({modId:s,params:o})=>(o.z&&(o=await t.getHashParams(o)),n.createUrlTree([be(s,"1.1"),e],{queryParams:o}))));case"factorio":return n.createUrlTree([y]);case"final-factory":return n.createUrlTree(["ffy"]);case"foundry":return n.createUrlTree(["fdy"]);case"outworld-station":return n.createUrlTree(["ows"]);case"satisfactory":return n.createUrlTree(["sfy"]);case"techtonica":return n.createUrlTree(["tta"])}return t.route$.next(i),!0};var L=i=>{let n=a(M);if(a(ve).bypassLanding()){let t=a(S).stored();if(t&&Object.keys(i.params).length===0&&Object.keys(i.queryParams).length===0)return n.parseUrl(t);let e=i.paramMap.get("id")??y;return n.createUrlTree([e,"list"],{queryParams:i.queryParams})}return i.params.id==null?n.createUrlTree([y]):!0};var Pe=[{path:":id",canActivate:[Se],children:[{path:"",pathMatch:"full",canActivate:[L],loadComponent:()=>import("./chunk-X35D6UUO.js").then(i=>i.Landing)},{path:"",loadComponent:()=>import("./chunk-S5Y6B27U.js").then(i=>i.Main),loadChildren:()=>import("./chunk-SXRQ23PG.js").then(i=>i.routes)}]},{path:"**",canActivate:[L],children:[]}];var Le={container:I,hasBackdrop:!0};async function We(){return a(ye).load(),(0,Ie.loadModule)("glpk.all.wasm")}var ke={providers:[{provide:me,useValue:Le},O(()=>We()),H(),oe(),le(Pe,ue()),ce(),Me("ngsw-worker.js",{enabled:!se(),registrationStrategy:"registerWhenStable:30000"})]};ae(P,ke).catch(i=>{console.error(i)});
