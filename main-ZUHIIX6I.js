import{a as De,b as M}from"./chunk-LXIEQ3AL.js";import{G as de,H as fe,J as me,L as Re,V as ge,d as se,e as ae,h as ce,ha as he,i as S,ja as ve,k as pe,l as le,la as be,ma as ye,n as ue,pa as y,za as we}from"./chunk-TPHFHNRA.js";import{A as k,Eb as J,H as g,Qa as U,S as b,Tb as ee,Ub as te,W as f,X as B,Z as R,_a as T,aa as G,ba as A,c as E,ca as a,cb as K,cc as j,da as V,dc as re,eb as Z,ec as ne,f as C,gc as ie,hb as X,ja as z,mb as O,oa as q,ob as _,pb as $,q as d,rc as oe,ta as H,wb as Q,xb as N,yb as F,z as u,zb as Y}from"./chunk-B3EHFQVT.js";import{a as W,f as ke}from"./chunk-HZ6M6AS2.js";var h=class h{};h.\u0275fac=function(r){return new(r||h)},h.\u0275cmp=T({type:h,selectors:[["lab-root"]],hostAttrs:[1,"block","h-full"],decls:1,vars:0,template:function(r,t){r&1&&Y(0,"router-outlet")},dependencies:[ce],encapsulation:2});var P=h;var x="Service workers are disabled or not supported by this browser",v=class{serviceWorker;worker;registration;events;constructor(n,r){if(this.serviceWorker=n,!n)this.worker=this.events=this.registration=new E(t=>t.error(new f(5601,!1)));else{let t=null,e=new C;this.worker=new E(c=>(t!==null&&c.next(t),e.subscribe(D=>c.next(D))));let s=()=>{let{controller:c}=n;c!==null&&(t=c,e.next(t))};n.addEventListener("controllerchange",s),s(),this.registration=this.worker.pipe(b(()=>n.getRegistration().then(c=>{if(!c)throw new f(5601,!1);return c})));let o=new C;this.events=o.asObservable();let p=c=>{let{data:D}=c;D?.type&&o.next(D)};n.addEventListener("message",p),r?.get(_,null,{optional:!0})?.onDestroy(()=>{n.removeEventListener("controllerchange",s),n.removeEventListener("message",p)})}}postMessage(n,r){return new Promise(t=>{this.worker.pipe(g(1)).subscribe(e=>{e.postMessage(W({action:n},r)),t()})})}postMessageWithOperation(n,r,t){let e=this.waitForOperationCompleted(t),s=this.postMessage(n,r);return Promise.all([s,e]).then(([,o])=>o)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(n){let r;return typeof n=="string"?r=t=>t.type===n:r=t=>n.includes(t.type),this.events.pipe(k(r))}nextEventOfType(n){return this.eventsOfType(n).pipe(g(1))}waitForOperationCompleted(n){return new Promise((r,t)=>{this.eventsOfType("OPERATION_COMPLETED").pipe(k(e=>e.nonce===n),g(1),d(e=>{if(e.result!==void 0)return e.result;throw new Error(e.error)})).subscribe({next:r,error:t})})}get isEnabled(){return!!this.serviceWorker}},Ue=(()=>{class i{sw;messages;notificationClicks;notificationCloses;pushSubscriptionChanges;subscription;get isEnabled(){return this.sw.isEnabled}pushManager=null;subscriptionChanges=new C;constructor(r){if(this.sw=r,!r.isEnabled){this.messages=u,this.notificationClicks=u,this.notificationCloses=u,this.pushSubscriptionChanges=u,this.subscription=u;return}this.messages=this.sw.eventsOfType("PUSH").pipe(d(e=>e.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(d(e=>e.data)),this.notificationCloses=this.sw.eventsOfType("NOTIFICATION_CLOSE").pipe(d(e=>e.data)),this.pushSubscriptionChanges=this.sw.eventsOfType("PUSH_SUBSCRIPTION_CHANGE").pipe(d(e=>e.data)),this.pushManager=this.sw.registration.pipe(d(e=>e.pushManager));let t=this.pushManager.pipe(b(e=>e.getSubscription()));this.subscription=new E(e=>{let s=t.subscribe(e),o=this.subscriptionChanges.subscribe(e);return()=>{s.unsubscribe(),o.unsubscribe()}})}requestSubscription(r){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(x));let t={userVisibleOnly:!0},e=this.decodeBase64(r.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),s=new Uint8Array(new ArrayBuffer(e.length));for(let o=0;o<e.length;o++)s[o]=e.charCodeAt(o);return t.applicationServerKey=s,new Promise((o,p)=>{this.pushManager.pipe(b(l=>l.subscribe(t)),g(1)).subscribe({next:l=>{this.subscriptionChanges.next(l),o(l)},error:p})})}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(x));let r=t=>{if(t===null)throw new f(5602,!1);return t.unsubscribe().then(e=>{if(!e)throw new f(5603,!1);this.subscriptionChanges.next(null)})};return new Promise((t,e)=>{this.subscription.pipe(g(1),b(r)).subscribe({next:t,error:e})})}decodeBase64(r){return atob(r)}static \u0275fac=function(t){return new(t||i)(A(v))};static \u0275prov=R({token:i,factory:i.\u0275fac})}return i})(),_e=(()=>{class i{sw;versionUpdates;unrecoverable;get isEnabled(){return this.sw.isEnabled}ongoingCheckForUpdate=null;constructor(r){if(this.sw=r,!r.isEnabled){this.versionUpdates=u,this.unrecoverable=u;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(x));if(this.ongoingCheckForUpdate)return this.ongoingCheckForUpdate;let r=this.sw.generateNonce();return this.ongoingCheckForUpdate=this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:r},r).finally(()=>{this.ongoingCheckForUpdate=null}),this.ongoingCheckForUpdate}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new f(5601,!1));let r=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:r},r)}static \u0275fac=function(t){return new(t||i)(A(v))};static \u0275prov=R({token:i,factory:i.\u0275fac})}return i})();var Te=new G("");function Ne(){let i=a(w);if(!("serviceWorker"in navigator&&i.enabled!==!1))return;let n=a(Te),r=a(X),t=a(_);r.runOutsideAngular(()=>{let e=navigator.serviceWorker,s=()=>e.controller?.postMessage({action:"INITIALIZE"});e.addEventListener("controllerchange",s),t.onDestroy(()=>{e.removeEventListener("controllerchange",s)})}),r.runOutsideAngular(()=>{let e,{registrationStrategy:s}=i;if(typeof s=="function")e=new Promise(o=>s().subscribe(()=>o()));else{let[o,...p]=(s||"registerWhenStable:30000").split(":");switch(o){case"registerImmediately":e=Promise.resolve();break;case"registerWithDelay":e=Ce(+p[0]||0);break;case"registerWhenStable":e=Promise.race([t.whenStable(),Ce(+p[0])]);break;default:throw new f(5600,!1)}}e.then(()=>{t.destroyed||navigator.serviceWorker.register(n,{scope:i.scope}).catch(o=>console.error(B(5604,!1)))})})}function Ce(i){return new Promise(n=>setTimeout(n,i))}function Fe(i,n){return new v(i.enabled!==!1?navigator.serviceWorker:void 0,n)}var w=class{enabled;scope;registrationStrategy};function Oe(i,n={}){return V([Ue,_e,{provide:Te,useValue:i},{provide:w,useValue:n},{provide:v,useFactory:Fe,deps:[w,z]},O(Ne)])}var Pe=ke(Re(),1);function je(i,n){}var m=class m extends de{constructor(){super(...arguments);this.dialogRef=a(fe);this.faXmark=ge}ngOnInit(){this.parseData()}parseData(){let r=this.dialogRef.config.data;if(r==null||typeof r!="object")return;let t=r.header;typeof t=="string"?this.header=t:typeof t=="object"&&([this.header,this.headerParams]=[...t])}};m.\u0275fac=(()=>{let r;return function(e){return(r||(r=H(m)))(e||m)}})(),m.\u0275cmp=T({type:m,selectors:[["lab-dialog"]],hostAttrs:[1,"flex","flex-col","bg-gray-950","border","border-gray-700"],features:[K],decls:7,vars:9,consts:[[1,"flex","justify-between","p-3"],[1,"text-lg","font-semibold"],["type","button","labButton","",3,"click","faIcon","border"],["cdkPortalOutlet",""]],template:function(t,e){t&1&&(N(0,"div",0)(1,"h2",1),ee(2),j(3,"translate"),F(),N(4,"button",2),j(5,"translate"),J("click",function(){return e.dialogRef.close()}),F()(),Z(6,je,0,0,"ng-template",3)),t&2&&(U(2),te(ne(3,4,e.header,e.headerParams)),U(2),Q("faIcon",e.faXmark)("border",!1),$("aria-label",re(5,7,"close")))},dependencies:[ue,we,ye],encapsulation:2,changeDetection:0});var I=m;var Se=i=>{let n=a(S),r=a(De),t=a(M),e=i.params.id;switch(e){case"list":case"wizard":case"flow":case"data":return(async()=>{let o=await t.unzipQueryParams(i.queryParams),{modId:p,params:l}=r.migrate(void 0,o),c=l.z?await t.getHashParams(l):l;return n.createUrlTree([ve(p,"1.1"),e],{queryParams:c})})();case"factorio":return n.createUrlTree([y]);case"final-factory":return n.createUrlTree(["ffy"]);case"foundry":return n.createUrlTree(["fdy"]);case"outworld-station":return n.createUrlTree(["ows"]);case"satisfactory":return n.createUrlTree(["sfy"]);case"techtonica":return n.createUrlTree(["tta"])}return t.route$.next(i),!0};var L=i=>{let n=a(S);if(a(he).bypassLanding()){let t=a(M).stored();if(t&&Object.keys(i.params).length===0&&Object.keys(i.queryParams).length===0)return n.parseUrl(t);let e=i.paramMap.get("id")??y;return n.createUrlTree([e,"list"],{queryParams:i.queryParams})}return i.params.id==null?n.createUrlTree([y]):!0};var Me=[{path:":id",canActivate:[Se],children:[{path:"",pathMatch:"full",canActivate:[L],loadComponent:()=>import("./chunk-RFU5C5K6.js").then(i=>i.Landing)},{path:"",loadComponent:()=>import("./chunk-X6GMJ33P.js").then(i=>i.Main),loadChildren:()=>import("./chunk-SXRQ23PG.js").then(i=>i.routes)}]},{path:"**",canActivate:[L],children:[]}];var xe={container:I,hasBackdrop:!0};async function Le(){return a(be).load(),(0,Pe.loadModule)("glpk.all.wasm")}var Ie={providers:[{provide:me,useValue:xe},O(()=>Le()),q(),ie(),pe(Me,le()),ae(),Oe("ngsw-worker.js",{enabled:!oe(),registrationStrategy:"registerWhenStable:30000"})]};se(P,Ie).catch(i=>{console.error(i)});
